(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Va(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ep={exports:{}},za={},tp={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls=Symbol.for("react.element"),ry=Symbol.for("react.portal"),ny=Symbol.for("react.fragment"),iy=Symbol.for("react.strict_mode"),oy=Symbol.for("react.profiler"),sy=Symbol.for("react.provider"),ay=Symbol.for("react.context"),uy=Symbol.for("react.forward_ref"),ly=Symbol.for("react.suspense"),cy=Symbol.for("react.memo"),dy=Symbol.for("react.lazy"),Wd=Symbol.iterator;function fy(e){return e===null||typeof e!="object"?null:(e=Wd&&e[Wd]||e["@@iterator"],typeof e=="function"?e:null)}var rp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},np=Object.assign,ip={};function Xi(e,t,r){this.props=e,this.context=t,this.refs=ip,this.updater=r||rp}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function op(){}op.prototype=Xi.prototype;function Sc(e,t,r){this.props=e,this.context=t,this.refs=ip,this.updater=r||rp}var Ec=Sc.prototype=new op;Ec.constructor=Sc;np(Ec,Xi.prototype);Ec.isPureReactComponent=!0;var qd=Array.isArray,sp=Object.prototype.hasOwnProperty,bc={current:null},ap={key:!0,ref:!0,__self:!0,__source:!0};function up(e,t,r){var n,i={},o=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)sp.call(t,n)&&!ap.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];i.children=h}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:ls,type:e,key:o,ref:u,props:i,_owner:bc.current}}function hy(e,t){return{$$typeof:ls,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ls}function py(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Jd=/\/+/g;function Cu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?py(""+e.key):t.toString(36)}function qs(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case ls:case ry:u=!0}}if(u)return u=e,i=i(u),e=n===""?"."+Cu(u,0):n,qd(i)?(r="",e!=null&&(r=e.replace(Jd,"$&/")+"/"),qs(i,t,r,"",function(f){return f})):i!=null&&(xc(i)&&(i=hy(i,r+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(Jd,"$&/")+"/")+e)),t.push(i)),1;if(u=0,n=n===""?".":n+":",qd(e))for(var c=0;c<e.length;c++){o=e[c];var h=n+Cu(o,c);u+=qs(o,t,r,h,i)}else if(h=fy(e),typeof h=="function")for(e=h.call(e),c=0;!(o=e.next()).done;)o=o.value,h=n+Cu(o,c++),u+=qs(o,t,r,h,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function bs(e,t,r){if(e==null)return e;var n=[],i=0;return qs(e,n,"","",function(o){return t.call(r,o,i++)}),n}function gy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},Js={transition:null},my={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Js,ReactCurrentOwner:bc};function lp(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:bs,forEach:function(e,t,r){bs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bs(e,function(){t++}),t},toArray:function(e){return bs(e,function(t){return t})||[]},only:function(e){if(!xc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pe.Component=Xi;Pe.Fragment=ny;Pe.Profiler=oy;Pe.PureComponent=Sc;Pe.StrictMode=iy;Pe.Suspense=ly;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=my;Pe.act=lp;Pe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=np({},e.props),i=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=bc.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in t)sp.call(t,h)&&!ap.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&c!==void 0?c[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];n.children=c}return{$$typeof:ls,type:e.type,key:i,ref:o,props:n,_owner:u}};Pe.createContext=function(e){return e={$$typeof:ay,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sy,_context:e},e.Consumer=e};Pe.createElement=up;Pe.createFactory=function(e){var t=up.bind(null,e);return t.type=e,t};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(e){return{$$typeof:uy,render:e}};Pe.isValidElement=xc;Pe.lazy=function(e){return{$$typeof:dy,_payload:{_status:-1,_result:e},_init:gy}};Pe.memo=function(e,t){return{$$typeof:cy,type:e,compare:t===void 0?null:t}};Pe.startTransition=function(e){var t=Js.transition;Js.transition={};try{e()}finally{Js.transition=t}};Pe.unstable_act=lp;Pe.useCallback=function(e,t){return qt.current.useCallback(e,t)};Pe.useContext=function(e){return qt.current.useContext(e)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};Pe.useEffect=function(e,t){return qt.current.useEffect(e,t)};Pe.useId=function(){return qt.current.useId()};Pe.useImperativeHandle=function(e,t,r){return qt.current.useImperativeHandle(e,t,r)};Pe.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};Pe.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};Pe.useMemo=function(e,t){return qt.current.useMemo(e,t)};Pe.useReducer=function(e,t,r){return qt.current.useReducer(e,t,r)};Pe.useRef=function(e){return qt.current.useRef(e)};Pe.useState=function(e){return qt.current.useState(e)};Pe.useSyncExternalStore=function(e,t,r){return qt.current.useSyncExternalStore(e,t,r)};Pe.useTransition=function(){return qt.current.useTransition()};Pe.version="18.3.1";tp.exports=Pe;var dt=tp.exports;const ji=Va(dt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=dt,vy=Symbol.for("react.element"),_y=Symbol.for("react.fragment"),wy=Object.prototype.hasOwnProperty,Sy=yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ey={key:!0,ref:!0,__self:!0,__source:!0};function cp(e,t,r){var n,i={},o=null,u=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)wy.call(t,n)&&!Ey.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:vy,type:e,key:o,ref:u,props:i,_owner:Sy.current}}za.Fragment=_y;za.jsx=cp;za.jsxs=cp;ep.exports=za;var he=ep.exports,hl={},dp={exports:{}},fr={},fp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(le,ue){var ce=le.length;le.push(ue);e:for(;0<ce;){var Se=ce-1>>>1,be=le[Se];if(0<i(be,ue))le[Se]=ue,le[ce]=be,ce=Se;else break e}}function r(le){return le.length===0?null:le[0]}function n(le){if(le.length===0)return null;var ue=le[0],ce=le.pop();if(ce!==ue){le[0]=ce;e:for(var Se=0,be=le.length,at=be>>>1;Se<at;){var Be=2*(Se+1)-1,ht=le[Be],tt=Be+1,He=le[tt];if(0>i(ht,ce))tt<be&&0>i(He,ht)?(le[Se]=He,le[tt]=ce,Se=tt):(le[Se]=ht,le[Be]=ce,Se=Be);else if(tt<be&&0>i(He,ce))le[Se]=He,le[tt]=ce,Se=tt;else break e}}return ue}function i(le,ue){var ce=le.sortIndex-ue.sortIndex;return ce!==0?ce:le.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var h=[],f=[],g=1,p=null,y=3,F=!1,E=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(le){for(var ue=r(f);ue!==null;){if(ue.callback===null)n(f);else if(ue.startTime<=le)n(f),ue.sortIndex=ue.expirationTime,t(h,ue);else break;ue=r(f)}}function P(le){if(C=!1,b(le),!E)if(r(h)!==null)E=!0,st(B);else{var ue=r(f);ue!==null&&Me(P,ue.startTime-le)}}function B(le,ue){E=!1,C&&(C=!1,_(Q),Q=-1),F=!0;var ce=y;try{for(b(ue),p=r(h);p!==null&&(!(p.expirationTime>ue)||le&&!oe());){var Se=p.callback;if(typeof Se=="function"){p.callback=null,y=p.priorityLevel;var be=Se(p.expirationTime<=ue);ue=e.unstable_now(),typeof be=="function"?p.callback=be:p===r(h)&&n(h),b(ue)}else n(h);p=r(h)}if(p!==null)var at=!0;else{var Be=r(f);Be!==null&&Me(P,Be.startTime-ue),at=!1}return at}finally{p=null,y=ce,F=!1}}var L=!1,A=null,Q=-1,ie=5,M=-1;function oe(){return!(e.unstable_now()-M<ie)}function ke(){if(A!==null){var le=e.unstable_now();M=le;var ue=!0;try{ue=A(!0,le)}finally{ue?Fe():(L=!1,A=null)}}else L=!1}var Fe;if(typeof v=="function")Fe=function(){v(ke)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,ze=ft.port2;ft.port1.onmessage=ke,Fe=function(){ze.postMessage(null)}}else Fe=function(){I(ke,0)};function st(le){A=le,L||(L=!0,Fe())}function Me(le,ue){Q=I(function(){le(e.unstable_now())},ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(le){le.callback=null},e.unstable_continueExecution=function(){E||F||(E=!0,st(B))},e.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<le?Math.floor(1e3/le):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(le){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var ce=y;y=ue;try{return le()}finally{y=ce}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(le,ue){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ce=y;y=le;try{return ue()}finally{y=ce}},e.unstable_scheduleCallback=function(le,ue,ce){var Se=e.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Se+ce:Se):ce=Se,le){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ce+be,le={id:g++,callback:ue,priorityLevel:le,startTime:ce,expirationTime:be,sortIndex:-1},ce>Se?(le.sortIndex=ce,t(f,le),r(h)===null&&le===r(f)&&(C?(_(Q),Q=-1):C=!0,Me(P,ce-Se))):(le.sortIndex=be,t(h,le),E||F||(E=!0,st(B))),le},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(le){var ue=y;return function(){var ce=y;y=ue;try{return le.apply(this,arguments)}finally{y=ce}}}})(hp);fp.exports=hp;var by=fp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy=dt,cr=by;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pp=new Set,Vo={};function si(e,t){Ui(e,t),Ui(e+"Capture",t)}function Ui(e,t){for(Vo[e]=t,e=0;e<t.length;e++)pp.add(t[e])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pl=Object.prototype.hasOwnProperty,Fy=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gd={},Qd={};function ky(e){return pl.call(Qd,e)?!0:pl.call(Gd,e)?!1:Fy.test(e)?Qd[e]=!0:(Gd[e]=!0,!1)}function Ty(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cy(e,t,r,n){if(t===null||typeof t>"u"||Ty(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Jt(e,t,r,n,i,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ot[e]=new Jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ot[t]=new Jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ot[e]=new Jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ot[e]=new Jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ot[e]=new Jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ot[e]=new Jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ot[e]=new Jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ot[e]=new Jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ot[e]=new Jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fc=/[\-:]([a-z])/g;function kc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fc,kc);Ot[t]=new Jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fc,kc);Ot[t]=new Jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fc,kc);Ot[t]=new Jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ot[e]=new Jt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ot[e]=new Jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tc(e,t,r,n){var i=Ot.hasOwnProperty(t)?Ot[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Cy(t,r,i,n)&&(r=null),n||i===null?ky(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gn=xy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xs=Symbol.for("react.element"),mi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),Cc=Symbol.for("react.strict_mode"),gl=Symbol.for("react.profiler"),gp=Symbol.for("react.provider"),mp=Symbol.for("react.context"),Pc=Symbol.for("react.forward_ref"),ml=Symbol.for("react.suspense"),yl=Symbol.for("react.suspense_list"),Ac=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),yp=Symbol.for("react.offscreen"),Yd=Symbol.iterator;function fo(e){return e===null||typeof e!="object"?null:(e=Yd&&e[Yd]||e["@@iterator"],typeof e=="function"?e:null)}var ot=Object.assign,Pu;function Fo(e){if(Pu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pu=t&&t[1]||""}return`
`+Pu+e}var Au=!1;function Ru(e,t){if(!e||Au)return"";Au=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var n=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){n=f}e.call(t.prototype)}else{try{throw Error()}catch(f){n=f}e()}}catch(f){if(f&&n&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=n.stack.split(`
`),u=i.length-1,c=o.length-1;1<=u&&0<=c&&i[u]!==o[c];)c--;for(;1<=u&&0<=c;u--,c--)if(i[u]!==o[c]){if(u!==1||c!==1)do if(u--,c--,0>c||i[u]!==o[c]){var h=`
`+i[u].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=u&&0<=c);break}}}finally{Au=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fo(e):""}function Py(e){switch(e.tag){case 5:return Fo(e.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return e=Ru(e.type,!1),e;case 11:return e=Ru(e.type.render,!1),e;case 1:return e=Ru(e.type,!0),e;default:return""}}function vl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yi:return"Fragment";case mi:return"Portal";case gl:return"Profiler";case Cc:return"StrictMode";case ml:return"Suspense";case yl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mp:return(e.displayName||"Context")+".Consumer";case gp:return(e._context.displayName||"Context")+".Provider";case Pc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ac:return t=e.displayName||null,t!==null?t:vl(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return vl(e(t))}catch{}}return null}function Ay(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vl(t);case 8:return t===Cc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ln(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ry(e){var t=vp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){n=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fs(e){e._valueTracker||(e._valueTracker=Ry(e))}function _p(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=vp(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function pa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _l(e,t){var r=t.checked;return ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ln(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wp(e,t){t=t.checked,t!=null&&Tc(e,"checked",t,!1)}function wl(e,t){wp(e,t);var r=Ln(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Sl(e,t.type,Ln(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Sl(e,t,r){(t!=="number"||pa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ko=Array.isArray;function Pi(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ln(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function El(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ef(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ae(92));if(ko(r)){if(1<r.length)throw Error(ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ln(r)}}function Sp(e,t){var r=Ln(t.value),n=Ln(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function tf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ep(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ep(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ks,bp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ks=ks||document.createElement("div"),ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Iy=["Webkit","ms","Moz","O"];Object.keys(Io).forEach(function(e){Iy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Io[t]=Io[e]})});function xp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Io.hasOwnProperty(e)&&Io[e]?(""+t).trim():t+"px"}function Fp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=xp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Ny=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xl(e,t){if(t){if(Ny[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function Fl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kl=null;function Rc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tl=null,Ai=null,Ri=null;function rf(e){if(e=fs(e)){if(typeof Tl!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Qa(t),Tl(e.stateNode,e.type,t))}}function kp(e){Ai?Ri?Ri.push(e):Ri=[e]:Ai=e}function Tp(){if(Ai){var e=Ai,t=Ri;if(Ri=Ai=null,rf(e),t)for(e=0;e<t.length;e++)rf(t[e])}}function Cp(e,t){return e(t)}function Pp(){}var Iu=!1;function Ap(e,t,r){if(Iu)return e(t,r);Iu=!0;try{return Cp(e,t,r)}finally{Iu=!1,(Ai!==null||Ri!==null)&&(Pp(),Tp())}}function Wo(e,t){var r=e.stateNode;if(r===null)return null;var n=Qa(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ae(231,t,typeof r));return r}var Cl=!1;if(cn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Cl=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Cl=!1}function Ly(e,t,r,n,i,o,u,c,h){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(g){this.onError(g)}}var No=!1,ga=null,ma=!1,Pl=null,Dy={onError:function(e){No=!0,ga=e}};function Oy(e,t,r,n,i,o,u,c,h){No=!1,ga=null,Ly.apply(Dy,arguments)}function jy(e,t,r,n,i,o,u,c,h){if(Oy.apply(this,arguments),No){if(No){var f=ga;No=!1,ga=null}else throw Error(ae(198));ma||(ma=!0,Pl=f)}}function ai(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Rp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nf(e){if(ai(e)!==e)throw Error(ae(188))}function Uy(e){var t=e.alternate;if(!t){if(t=ai(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return nf(i),e;if(o===n)return nf(i),t;o=o.sibling}throw Error(ae(188))}if(r.return!==n.return)r=i,n=o;else{for(var u=!1,c=i.child;c;){if(c===r){u=!0,r=i,n=o;break}if(c===n){u=!0,n=i,r=o;break}c=c.sibling}if(!u){for(c=o.child;c;){if(c===r){u=!0,r=o,n=i;break}if(c===n){u=!0,n=o,r=i;break}c=c.sibling}if(!u)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?e:t}function Ip(e){return e=Uy(e),e!==null?Np(e):null}function Np(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Np(e);if(t!==null)return t;e=e.sibling}return null}var Lp=cr.unstable_scheduleCallback,of=cr.unstable_cancelCallback,My=cr.unstable_shouldYield,By=cr.unstable_requestPaint,gt=cr.unstable_now,Hy=cr.unstable_getCurrentPriorityLevel,Ic=cr.unstable_ImmediatePriority,Dp=cr.unstable_UserBlockingPriority,ya=cr.unstable_NormalPriority,$y=cr.unstable_LowPriority,Op=cr.unstable_IdlePriority,Wa=null,Jr=null;function Ky(e){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot(Wa,e,void 0,(e.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:Wy,Vy=Math.log,zy=Math.LN2;function Wy(e){return e>>>=0,e===0?32:31-(Vy(e)/zy|0)|0}var Ts=64,Cs=4194304;function To(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function va(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,u=r&268435455;if(u!==0){var c=u&~i;c!==0?n=To(c):(o&=u,o!==0&&(n=To(o)))}else u=r&~i,u!==0?n=To(u):o!==0&&(n=To(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Or(t),i=1<<r,n|=e[r],t&=~i;return n}function qy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jy(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-Or(o),c=1<<u,h=i[u];h===-1?(!(c&r)||c&n)&&(i[u]=qy(c,t)):h<=t&&(e.expiredLanes|=c),o&=~c}}function Al(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jp(){var e=Ts;return Ts<<=1,!(Ts&4194240)&&(Ts=64),e}function Nu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function cs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Or(t),e[t]=r}function Gy(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Or(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function Nc(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Or(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Le=0;function Up(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mp,Lc,Bp,Hp,$p,Rl=!1,Ps=[],kn=null,Tn=null,Cn=null,qo=new Map,Jo=new Map,En=[],Qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sf(e,t){switch(e){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":qo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(t.pointerId)}}function po(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=fs(t),t!==null&&Lc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Yy(e,t,r,n,i){switch(t){case"focusin":return kn=po(kn,e,t,r,n,i),!0;case"dragenter":return Tn=po(Tn,e,t,r,n,i),!0;case"mouseover":return Cn=po(Cn,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return qo.set(o,po(qo.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Jo.set(o,po(Jo.get(o)||null,e,t,r,n,i)),!0}return!1}function Kp(e){var t=qn(e.target);if(t!==null){var r=ai(t);if(r!==null){if(t=r.tag,t===13){if(t=Rp(r),t!==null){e.blockedOn=t,$p(e.priority,function(){Bp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Il(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);kl=n,r.target.dispatchEvent(n),kl=null}else return t=fs(r),t!==null&&Lc(t),e.blockedOn=r,!1;t.shift()}return!0}function af(e,t,r){Gs(e)&&r.delete(t)}function Xy(){Rl=!1,kn!==null&&Gs(kn)&&(kn=null),Tn!==null&&Gs(Tn)&&(Tn=null),Cn!==null&&Gs(Cn)&&(Cn=null),qo.forEach(af),Jo.forEach(af)}function go(e,t){e.blockedOn===t&&(e.blockedOn=null,Rl||(Rl=!0,cr.unstable_scheduleCallback(cr.unstable_NormalPriority,Xy)))}function Go(e){function t(i){return go(i,e)}if(0<Ps.length){go(Ps[0],e);for(var r=1;r<Ps.length;r++){var n=Ps[r];n.blockedOn===e&&(n.blockedOn=null)}}for(kn!==null&&go(kn,e),Tn!==null&&go(Tn,e),Cn!==null&&go(Cn,e),qo.forEach(t),Jo.forEach(t),r=0;r<En.length;r++)n=En[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<En.length&&(r=En[0],r.blockedOn===null);)Kp(r),r.blockedOn===null&&En.shift()}var Ii=gn.ReactCurrentBatchConfig,_a=!0;function Zy(e,t,r,n){var i=Le,o=Ii.transition;Ii.transition=null;try{Le=1,Dc(e,t,r,n)}finally{Le=i,Ii.transition=o}}function ev(e,t,r,n){var i=Le,o=Ii.transition;Ii.transition=null;try{Le=4,Dc(e,t,r,n)}finally{Le=i,Ii.transition=o}}function Dc(e,t,r,n){if(_a){var i=Il(e,t,r,n);if(i===null)Ku(e,t,n,wa,r),sf(e,n);else if(Yy(i,e,t,r,n))n.stopPropagation();else if(sf(e,n),t&4&&-1<Qy.indexOf(e)){for(;i!==null;){var o=fs(i);if(o!==null&&Mp(o),o=Il(e,t,r,n),o===null&&Ku(e,t,n,wa,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Ku(e,t,n,null,r)}}var wa=null;function Il(e,t,r,n){if(wa=null,e=Rc(n),e=qn(e),e!==null)if(t=ai(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Rp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wa=e,null}function Vp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hy()){case Ic:return 1;case Dp:return 4;case ya:case $y:return 16;case Op:return 536870912;default:return 16}default:return 16}}var xn=null,Oc=null,Qs=null;function zp(){if(Qs)return Qs;var e,t=Oc,r=t.length,n,i="value"in xn?xn.value:xn.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===i[o-n];n++);return Qs=i.slice(e,1<n?1-n:void 0)}function Ys(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function As(){return!0}function uf(){return!1}function hr(e){function t(r,n,i,o,u){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?As:uf,this.isPropagationStopped=uf,this}return ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),t}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jc=hr(Zi),ds=ot({},Zi,{view:0,detail:0}),tv=hr(ds),Lu,Du,mo,qa=ot({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mo&&(mo&&e.type==="mousemove"?(Lu=e.screenX-mo.screenX,Du=e.screenY-mo.screenY):Du=Lu=0,mo=e),Lu)},movementY:function(e){return"movementY"in e?e.movementY:Du}}),lf=hr(qa),rv=ot({},qa,{dataTransfer:0}),nv=hr(rv),iv=ot({},ds,{relatedTarget:0}),Ou=hr(iv),ov=ot({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),sv=hr(ov),av=ot({},Zi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uv=hr(av),lv=ot({},Zi,{data:0}),cf=hr(lv),cv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fv[e])?!!t[e]:!1}function Uc(){return hv}var pv=ot({},ds,{key:function(e){if(e.key){var t=cv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ys(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uc,charCode:function(e){return e.type==="keypress"?Ys(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ys(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gv=hr(pv),mv=ot({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=hr(mv),yv=ot({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uc}),vv=hr(yv),_v=ot({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),wv=hr(_v),Sv=ot({},qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ev=hr(Sv),bv=[9,13,27,32],Mc=cn&&"CompositionEvent"in window,Lo=null;cn&&"documentMode"in document&&(Lo=document.documentMode);var xv=cn&&"TextEvent"in window&&!Lo,Wp=cn&&(!Mc||Lo&&8<Lo&&11>=Lo),ff=" ",hf=!1;function qp(e,t){switch(e){case"keyup":return bv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vi=!1;function Fv(e,t){switch(e){case"compositionend":return Jp(t);case"keypress":return t.which!==32?null:(hf=!0,ff);case"textInput":return e=t.data,e===ff&&hf?null:e;default:return null}}function kv(e,t){if(vi)return e==="compositionend"||!Mc&&qp(e,t)?(e=zp(),Qs=Oc=xn=null,vi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wp&&t.locale!=="ko"?null:t.data;default:return null}}var Tv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tv[e.type]:t==="textarea"}function Gp(e,t,r,n){kp(n),t=Sa(t,"onChange"),0<t.length&&(r=new jc("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Do=null,Qo=null;function Cv(e){sg(e,0)}function Ja(e){var t=Si(e);if(_p(t))return e}function Pv(e,t){if(e==="change")return t}var Qp=!1;if(cn){var ju;if(cn){var Uu="oninput"in document;if(!Uu){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),Uu=typeof gf.oninput=="function"}ju=Uu}else ju=!1;Qp=ju&&(!document.documentMode||9<document.documentMode)}function mf(){Do&&(Do.detachEvent("onpropertychange",Yp),Qo=Do=null)}function Yp(e){if(e.propertyName==="value"&&Ja(Qo)){var t=[];Gp(t,Qo,e,Rc(e)),Ap(Cv,t)}}function Av(e,t,r){e==="focusin"?(mf(),Do=t,Qo=r,Do.attachEvent("onpropertychange",Yp)):e==="focusout"&&mf()}function Rv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ja(Qo)}function Iv(e,t){if(e==="click")return Ja(t)}function Nv(e,t){if(e==="input"||e==="change")return Ja(t)}function Lv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mr=typeof Object.is=="function"?Object.is:Lv;function Yo(e,t){if(Mr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!pl.call(t,i)||!Mr(e[i],t[i]))return!1}return!0}function yf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vf(e,t){var r=yf(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yf(r)}}function Xp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zp(){for(var e=window,t=pa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=pa(e.document)}return t}function Bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dv(e){var t=Zp(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Xp(r.ownerDocument.documentElement,r)){if(n!==null&&Bc(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=vf(r,o);var u=vf(r,n);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ov=cn&&"documentMode"in document&&11>=document.documentMode,_i=null,Nl=null,Oo=null,Ll=!1;function _f(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ll||_i==null||_i!==pa(n)||(n=_i,"selectionStart"in n&&Bc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oo&&Yo(Oo,n)||(Oo=n,n=Sa(Nl,"onSelect"),0<n.length&&(t=new jc("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=_i)))}function Rs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wi={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionend:Rs("Transition","TransitionEnd")},Mu={},eg={};cn&&(eg=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Ga(e){if(Mu[e])return Mu[e];if(!wi[e])return e;var t=wi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in eg)return Mu[e]=t[r];return e}var tg=Ga("animationend"),rg=Ga("animationiteration"),ng=Ga("animationstart"),ig=Ga("transitionend"),og=new Map,wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,t){og.set(e,t),si(t,[e])}for(var Bu=0;Bu<wf.length;Bu++){var Hu=wf[Bu],jv=Hu.toLowerCase(),Uv=Hu[0].toUpperCase()+Hu.slice(1);jn(jv,"on"+Uv)}jn(tg,"onAnimationEnd");jn(rg,"onAnimationIteration");jn(ng,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn(ig,"onTransitionEnd");Ui("onMouseEnter",["mouseout","mouseover"]);Ui("onMouseLeave",["mouseout","mouseover"]);Ui("onPointerEnter",["pointerout","pointerover"]);Ui("onPointerLeave",["pointerout","pointerover"]);si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));si("onBeforeInput",["compositionend","keypress","textInput","paste"]);si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function Sf(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,jy(n,t,void 0,e),e.currentTarget=null}function sg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var u=n.length-1;0<=u;u--){var c=n[u],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==o&&i.isPropagationStopped())break e;Sf(i,c,f),o=h}else for(u=0;u<n.length;u++){if(c=n[u],h=c.instance,f=c.currentTarget,c=c.listener,h!==o&&i.isPropagationStopped())break e;Sf(i,c,f),o=h}}}if(ma)throw e=Pl,ma=!1,Pl=null,e}function Je(e,t){var r=t[Ml];r===void 0&&(r=t[Ml]=new Set);var n=e+"__bubble";r.has(n)||(ag(t,e,2,!1),r.add(n))}function $u(e,t,r){var n=0;t&&(n|=4),ag(r,e,n,t)}var Is="_reactListening"+Math.random().toString(36).slice(2);function Xo(e){if(!e[Is]){e[Is]=!0,pp.forEach(function(r){r!=="selectionchange"&&(Mv.has(r)||$u(r,!1,e),$u(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Is]||(t[Is]=!0,$u("selectionchange",!1,t))}}function ag(e,t,r,n){switch(Vp(t)){case 1:var i=Zy;break;case 4:i=ev;break;default:i=Dc}r=i.bind(null,t,r,e),i=void 0,!Cl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Ku(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(u===4)for(u=n.return;u!==null;){var h=u.tag;if((h===3||h===4)&&(h=u.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;u=u.return}for(;c!==null;){if(u=qn(c),u===null)return;if(h=u.tag,h===5||h===6){n=o=u;continue e}c=c.parentNode}}n=n.return}Ap(function(){var f=o,g=Rc(r),p=[];e:{var y=og.get(e);if(y!==void 0){var F=jc,E=e;switch(e){case"keypress":if(Ys(r)===0)break e;case"keydown":case"keyup":F=gv;break;case"focusin":E="focus",F=Ou;break;case"focusout":E="blur",F=Ou;break;case"beforeblur":case"afterblur":F=Ou;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=nv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=vv;break;case tg:case rg:case ng:F=sv;break;case ig:F=wv;break;case"scroll":F=tv;break;case"wheel":F=Ev;break;case"copy":case"cut":case"paste":F=uv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=df}var C=(t&4)!==0,I=!C&&e==="scroll",_=C?y!==null?y+"Capture":null:y;C=[];for(var v=f,b;v!==null;){b=v;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,_!==null&&(P=Wo(v,_),P!=null&&C.push(Zo(v,P,b)))),I)break;v=v.return}0<C.length&&(y=new F(y,E,null,r,g),p.push({event:y,listeners:C}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",y&&r!==kl&&(E=r.relatedTarget||r.fromElement)&&(qn(E)||E[dn]))break e;if((F||y)&&(y=g.window===g?g:(y=g.ownerDocument)?y.defaultView||y.parentWindow:window,F?(E=r.relatedTarget||r.toElement,F=f,E=E?qn(E):null,E!==null&&(I=ai(E),E!==I||E.tag!==5&&E.tag!==6)&&(E=null)):(F=null,E=f),F!==E)){if(C=lf,P="onMouseLeave",_="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(C=df,P="onPointerLeave",_="onPointerEnter",v="pointer"),I=F==null?y:Si(F),b=E==null?y:Si(E),y=new C(P,v+"leave",F,r,g),y.target=I,y.relatedTarget=b,P=null,qn(g)===f&&(C=new C(_,v+"enter",E,r,g),C.target=b,C.relatedTarget=I,P=C),I=P,F&&E)t:{for(C=F,_=E,v=0,b=C;b;b=fi(b))v++;for(b=0,P=_;P;P=fi(P))b++;for(;0<v-b;)C=fi(C),v--;for(;0<b-v;)_=fi(_),b--;for(;v--;){if(C===_||_!==null&&C===_.alternate)break t;C=fi(C),_=fi(_)}C=null}else C=null;F!==null&&Ef(p,y,F,C,!1),E!==null&&I!==null&&Ef(p,I,E,C,!0)}}e:{if(y=f?Si(f):window,F=y.nodeName&&y.nodeName.toLowerCase(),F==="select"||F==="input"&&y.type==="file")var B=Pv;else if(pf(y))if(Qp)B=Nv;else{B=Rv;var L=Av}else(F=y.nodeName)&&F.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(B=Iv);if(B&&(B=B(e,f))){Gp(p,B,r,g);break e}L&&L(e,y,f),e==="focusout"&&(L=y._wrapperState)&&L.controlled&&y.type==="number"&&Sl(y,"number",y.value)}switch(L=f?Si(f):window,e){case"focusin":(pf(L)||L.contentEditable==="true")&&(_i=L,Nl=f,Oo=null);break;case"focusout":Oo=Nl=_i=null;break;case"mousedown":Ll=!0;break;case"contextmenu":case"mouseup":case"dragend":Ll=!1,_f(p,r,g);break;case"selectionchange":if(Ov)break;case"keydown":case"keyup":_f(p,r,g)}var A;if(Mc)e:{switch(e){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else vi?qp(e,r)&&(Q="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Q="onCompositionStart");Q&&(Wp&&r.locale!=="ko"&&(vi||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&vi&&(A=zp()):(xn=g,Oc="value"in xn?xn.value:xn.textContent,vi=!0)),L=Sa(f,Q),0<L.length&&(Q=new cf(Q,e,null,r,g),p.push({event:Q,listeners:L}),A?Q.data=A:(A=Jp(r),A!==null&&(Q.data=A)))),(A=xv?Fv(e,r):kv(e,r))&&(f=Sa(f,"onBeforeInput"),0<f.length&&(g=new cf("onBeforeInput","beforeinput",null,r,g),p.push({event:g,listeners:f}),g.data=A))}sg(p,t)})}function Zo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sa(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Wo(e,r),o!=null&&n.unshift(Zo(e,o,i)),o=Wo(e,t),o!=null&&n.push(Zo(e,o,i))),e=e.return}return n}function fi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ef(e,t,r,n,i){for(var o=t._reactName,u=[];r!==null&&r!==n;){var c=r,h=c.alternate,f=c.stateNode;if(h!==null&&h===n)break;c.tag===5&&f!==null&&(c=f,i?(h=Wo(r,o),h!=null&&u.unshift(Zo(r,h,c))):i||(h=Wo(r,o),h!=null&&u.push(Zo(r,h,c)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var Bv=/\r\n?/g,Hv=/\u0000|\uFFFD/g;function bf(e){return(typeof e=="string"?e:""+e).replace(Bv,`
`).replace(Hv,"")}function Ns(e,t,r){if(t=bf(t),bf(e)!==t&&r)throw Error(ae(425))}function Ea(){}var Dl=null,Ol=null;function jl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ul=typeof setTimeout=="function"?setTimeout:void 0,$v=typeof clearTimeout=="function"?clearTimeout:void 0,xf=typeof Promise=="function"?Promise:void 0,Kv=typeof queueMicrotask=="function"?queueMicrotask:typeof xf<"u"?function(e){return xf.resolve(null).then(e).catch(Vv)}:Ul;function Vv(e){setTimeout(function(){throw e})}function Vu(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Go(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Go(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ff(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var eo=Math.random().toString(36).slice(2),Wr="__reactFiber$"+eo,es="__reactProps$"+eo,dn="__reactContainer$"+eo,Ml="__reactEvents$"+eo,zv="__reactListeners$"+eo,Wv="__reactHandles$"+eo;function qn(e){var t=e[Wr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dn]||r[Wr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ff(e);e!==null;){if(r=e[Wr])return r;e=Ff(e)}return t}e=r,r=e.parentNode}return null}function fs(e){return e=e[Wr]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Si(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Qa(e){return e[es]||null}var Bl=[],Ei=-1;function Un(e){return{current:e}}function Ye(e){0>Ei||(e.current=Bl[Ei],Bl[Ei]=null,Ei--)}function Ve(e,t){Ei++,Bl[Ei]=e.current,e.current=t}var Dn={},$t=Un(Dn),tr=Un(!1),ti=Dn;function Mi(e,t){var r=e.type.contextTypes;if(!r)return Dn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function rr(e){return e=e.childContextTypes,e!=null}function ba(){Ye(tr),Ye($t)}function kf(e,t,r){if($t.current!==Dn)throw Error(ae(168));Ve($t,t),Ve(tr,r)}function ug(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ae(108,Ay(e)||"Unknown",i));return ot({},r,n)}function xa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dn,ti=$t.current,Ve($t,e),Ve(tr,tr.current),!0}function Tf(e,t,r){var n=e.stateNode;if(!n)throw Error(ae(169));r?(e=ug(e,t,ti),n.__reactInternalMemoizedMergedChildContext=e,Ye(tr),Ye($t),Ve($t,e)):Ye(tr),Ve(tr,r)}var nn=null,Ya=!1,zu=!1;function lg(e){nn===null?nn=[e]:nn.push(e)}function qv(e){Ya=!0,lg(e)}function Mn(){if(!zu&&nn!==null){zu=!0;var e=0,t=Le;try{var r=nn;for(Le=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}nn=null,Ya=!1}catch(i){throw nn!==null&&(nn=nn.slice(e+1)),Lp(Ic,Mn),i}finally{Le=t,zu=!1}}return null}var bi=[],xi=0,Fa=null,ka=0,yr=[],vr=0,ri=null,sn=1,an="";function zn(e,t){bi[xi++]=ka,bi[xi++]=Fa,Fa=e,ka=t}function cg(e,t,r){yr[vr++]=sn,yr[vr++]=an,yr[vr++]=ri,ri=e;var n=sn;e=an;var i=32-Or(n)-1;n&=~(1<<i),r+=1;var o=32-Or(t)+i;if(30<o){var u=i-i%5;o=(n&(1<<u)-1).toString(32),n>>=u,i-=u,sn=1<<32-Or(t)+i|r<<i|n,an=o+e}else sn=1<<o|r<<i|n,an=e}function Hc(e){e.return!==null&&(zn(e,1),cg(e,1,0))}function $c(e){for(;e===Fa;)Fa=bi[--xi],bi[xi]=null,ka=bi[--xi],bi[xi]=null;for(;e===ri;)ri=yr[--vr],yr[vr]=null,an=yr[--vr],yr[vr]=null,sn=yr[--vr],yr[vr]=null}var ur=null,sr=null,et=!1,Ir=null;function dg(e,t){var r=_r(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Cf(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ur=e,sr=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ur=e,sr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ri!==null?{id:sn,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=_r(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ur=e,sr=null,!0):!1;default:return!1}}function Hl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $l(e){if(et){var t=sr;if(t){var r=t;if(!Cf(e,t)){if(Hl(e))throw Error(ae(418));t=Pn(r.nextSibling);var n=ur;t&&Cf(e,t)?dg(n,r):(e.flags=e.flags&-4097|2,et=!1,ur=e)}}else{if(Hl(e))throw Error(ae(418));e.flags=e.flags&-4097|2,et=!1,ur=e}}}function Pf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ur=e}function Ls(e){if(e!==ur)return!1;if(!et)return Pf(e),et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jl(e.type,e.memoizedProps)),t&&(t=sr)){if(Hl(e))throw fg(),Error(ae(418));for(;t;)dg(e,t),t=Pn(t.nextSibling)}if(Pf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sr=Pn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sr=null}}else sr=ur?Pn(e.stateNode.nextSibling):null;return!0}function fg(){for(var e=sr;e;)e=Pn(e.nextSibling)}function Bi(){sr=ur=null,et=!1}function Kc(e){Ir===null?Ir=[e]:Ir.push(e)}var Jv=gn.ReactCurrentBatchConfig;function yo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var c=i.refs;u===null?delete c[o]:c[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,e))}return e}function Ds(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Af(e){var t=e._init;return t(e._payload)}function hg(e){function t(_,v){if(e){var b=_.deletions;b===null?(_.deletions=[v],_.flags|=16):b.push(v)}}function r(_,v){if(!e)return null;for(;v!==null;)t(_,v),v=v.sibling;return null}function n(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=Nn(_,v),_.index=0,_.sibling=null,_}function o(_,v,b){return _.index=b,e?(b=_.alternate,b!==null?(b=b.index,b<v?(_.flags|=2,v):b):(_.flags|=2,v)):(_.flags|=1048576,v)}function u(_){return e&&_.alternate===null&&(_.flags|=2),_}function c(_,v,b,P){return v===null||v.tag!==6?(v=Xu(b,_.mode,P),v.return=_,v):(v=i(v,b),v.return=_,v)}function h(_,v,b,P){var B=b.type;return B===yi?g(_,v,b.props.children,P,b.key):v!==null&&(v.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===wn&&Af(B)===v.type)?(P=i(v,b.props),P.ref=yo(_,v,b),P.return=_,P):(P=ia(b.type,b.key,b.props,null,_.mode,P),P.ref=yo(_,v,b),P.return=_,P)}function f(_,v,b,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Zu(b,_.mode,P),v.return=_,v):(v=i(v,b.children||[]),v.return=_,v)}function g(_,v,b,P,B){return v===null||v.tag!==7?(v=Xn(b,_.mode,P,B),v.return=_,v):(v=i(v,b),v.return=_,v)}function p(_,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xu(""+v,_.mode,b),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xs:return b=ia(v.type,v.key,v.props,null,_.mode,b),b.ref=yo(_,null,v),b.return=_,b;case mi:return v=Zu(v,_.mode,b),v.return=_,v;case wn:var P=v._init;return p(_,P(v._payload),b)}if(ko(v)||fo(v))return v=Xn(v,_.mode,b,null),v.return=_,v;Ds(_,v)}return null}function y(_,v,b,P){var B=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return B!==null?null:c(_,v,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xs:return b.key===B?h(_,v,b,P):null;case mi:return b.key===B?f(_,v,b,P):null;case wn:return B=b._init,y(_,v,B(b._payload),P)}if(ko(b)||fo(b))return B!==null?null:g(_,v,b,P,null);Ds(_,b)}return null}function F(_,v,b,P,B){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(b)||null,c(v,_,""+P,B);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case xs:return _=_.get(P.key===null?b:P.key)||null,h(v,_,P,B);case mi:return _=_.get(P.key===null?b:P.key)||null,f(v,_,P,B);case wn:var L=P._init;return F(_,v,b,L(P._payload),B)}if(ko(P)||fo(P))return _=_.get(b)||null,g(v,_,P,B,null);Ds(v,P)}return null}function E(_,v,b,P){for(var B=null,L=null,A=v,Q=v=0,ie=null;A!==null&&Q<b.length;Q++){A.index>Q?(ie=A,A=null):ie=A.sibling;var M=y(_,A,b[Q],P);if(M===null){A===null&&(A=ie);break}e&&A&&M.alternate===null&&t(_,A),v=o(M,v,Q),L===null?B=M:L.sibling=M,L=M,A=ie}if(Q===b.length)return r(_,A),et&&zn(_,Q),B;if(A===null){for(;Q<b.length;Q++)A=p(_,b[Q],P),A!==null&&(v=o(A,v,Q),L===null?B=A:L.sibling=A,L=A);return et&&zn(_,Q),B}for(A=n(_,A);Q<b.length;Q++)ie=F(A,_,Q,b[Q],P),ie!==null&&(e&&ie.alternate!==null&&A.delete(ie.key===null?Q:ie.key),v=o(ie,v,Q),L===null?B=ie:L.sibling=ie,L=ie);return e&&A.forEach(function(oe){return t(_,oe)}),et&&zn(_,Q),B}function C(_,v,b,P){var B=fo(b);if(typeof B!="function")throw Error(ae(150));if(b=B.call(b),b==null)throw Error(ae(151));for(var L=B=null,A=v,Q=v=0,ie=null,M=b.next();A!==null&&!M.done;Q++,M=b.next()){A.index>Q?(ie=A,A=null):ie=A.sibling;var oe=y(_,A,M.value,P);if(oe===null){A===null&&(A=ie);break}e&&A&&oe.alternate===null&&t(_,A),v=o(oe,v,Q),L===null?B=oe:L.sibling=oe,L=oe,A=ie}if(M.done)return r(_,A),et&&zn(_,Q),B;if(A===null){for(;!M.done;Q++,M=b.next())M=p(_,M.value,P),M!==null&&(v=o(M,v,Q),L===null?B=M:L.sibling=M,L=M);return et&&zn(_,Q),B}for(A=n(_,A);!M.done;Q++,M=b.next())M=F(A,_,Q,M.value,P),M!==null&&(e&&M.alternate!==null&&A.delete(M.key===null?Q:M.key),v=o(M,v,Q),L===null?B=M:L.sibling=M,L=M);return e&&A.forEach(function(ke){return t(_,ke)}),et&&zn(_,Q),B}function I(_,v,b,P){if(typeof b=="object"&&b!==null&&b.type===yi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case xs:e:{for(var B=b.key,L=v;L!==null;){if(L.key===B){if(B=b.type,B===yi){if(L.tag===7){r(_,L.sibling),v=i(L,b.props.children),v.return=_,_=v;break e}}else if(L.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===wn&&Af(B)===L.type){r(_,L.sibling),v=i(L,b.props),v.ref=yo(_,L,b),v.return=_,_=v;break e}r(_,L);break}else t(_,L);L=L.sibling}b.type===yi?(v=Xn(b.props.children,_.mode,P,b.key),v.return=_,_=v):(P=ia(b.type,b.key,b.props,null,_.mode,P),P.ref=yo(_,v,b),P.return=_,_=P)}return u(_);case mi:e:{for(L=b.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(_,v.sibling),v=i(v,b.children||[]),v.return=_,_=v;break e}else{r(_,v);break}else t(_,v);v=v.sibling}v=Zu(b,_.mode,P),v.return=_,_=v}return u(_);case wn:return L=b._init,I(_,v,L(b._payload),P)}if(ko(b))return E(_,v,b,P);if(fo(b))return C(_,v,b,P);Ds(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(_,v.sibling),v=i(v,b),v.return=_,_=v):(r(_,v),v=Xu(b,_.mode,P),v.return=_,_=v),u(_)):r(_,v)}return I}var Hi=hg(!0),pg=hg(!1),Ta=Un(null),Ca=null,Fi=null,Vc=null;function zc(){Vc=Fi=Ca=null}function Wc(e){var t=Ta.current;Ye(Ta),e._currentValue=t}function Kl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ni(e,t){Ca=e,Vc=Fi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zt=!0),e.firstContext=null)}function Sr(e){var t=e._currentValue;if(Vc!==e)if(e={context:e,memoizedValue:t,next:null},Fi===null){if(Ca===null)throw Error(ae(308));Fi=e,Ca.dependencies={lanes:0,firstContext:e}}else Fi=Fi.next=e;return t}var Jn=null;function qc(e){Jn===null?Jn=[e]:Jn.push(e)}function gg(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,qc(t)):(r.next=i.next,i.next=r),t.interleaved=r,fn(e,n)}function fn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Sn=!1;function Jc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function An(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Re&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,fn(e,r)}return i=n.interleaved,i===null?(t.next=t,qc(n)):(t.next=i.next,i.next=t),n.interleaved=t,fn(e,r)}function Xs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nc(e,r)}}function Rf(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=u:o=o.next=u,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Pa(e,t,r,n){var i=e.updateQueue;Sn=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var h=c,f=h.next;h.next=null,u===null?o=f:u.next=f,u=h;var g=e.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==u&&(c===null?g.firstBaseUpdate=f:c.next=f,g.lastBaseUpdate=h))}if(o!==null){var p=i.baseState;u=0,g=f=h=null,c=o;do{var y=c.lane,F=c.eventTime;if((n&y)===y){g!==null&&(g=g.next={eventTime:F,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=e,C=c;switch(y=t,F=r,C.tag){case 1:if(E=C.payload,typeof E=="function"){p=E.call(F,p,y);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=C.payload,y=typeof E=="function"?E.call(F,p,y):E,y==null)break e;p=ot({},p,y);break e;case 2:Sn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,y=i.effects,y===null?i.effects=[c]:y.push(c))}else F={eventTime:F,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(f=g=F,h=p):g=g.next=F,u|=y;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;y=c,c=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(g===null&&(h=p),i.baseState=h,i.firstBaseUpdate=f,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);ii|=u,e.lanes=u,e.memoizedState=p}}function If(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ae(191,i));i.call(n)}}}var hs={},Gr=Un(hs),ts=Un(hs),rs=Un(hs);function Gn(e){if(e===hs)throw Error(ae(174));return e}function Gc(e,t){switch(Ve(rs,t),Ve(ts,e),Ve(Gr,hs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bl(t,e)}Ye(Gr),Ve(Gr,t)}function $i(){Ye(Gr),Ye(ts),Ye(rs)}function yg(e){Gn(rs.current);var t=Gn(Gr.current),r=bl(t,e.type);t!==r&&(Ve(ts,e),Ve(Gr,r))}function Qc(e){ts.current===e&&(Ye(Gr),Ye(ts))}var nt=Un(0);function Aa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wu=[];function Yc(){for(var e=0;e<Wu.length;e++)Wu[e]._workInProgressVersionPrimary=null;Wu.length=0}var Zs=gn.ReactCurrentDispatcher,qu=gn.ReactCurrentBatchConfig,ni=0,it=null,Ft=null,Ct=null,Ra=!1,jo=!1,ns=0,Gv=0;function Ut(){throw Error(ae(321))}function Xc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Mr(e[r],t[r]))return!1;return!0}function Zc(e,t,r,n,i,o){if(ni=o,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zs.current=e===null||e.memoizedState===null?Zv:e1,e=r(n,i),jo){o=0;do{if(jo=!1,ns=0,25<=o)throw Error(ae(301));o+=1,Ct=Ft=null,t.updateQueue=null,Zs.current=t1,e=r(n,i)}while(jo)}if(Zs.current=Ia,t=Ft!==null&&Ft.next!==null,ni=0,Ct=Ft=it=null,Ra=!1,t)throw Error(ae(300));return e}function ed(){var e=ns!==0;return ns=0,e}function Vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function Er(){if(Ft===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var t=Ct===null?it.memoizedState:Ct.next;if(t!==null)Ct=t,Ft=e;else{if(e===null)throw Error(ae(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Ct===null?it.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function is(e,t){return typeof t=="function"?t(e):t}function Ju(e){var t=Er(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=Ft,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var c=u=null,h=null,f=o;do{var g=f.lane;if((ni&g)===g)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),n=f.hasEagerState?f.eagerState:e(n,f.action);else{var p={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=p,u=n):h=h.next=p,it.lanes|=g,ii|=g}f=f.next}while(f!==null&&f!==o);h===null?u=n:h.next=c,Mr(n,t.memoizedState)||(Zt=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=h,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,it.lanes|=o,ii|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Gu(e){var t=Er(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var u=i=i.next;do o=e(o,u.action),u=u.next;while(u!==i);Mr(o,t.memoizedState)||(Zt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function vg(){}function _g(e,t){var r=it,n=Er(),i=t(),o=!Mr(n.memoizedState,i);if(o&&(n.memoizedState=i,Zt=!0),n=n.queue,td(Eg.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Ct!==null&&Ct.memoizedState.tag&1){if(r.flags|=2048,os(9,Sg.bind(null,r,n,i,t),void 0,null),At===null)throw Error(ae(349));ni&30||wg(r,t,i)}return i}function wg(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Sg(e,t,r,n){t.value=r,t.getSnapshot=n,bg(t)&&xg(e)}function Eg(e,t,r){return r(function(){bg(t)&&xg(e)})}function bg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Mr(e,r)}catch{return!0}}function xg(e){var t=fn(e,1);t!==null&&jr(t,e,1,-1)}function Nf(e){var t=Vr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:e},t.queue=e,e=e.dispatch=Xv.bind(null,it,e),[t.memoizedState,e]}function os(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Fg(){return Er().memoizedState}function ea(e,t,r,n){var i=Vr();it.flags|=e,i.memoizedState=os(1|t,r,void 0,n===void 0?null:n)}function Xa(e,t,r,n){var i=Er();n=n===void 0?null:n;var o=void 0;if(Ft!==null){var u=Ft.memoizedState;if(o=u.destroy,n!==null&&Xc(n,u.deps)){i.memoizedState=os(t,r,o,n);return}}it.flags|=e,i.memoizedState=os(1|t,r,o,n)}function Lf(e,t){return ea(8390656,8,e,t)}function td(e,t){return Xa(2048,8,e,t)}function kg(e,t){return Xa(4,2,e,t)}function Tg(e,t){return Xa(4,4,e,t)}function Cg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pg(e,t,r){return r=r!=null?r.concat([e]):null,Xa(4,4,Cg.bind(null,t,e),r)}function rd(){}function Ag(e,t){var r=Er();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Rg(e,t){var r=Er();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ig(e,t,r){return ni&21?(Mr(r,t)||(r=jp(),it.lanes|=r,ii|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zt=!0),e.memoizedState=r)}function Qv(e,t){var r=Le;Le=r!==0&&4>r?r:4,e(!0);var n=qu.transition;qu.transition={};try{e(!1),t()}finally{Le=r,qu.transition=n}}function Ng(){return Er().memoizedState}function Yv(e,t,r){var n=In(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Lg(e))Dg(t,r);else if(r=gg(e,t,r,n),r!==null){var i=Wt();jr(r,e,n,i),Og(r,t,n)}}function Xv(e,t,r){var n=In(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lg(e))Dg(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,c=o(u,r);if(i.hasEagerState=!0,i.eagerState=c,Mr(c,u)){var h=t.interleaved;h===null?(i.next=i,qc(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}r=gg(e,t,i,n),r!==null&&(i=Wt(),jr(r,e,n,i),Og(r,t,n))}}function Lg(e){var t=e.alternate;return e===it||t!==null&&t===it}function Dg(e,t){jo=Ra=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Og(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nc(e,r)}}var Ia={readContext:Sr,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},Zv={readContext:Sr,useCallback:function(e,t){return Vr().memoizedState=[e,t===void 0?null:t],e},useContext:Sr,useEffect:Lf,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ea(4194308,4,Cg.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ea(4194308,4,e,t)},useInsertionEffect:function(e,t){return ea(4,2,e,t)},useMemo:function(e,t){var r=Vr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Vr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Yv.bind(null,it,e),[n.memoizedState,e]},useRef:function(e){var t=Vr();return e={current:e},t.memoizedState=e},useState:Nf,useDebugValue:rd,useDeferredValue:function(e){return Vr().memoizedState=e},useTransition:function(){var e=Nf(!1),t=e[0];return e=Qv.bind(null,e[1]),Vr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=it,i=Vr();if(et){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=t(),At===null)throw Error(ae(349));ni&30||wg(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,Lf(Eg.bind(null,n,o,e),[e]),n.flags|=2048,os(9,Sg.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Vr(),t=At.identifierPrefix;if(et){var r=an,n=sn;r=(n&~(1<<32-Or(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ns++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Gv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},e1={readContext:Sr,useCallback:Ag,useContext:Sr,useEffect:td,useImperativeHandle:Pg,useInsertionEffect:kg,useLayoutEffect:Tg,useMemo:Rg,useReducer:Ju,useRef:Fg,useState:function(){return Ju(is)},useDebugValue:rd,useDeferredValue:function(e){var t=Er();return Ig(t,Ft.memoizedState,e)},useTransition:function(){var e=Ju(is)[0],t=Er().memoizedState;return[e,t]},useMutableSource:vg,useSyncExternalStore:_g,useId:Ng,unstable_isNewReconciler:!1},t1={readContext:Sr,useCallback:Ag,useContext:Sr,useEffect:td,useImperativeHandle:Pg,useInsertionEffect:kg,useLayoutEffect:Tg,useMemo:Rg,useReducer:Gu,useRef:Fg,useState:function(){return Gu(is)},useDebugValue:rd,useDeferredValue:function(e){var t=Er();return Ft===null?t.memoizedState=e:Ig(t,Ft.memoizedState,e)},useTransition:function(){var e=Gu(is)[0],t=Er().memoizedState;return[e,t]},useMutableSource:vg,useSyncExternalStore:_g,useId:Ng,unstable_isNewReconciler:!1};function Pr(e,t){if(e&&e.defaultProps){t=ot({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Vl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ot({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Za={isMounted:function(e){return(e=e._reactInternals)?ai(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Wt(),i=In(e),o=un(n,i);o.payload=t,r!=null&&(o.callback=r),t=An(e,o,i),t!==null&&(jr(t,e,i,n),Xs(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Wt(),i=In(e),o=un(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=An(e,o,i),t!==null&&(jr(t,e,i,n),Xs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Wt(),n=In(e),i=un(r,n);i.tag=2,t!=null&&(i.callback=t),t=An(e,i,n),t!==null&&(jr(t,e,n,r),Xs(t,e,n))}};function Df(e,t,r,n,i,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,u):t.prototype&&t.prototype.isPureReactComponent?!Yo(r,n)||!Yo(i,o):!0}function jg(e,t,r){var n=!1,i=Dn,o=t.contextType;return typeof o=="object"&&o!==null?o=Sr(o):(i=rr(t)?ti:$t.current,n=t.contextTypes,o=(n=n!=null)?Mi(e,i):Dn),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Za,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Of(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Za.enqueueReplaceState(t,t.state,null)}function zl(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Jc(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Sr(o):(o=rr(t)?ti:$t.current,i.context=Mi(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Vl(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Za.enqueueReplaceState(i,i.state,null),Pa(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ki(e,t){try{var r="",n=t;do r+=Py(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function Qu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var r1=typeof WeakMap=="function"?WeakMap:Map;function Ug(e,t,r){r=un(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){La||(La=!0,rc=n),Wl(e,t)},r}function Mg(e,t,r){r=un(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Wl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Wl(e,t),typeof n!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function jf(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new r1;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=m1.bind(null,e,t,r),t.then(e,e))}function Uf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mf(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=un(-1,1),t.tag=2,An(r,t,1))),r.lanes|=1),e)}var n1=gn.ReactCurrentOwner,Zt=!1;function zt(e,t,r,n){t.child=e===null?pg(t,null,r,n):Hi(t,e.child,r,n)}function Bf(e,t,r,n,i){r=r.render;var o=t.ref;return Ni(t,i),n=Zc(e,t,r,n,o,i),r=ed(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hn(e,t,i)):(et&&r&&Hc(t),t.flags|=1,zt(e,t,n,i),t.child)}function Hf(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!cd(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Bg(e,t,o,n,i)):(e=ia(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var u=o.memoizedProps;if(r=r.compare,r=r!==null?r:Yo,r(u,n)&&e.ref===t.ref)return hn(e,t,i)}return t.flags|=1,e=Nn(o,n),e.ref=t.ref,e.return=t,t.child=e}function Bg(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(Yo(o,n)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,hn(e,t,i)}return ql(e,t,r,n,i)}function Hg(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ti,or),or|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(Ti,or),or|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ve(Ti,or),or|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Ve(Ti,or),or|=n;return zt(e,t,i,r),t.child}function $g(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ql(e,t,r,n,i){var o=rr(r)?ti:$t.current;return o=Mi(t,o),Ni(t,i),r=Zc(e,t,r,n,o,i),n=ed(),e!==null&&!Zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hn(e,t,i)):(et&&n&&Hc(t),t.flags|=1,zt(e,t,r,i),t.child)}function $f(e,t,r,n,i){if(rr(r)){var o=!0;xa(t)}else o=!1;if(Ni(t,i),t.stateNode===null)ta(e,t),jg(t,r,n),zl(t,r,n,i),n=!0;else if(e===null){var u=t.stateNode,c=t.memoizedProps;u.props=c;var h=u.context,f=r.contextType;typeof f=="object"&&f!==null?f=Sr(f):(f=rr(r)?ti:$t.current,f=Mi(t,f));var g=r.getDerivedStateFromProps,p=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function";p||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==n||h!==f)&&Of(t,u,n,f),Sn=!1;var y=t.memoizedState;u.state=y,Pa(t,n,u,i),h=t.memoizedState,c!==n||y!==h||tr.current||Sn?(typeof g=="function"&&(Vl(t,r,g,n),h=t.memoizedState),(c=Sn||Df(t,r,c,n,y,h,f))?(p||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=h),u.props=n,u.state=h,u.context=f,n=c):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,mg(e,t),c=t.memoizedProps,f=t.type===t.elementType?c:Pr(t.type,c),u.props=f,p=t.pendingProps,y=u.context,h=r.contextType,typeof h=="object"&&h!==null?h=Sr(h):(h=rr(r)?ti:$t.current,h=Mi(t,h));var F=r.getDerivedStateFromProps;(g=typeof F=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==p||y!==h)&&Of(t,u,n,h),Sn=!1,y=t.memoizedState,u.state=y,Pa(t,n,u,i);var E=t.memoizedState;c!==p||y!==E||tr.current||Sn?(typeof F=="function"&&(Vl(t,r,F,n),E=t.memoizedState),(f=Sn||Df(t,r,f,n,y,E,h)||!1)?(g||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,E,h),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,E,h)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=E),u.props=n,u.state=E,u.context=h,n=f):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),n=!1)}return Jl(e,t,r,n,o,i)}function Jl(e,t,r,n,i,o){$g(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return i&&Tf(t,r,!1),hn(e,t,o);n=t.stateNode,n1.current=t;var c=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=Hi(t,e.child,null,o),t.child=Hi(t,null,c,o)):zt(e,t,c,o),t.memoizedState=n.state,i&&Tf(t,r,!0),t.child}function Kg(e){var t=e.stateNode;t.pendingContext?kf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kf(e,t.context,!1),Gc(e,t.containerInfo)}function Kf(e,t,r,n,i){return Bi(),Kc(i),t.flags|=256,zt(e,t,r,n),t.child}var Gl={dehydrated:null,treeContext:null,retryLane:0};function Ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vg(e,t,r){var n=t.pendingProps,i=nt.current,o=!1,u=(t.flags&128)!==0,c;if((c=u)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ve(nt,i&1),e===null)return $l(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=n.children,e=n.fallback,o?(n=t.mode,o=t.child,u={mode:"hidden",children:u},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=ru(u,n,0,null),e=Xn(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ql(r),t.memoizedState=Gl,e):nd(t,u));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return i1(e,t,u,n,c,i,r);if(o){o=n.fallback,u=t.mode,i=e.child,c=i.sibling;var h={mode:"hidden",children:n.children};return!(u&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=h,t.deletions=null):(n=Nn(i,h),n.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=Nn(c,o):(o=Xn(o,u,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,u=e.child.memoizedState,u=u===null?Ql(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~r,t.memoizedState=Gl,n}return o=e.child,e=o.sibling,n=Nn(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function nd(e,t){return t=ru({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Os(e,t,r,n){return n!==null&&Kc(n),Hi(t,e.child,null,r),e=nd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function i1(e,t,r,n,i,o,u){if(r)return t.flags&256?(t.flags&=-257,n=Qu(Error(ae(422))),Os(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=ru({mode:"visible",children:n.children},i,0,null),o=Xn(o,i,u,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Hi(t,e.child,null,u),t.child.memoizedState=Ql(u),t.memoizedState=Gl,o);if(!(t.mode&1))return Os(e,t,u,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var c=n.dgst;return n=c,o=Error(ae(419)),n=Qu(o,n,void 0),Os(e,t,u,n)}if(c=(u&e.childLanes)!==0,Zt||c){if(n=At,n!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,fn(e,i),jr(n,e,i,-1))}return ld(),n=Qu(Error(ae(421))),Os(e,t,u,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=y1.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,sr=Pn(i.nextSibling),ur=t,et=!0,Ir=null,e!==null&&(yr[vr++]=sn,yr[vr++]=an,yr[vr++]=ri,sn=e.id,an=e.overflow,ri=t),t=nd(t,n.children),t.flags|=4096,t)}function Vf(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Kl(e.return,t,r)}function Yu(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function zg(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(zt(e,t,n.children,r),n=nt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vf(e,r,t);else if(e.tag===19)Vf(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ve(nt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Aa(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Yu(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Aa(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Yu(t,!0,r,null,o);break;case"together":Yu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ta(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ii|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,r=Nn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Nn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function o1(e,t,r){switch(t.tag){case 3:Kg(t),Bi();break;case 5:yg(t);break;case 1:rr(t.type)&&xa(t);break;case 4:Gc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ve(Ta,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ve(nt,nt.current&1),t.flags|=128,null):r&t.child.childLanes?Vg(e,t,r):(Ve(nt,nt.current&1),e=hn(e,t,r),e!==null?e.sibling:null);Ve(nt,nt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return zg(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(nt,nt.current),n)break;return null;case 22:case 23:return t.lanes=0,Hg(e,t,r)}return hn(e,t,r)}var Wg,Yl,qg,Jg;Wg=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yl=function(){};qg=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Gn(Gr.current);var o=null;switch(r){case"input":i=_l(e,i),n=_l(e,n),o=[];break;case"select":i=ot({},i,{value:void 0}),n=ot({},n,{value:void 0}),o=[];break;case"textarea":i=El(e,i),n=El(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ea)}xl(r,n);var u;r=null;for(f in i)if(!n.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var c=i[f];for(u in c)c.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Vo.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in n){var h=n[f];if(c=i!=null?i[f]:void 0,n.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(u in c)!c.hasOwnProperty(u)||h&&h.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in h)h.hasOwnProperty(u)&&c[u]!==h[u]&&(r||(r={}),r[u]=h[u])}else r||(o||(o=[]),o.push(f,r)),r=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Vo.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Je("scroll",e),o||c===h||(o=[])):(o=o||[]).push(f,h))}r&&(o=o||[]).push("style",r);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};Jg=function(e,t,r,n){r!==n&&(t.flags|=4)};function vo(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function s1(e,t,r){var n=t.pendingProps;switch($c(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return rr(t.type)&&ba(),Mt(t),null;case 3:return n=t.stateNode,$i(),Ye(tr),Ye($t),Yc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ls(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ir!==null&&(oc(Ir),Ir=null))),Yl(e,t),Mt(t),null;case 5:Qc(t);var i=Gn(rs.current);if(r=t.type,e!==null&&t.stateNode!=null)qg(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ae(166));return Mt(t),null}if(e=Gn(Gr.current),Ls(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Wr]=t,n[es]=o,e=(t.mode&1)!==0,r){case"dialog":Je("cancel",n),Je("close",n);break;case"iframe":case"object":case"embed":Je("load",n);break;case"video":case"audio":for(i=0;i<Co.length;i++)Je(Co[i],n);break;case"source":Je("error",n);break;case"img":case"image":case"link":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"input":Xd(n,o),Je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Je("invalid",n);break;case"textarea":ef(n,o),Je("invalid",n)}xl(r,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var c=o[u];u==="children"?typeof c=="string"?n.textContent!==c&&(o.suppressHydrationWarning!==!0&&Ns(n.textContent,c,e),i=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Ns(n.textContent,c,e),i=["children",""+c]):Vo.hasOwnProperty(u)&&c!=null&&u==="onScroll"&&Je("scroll",n)}switch(r){case"input":Fs(n),Zd(n,o,!0);break;case"textarea":Fs(n),tf(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Ea)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ep(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[Wr]=t,e[es]=n,Wg(e,t,!1,!1),t.stateNode=e;e:{switch(u=Fl(r,n),r){case"dialog":Je("cancel",e),Je("close",e),i=n;break;case"iframe":case"object":case"embed":Je("load",e),i=n;break;case"video":case"audio":for(i=0;i<Co.length;i++)Je(Co[i],e);i=n;break;case"source":Je("error",e),i=n;break;case"img":case"image":case"link":Je("error",e),Je("load",e),i=n;break;case"details":Je("toggle",e),i=n;break;case"input":Xd(e,n),i=_l(e,n),Je("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ot({},n,{value:void 0}),Je("invalid",e);break;case"textarea":ef(e,n),i=El(e,n),Je("invalid",e);break;default:i=n}xl(r,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?Fp(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&bp(e,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&zo(e,h):typeof h=="number"&&zo(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vo.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Je("scroll",e):h!=null&&Tc(e,o,h,u))}switch(r){case"input":Fs(e),Zd(e,n,!1);break;case"textarea":Fs(e),tf(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ln(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Pi(e,!!n.multiple,o,!1):n.defaultValue!=null&&Pi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ea)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mt(t),null;case 6:if(e&&t.stateNode!=null)Jg(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ae(166));if(r=Gn(rs.current),Gn(Gr.current),Ls(t)){if(n=t.stateNode,r=t.memoizedProps,n[Wr]=t,(o=n.nodeValue!==r)&&(e=ur,e!==null))switch(e.tag){case 3:Ns(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ns(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wr]=t,t.stateNode=n}return Mt(t),null;case 13:if(Ye(nt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&sr!==null&&t.mode&1&&!(t.flags&128))fg(),Bi(),t.flags|=98560,o=!1;else if(o=Ls(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(ae(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ae(317));o[Wr]=t}else Bi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mt(t),o=!1}else Ir!==null&&(oc(Ir),Ir=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||nt.current&1?Tt===0&&(Tt=3):ld())),t.updateQueue!==null&&(t.flags|=4),Mt(t),null);case 4:return $i(),Yl(e,t),e===null&&Xo(t.stateNode.containerInfo),Mt(t),null;case 10:return Wc(t.type._context),Mt(t),null;case 17:return rr(t.type)&&ba(),Mt(t),null;case 19:if(Ye(nt),o=t.memoizedState,o===null)return Mt(t),null;if(n=(t.flags&128)!==0,u=o.rendering,u===null)if(n)vo(o,!1);else{if(Tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Aa(e),u!==null){for(t.flags|=128,vo(o,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ve(nt,nt.current&1|2),t.child}e=e.sibling}o.tail!==null&&gt()>Vi&&(t.flags|=128,n=!0,vo(o,!1),t.lanes=4194304)}else{if(!n)if(e=Aa(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!et)return Mt(t),null}else 2*gt()-o.renderingStartTime>Vi&&r!==1073741824&&(t.flags|=128,n=!0,vo(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(r=o.last,r!==null?r.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=gt(),t.sibling=null,r=nt.current,Ve(nt,n?r&1|2:r&1),t):(Mt(t),null);case 22:case 23:return ud(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?or&1073741824&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function a1(e,t){switch($c(t),t.tag){case 1:return rr(t.type)&&ba(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $i(),Ye(tr),Ye($t),Yc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qc(t),null;case 13:if(Ye(nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Bi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ye(nt),null;case 4:return $i(),null;case 10:return Wc(t.type._context),null;case 22:case 23:return ud(),null;case 24:return null;default:return null}}var js=!1,Bt=!1,u1=typeof WeakSet=="function"?WeakSet:Set,me=null;function ki(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ct(e,t,n)}else r.current=null}function Xl(e,t,r){try{r()}catch(n){ct(e,t,n)}}var zf=!1;function l1(e,t){if(Dl=_a,e=Zp(),Bc(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var u=0,c=-1,h=-1,f=0,g=0,p=e,y=null;t:for(;;){for(var F;p!==r||i!==0&&p.nodeType!==3||(c=u+i),p!==o||n!==0&&p.nodeType!==3||(h=u+n),p.nodeType===3&&(u+=p.nodeValue.length),(F=p.firstChild)!==null;)y=p,p=F;for(;;){if(p===e)break t;if(y===r&&++f===i&&(c=u),y===o&&++g===n&&(h=u),(F=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=F}r=c===-1||h===-1?null:{start:c,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ol={focusedElem:e,selectionRange:r},_a=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var C=E.memoizedProps,I=E.memoizedState,_=t.stateNode,v=_.getSnapshotBeforeUpdate(t.elementType===t.type?C:Pr(t.type,C),I);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(P){ct(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return E=zf,zf=!1,E}function Uo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Xl(t,r,o)}i=i.next}while(i!==n)}}function eu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Zl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Gg(e){var t=e.alternate;t!==null&&(e.alternate=null,Gg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wr],delete t[es],delete t[Ml],delete t[zv],delete t[Wv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qg(e){return e.tag===5||e.tag===3||e.tag===4}function Wf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ec(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ea));else if(n!==4&&(e=e.child,e!==null))for(ec(e,t,r),e=e.sibling;e!==null;)ec(e,t,r),e=e.sibling}function tc(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(tc(e,t,r),e=e.sibling;e!==null;)tc(e,t,r),e=e.sibling}var Nt=null,Rr=!1;function yn(e,t,r){for(r=r.child;r!==null;)Yg(e,t,r),r=r.sibling}function Yg(e,t,r){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount(Wa,r)}catch{}switch(r.tag){case 5:Bt||ki(r,t);case 6:var n=Nt,i=Rr;Nt=null,yn(e,t,r),Nt=n,Rr=i,Nt!==null&&(Rr?(e=Nt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Nt.removeChild(r.stateNode));break;case 18:Nt!==null&&(Rr?(e=Nt,r=r.stateNode,e.nodeType===8?Vu(e.parentNode,r):e.nodeType===1&&Vu(e,r),Go(e)):Vu(Nt,r.stateNode));break;case 4:n=Nt,i=Rr,Nt=r.stateNode.containerInfo,Rr=!0,yn(e,t,r),Nt=n,Rr=i;break;case 0:case 11:case 14:case 15:if(!Bt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&Xl(r,t,u),i=i.next}while(i!==n)}yn(e,t,r);break;case 1:if(!Bt&&(ki(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){ct(r,t,c)}yn(e,t,r);break;case 21:yn(e,t,r);break;case 22:r.mode&1?(Bt=(n=Bt)||r.memoizedState!==null,yn(e,t,r),Bt=n):yn(e,t,r);break;default:yn(e,t,r)}}function qf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new u1),t.forEach(function(n){var i=v1.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Cr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,u=t,c=u;e:for(;c!==null;){switch(c.tag){case 5:Nt=c.stateNode,Rr=!1;break e;case 3:Nt=c.stateNode.containerInfo,Rr=!0;break e;case 4:Nt=c.stateNode.containerInfo,Rr=!0;break e}c=c.return}if(Nt===null)throw Error(ae(160));Yg(o,u,i),Nt=null,Rr=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(f){ct(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xg(t,e),t=t.sibling}function Xg(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cr(t,e),$r(e),n&4){try{Uo(3,e,e.return),eu(3,e)}catch(C){ct(e,e.return,C)}try{Uo(5,e,e.return)}catch(C){ct(e,e.return,C)}}break;case 1:Cr(t,e),$r(e),n&512&&r!==null&&ki(r,r.return);break;case 5:if(Cr(t,e),$r(e),n&512&&r!==null&&ki(r,r.return),e.flags&32){var i=e.stateNode;try{zo(i,"")}catch(C){ct(e,e.return,C)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,u=r!==null?r.memoizedProps:o,c=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&wp(i,o),Fl(c,u);var f=Fl(c,o);for(u=0;u<h.length;u+=2){var g=h[u],p=h[u+1];g==="style"?Fp(i,p):g==="dangerouslySetInnerHTML"?bp(i,p):g==="children"?zo(i,p):Tc(i,g,p,f)}switch(c){case"input":wl(i,o);break;case"textarea":Sp(i,o);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var F=o.value;F!=null?Pi(i,!!o.multiple,F,!1):y!==!!o.multiple&&(o.defaultValue!=null?Pi(i,!!o.multiple,o.defaultValue,!0):Pi(i,!!o.multiple,o.multiple?[]:"",!1))}i[es]=o}catch(C){ct(e,e.return,C)}}break;case 6:if(Cr(t,e),$r(e),n&4){if(e.stateNode===null)throw Error(ae(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(C){ct(e,e.return,C)}}break;case 3:if(Cr(t,e),$r(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Go(t.containerInfo)}catch(C){ct(e,e.return,C)}break;case 4:Cr(t,e),$r(e);break;case 13:Cr(t,e),$r(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(sd=gt())),n&4&&qf(e);break;case 22:if(g=r!==null&&r.memoizedState!==null,e.mode&1?(Bt=(f=Bt)||g,Cr(t,e),Bt=f):Cr(t,e),$r(e),n&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!g&&e.mode&1)for(me=e,g=e.child;g!==null;){for(p=me=g;me!==null;){switch(y=me,F=y.child,y.tag){case 0:case 11:case 14:case 15:Uo(4,y,y.return);break;case 1:ki(y,y.return);var E=y.stateNode;if(typeof E.componentWillUnmount=="function"){n=y,r=y.return;try{t=n,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(C){ct(n,r,C)}}break;case 5:ki(y,y.return);break;case 22:if(y.memoizedState!==null){Gf(p);continue}}F!==null?(F.return=y,me=F):Gf(p)}g=g.sibling}e:for(g=null,p=e;;){if(p.tag===5){if(g===null){g=p;try{i=p.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=p.stateNode,h=p.memoizedProps.style,u=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=xp("display",u))}catch(C){ct(e,e.return,C)}}}else if(p.tag===6){if(g===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(C){ct(e,e.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;g===p&&(g=null),p=p.return}g===p&&(g=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Cr(t,e),$r(e),n&4&&qf(e);break;case 21:break;default:Cr(t,e),$r(e)}}function $r(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Qg(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(zo(i,""),n.flags&=-33);var o=Wf(e);tc(e,o,i);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Wf(e);ec(e,c,u);break;default:throw Error(ae(161))}}catch(h){ct(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c1(e,t,r){me=e,Zg(e)}function Zg(e,t,r){for(var n=(e.mode&1)!==0;me!==null;){var i=me,o=i.child;if(i.tag===22&&n){var u=i.memoizedState!==null||js;if(!u){var c=i.alternate,h=c!==null&&c.memoizedState!==null||Bt;c=js;var f=Bt;if(js=u,(Bt=h)&&!f)for(me=i;me!==null;)u=me,h=u.child,u.tag===22&&u.memoizedState!==null?Qf(i):h!==null?(h.return=u,me=h):Qf(i);for(;o!==null;)me=o,Zg(o),o=o.sibling;me=i,js=c,Bt=f}Jf(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,me=o):Jf(e)}}function Jf(e){for(;me!==null;){var t=me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bt||eu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Bt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Pr(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&If(t,o,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}If(t,u,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var p=g.dehydrated;p!==null&&Go(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Bt||t.flags&512&&Zl(t)}catch(y){ct(t,t.return,y)}}if(t===e){me=null;break}if(r=t.sibling,r!==null){r.return=t.return,me=r;break}me=t.return}}function Gf(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,me=r;break}me=t.return}}function Qf(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{eu(4,t)}catch(h){ct(t,r,h)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(h){ct(t,i,h)}}var o=t.return;try{Zl(t)}catch(h){ct(t,o,h)}break;case 5:var u=t.return;try{Zl(t)}catch(h){ct(t,u,h)}}}catch(h){ct(t,t.return,h)}if(t===e){me=null;break}var c=t.sibling;if(c!==null){c.return=t.return,me=c;break}me=t.return}}var d1=Math.ceil,Na=gn.ReactCurrentDispatcher,id=gn.ReactCurrentOwner,wr=gn.ReactCurrentBatchConfig,Re=0,At=null,_t=null,Lt=0,or=0,Ti=Un(0),Tt=0,ss=null,ii=0,tu=0,od=0,Mo=null,Xt=null,sd=0,Vi=1/0,tn=null,La=!1,rc=null,Rn=null,Us=!1,Fn=null,Da=0,Bo=0,nc=null,ra=-1,na=0;function Wt(){return Re&6?gt():ra!==-1?ra:ra=gt()}function In(e){return e.mode&1?Re&2&&Lt!==0?Lt&-Lt:Jv.transition!==null?(na===0&&(na=jp()),na):(e=Le,e!==0||(e=window.event,e=e===void 0?16:Vp(e.type)),e):1}function jr(e,t,r,n){if(50<Bo)throw Bo=0,nc=null,Error(ae(185));cs(e,r,n),(!(Re&2)||e!==At)&&(e===At&&(!(Re&2)&&(tu|=r),Tt===4&&bn(e,Lt)),nr(e,n),r===1&&Re===0&&!(t.mode&1)&&(Vi=gt()+500,Ya&&Mn()))}function nr(e,t){var r=e.callbackNode;Jy(e,t);var n=va(e,e===At?Lt:0);if(n===0)r!==null&&of(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&of(r),t===1)e.tag===0?qv(Yf.bind(null,e)):lg(Yf.bind(null,e)),Kv(function(){!(Re&6)&&Mn()}),r=null;else{switch(Up(n)){case 1:r=Ic;break;case 4:r=Dp;break;case 16:r=ya;break;case 536870912:r=Op;break;default:r=ya}r=a0(r,e0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function e0(e,t){if(ra=-1,na=0,Re&6)throw Error(ae(327));var r=e.callbackNode;if(Li()&&e.callbackNode!==r)return null;var n=va(e,e===At?Lt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Oa(e,n);else{t=n;var i=Re;Re|=2;var o=r0();(At!==e||Lt!==t)&&(tn=null,Vi=gt()+500,Yn(e,t));do try{p1();break}catch(c){t0(e,c)}while(!0);zc(),Na.current=o,Re=i,_t!==null?t=0:(At=null,Lt=0,t=Tt)}if(t!==0){if(t===2&&(i=Al(e),i!==0&&(n=i,t=ic(e,i))),t===1)throw r=ss,Yn(e,0),bn(e,n),nr(e,gt()),r;if(t===6)bn(e,n);else{if(i=e.current.alternate,!(n&30)&&!f1(i)&&(t=Oa(e,n),t===2&&(o=Al(e),o!==0&&(n=o,t=ic(e,o))),t===1))throw r=ss,Yn(e,0),bn(e,n),nr(e,gt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ae(345));case 2:Wn(e,Xt,tn);break;case 3:if(bn(e,n),(n&130023424)===n&&(t=sd+500-gt(),10<t)){if(va(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Wt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ul(Wn.bind(null,e,Xt,tn),t);break}Wn(e,Xt,tn);break;case 4:if(bn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var u=31-Or(n);o=1<<u,u=t[u],u>i&&(i=u),n&=~o}if(n=i,n=gt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*d1(n/1960))-n,10<n){e.timeoutHandle=Ul(Wn.bind(null,e,Xt,tn),n);break}Wn(e,Xt,tn);break;case 5:Wn(e,Xt,tn);break;default:throw Error(ae(329))}}}return nr(e,gt()),e.callbackNode===r?e0.bind(null,e):null}function ic(e,t){var r=Mo;return e.current.memoizedState.isDehydrated&&(Yn(e,t).flags|=256),e=Oa(e,t),e!==2&&(t=Xt,Xt=r,t!==null&&oc(t)),e}function oc(e){Xt===null?Xt=e:Xt.push.apply(Xt,e)}function f1(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Mr(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(e,t){for(t&=~od,t&=~tu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Or(t),n=1<<r;e[r]=-1,t&=~n}}function Yf(e){if(Re&6)throw Error(ae(327));Li();var t=va(e,0);if(!(t&1))return nr(e,gt()),null;var r=Oa(e,t);if(e.tag!==0&&r===2){var n=Al(e);n!==0&&(t=n,r=ic(e,n))}if(r===1)throw r=ss,Yn(e,0),bn(e,t),nr(e,gt()),r;if(r===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wn(e,Xt,tn),nr(e,gt()),null}function ad(e,t){var r=Re;Re|=1;try{return e(t)}finally{Re=r,Re===0&&(Vi=gt()+500,Ya&&Mn())}}function oi(e){Fn!==null&&Fn.tag===0&&!(Re&6)&&Li();var t=Re;Re|=1;var r=wr.transition,n=Le;try{if(wr.transition=null,Le=1,e)return e()}finally{Le=n,wr.transition=r,Re=t,!(Re&6)&&Mn()}}function ud(){or=Ti.current,Ye(Ti)}function Yn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$v(r)),_t!==null)for(r=_t.return;r!==null;){var n=r;switch($c(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ba();break;case 3:$i(),Ye(tr),Ye($t),Yc();break;case 5:Qc(n);break;case 4:$i();break;case 13:Ye(nt);break;case 19:Ye(nt);break;case 10:Wc(n.type._context);break;case 22:case 23:ud()}r=r.return}if(At=e,_t=e=Nn(e.current,null),Lt=or=t,Tt=0,ss=null,od=tu=ii=0,Xt=Mo=null,Jn!==null){for(t=0;t<Jn.length;t++)if(r=Jn[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var u=o.next;o.next=i,n.next=u}r.pending=n}Jn=null}return e}function t0(e,t){do{var r=_t;try{if(zc(),Zs.current=Ia,Ra){for(var n=it.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ra=!1}if(ni=0,Ct=Ft=it=null,jo=!1,ns=0,id.current=null,r===null||r.return===null){Tt=1,ss=t,_t=null;break}e:{var o=e,u=r.return,c=r,h=t;if(t=Lt,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,g=c,p=g.tag;if(!(g.mode&1)&&(p===0||p===11||p===15)){var y=g.alternate;y?(g.updateQueue=y.updateQueue,g.memoizedState=y.memoizedState,g.lanes=y.lanes):(g.updateQueue=null,g.memoizedState=null)}var F=Uf(u);if(F!==null){F.flags&=-257,Mf(F,u,c,o,t),F.mode&1&&jf(o,f,t),t=F,h=f;var E=t.updateQueue;if(E===null){var C=new Set;C.add(h),t.updateQueue=C}else E.add(h);break e}else{if(!(t&1)){jf(o,f,t),ld();break e}h=Error(ae(426))}}else if(et&&c.mode&1){var I=Uf(u);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Mf(I,u,c,o,t),Kc(Ki(h,c));break e}}o=h=Ki(h,c),Tt!==4&&(Tt=2),Mo===null?Mo=[o]:Mo.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var _=Ug(o,h,t);Rf(o,_);break e;case 1:c=h;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Rn===null||!Rn.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var P=Mg(o,c,t);Rf(o,P);break e}}o=o.return}while(o!==null)}i0(r)}catch(B){t=B,_t===r&&r!==null&&(_t=r=r.return);continue}break}while(!0)}function r0(){var e=Na.current;return Na.current=Ia,e===null?Ia:e}function ld(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),At===null||!(ii&268435455)&&!(tu&268435455)||bn(At,Lt)}function Oa(e,t){var r=Re;Re|=2;var n=r0();(At!==e||Lt!==t)&&(tn=null,Yn(e,t));do try{h1();break}catch(i){t0(e,i)}while(!0);if(zc(),Re=r,Na.current=n,_t!==null)throw Error(ae(261));return At=null,Lt=0,Tt}function h1(){for(;_t!==null;)n0(_t)}function p1(){for(;_t!==null&&!My();)n0(_t)}function n0(e){var t=s0(e.alternate,e,or);e.memoizedProps=e.pendingProps,t===null?i0(e):_t=t,id.current=null}function i0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=a1(r,t),r!==null){r.flags&=32767,_t=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Tt=6,_t=null;return}}else if(r=s1(r,t,or),r!==null){_t=r;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);Tt===0&&(Tt=5)}function Wn(e,t,r){var n=Le,i=wr.transition;try{wr.transition=null,Le=1,g1(e,t,r,n)}finally{wr.transition=i,Le=n}return null}function g1(e,t,r,n){do Li();while(Fn!==null);if(Re&6)throw Error(ae(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Gy(e,o),e===At&&(_t=At=null,Lt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Us||(Us=!0,a0(ya,function(){return Li(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=wr.transition,wr.transition=null;var u=Le;Le=1;var c=Re;Re|=4,id.current=null,l1(e,r),Xg(r,e),Dv(Ol),_a=!!Dl,Ol=Dl=null,e.current=r,c1(r),By(),Re=c,Le=u,wr.transition=o}else e.current=r;if(Us&&(Us=!1,Fn=e,Da=i),o=e.pendingLanes,o===0&&(Rn=null),Ky(r.stateNode),nr(e,gt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(La)throw La=!1,e=rc,rc=null,e;return Da&1&&e.tag!==0&&Li(),o=e.pendingLanes,o&1?e===nc?Bo++:(Bo=0,nc=e):Bo=0,Mn(),null}function Li(){if(Fn!==null){var e=Up(Da),t=wr.transition,r=Le;try{if(wr.transition=null,Le=16>e?16:e,Fn===null)var n=!1;else{if(e=Fn,Fn=null,Da=0,Re&6)throw Error(ae(331));var i=Re;for(Re|=4,me=e.current;me!==null;){var o=me,u=o.child;if(me.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(me=f;me!==null;){var g=me;switch(g.tag){case 0:case 11:case 15:Uo(8,g,o)}var p=g.child;if(p!==null)p.return=g,me=p;else for(;me!==null;){g=me;var y=g.sibling,F=g.return;if(Gg(g),g===f){me=null;break}if(y!==null){y.return=F,me=y;break}me=F}}}var E=o.alternate;if(E!==null){var C=E.child;if(C!==null){E.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}me=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,me=u;else e:for(;me!==null;){if(o=me,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Uo(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,me=_;break e}me=o.return}}var v=e.current;for(me=v;me!==null;){u=me;var b=u.child;if(u.subtreeFlags&2064&&b!==null)b.return=u,me=b;else e:for(u=v;me!==null;){if(c=me,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:eu(9,c)}}catch(B){ct(c,c.return,B)}if(c===u){me=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,me=P;break e}me=c.return}}if(Re=i,Mn(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot(Wa,e)}catch{}n=!0}return n}finally{Le=r,wr.transition=t}}return!1}function Xf(e,t,r){t=Ki(r,t),t=Ug(e,t,1),e=An(e,t,1),t=Wt(),e!==null&&(cs(e,1,t),nr(e,t))}function ct(e,t,r){if(e.tag===3)Xf(e,e,r);else for(;t!==null;){if(t.tag===3){Xf(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rn===null||!Rn.has(n))){e=Ki(r,e),e=Mg(t,e,1),t=An(t,e,1),e=Wt(),t!==null&&(cs(t,1,e),nr(t,e));break}}t=t.return}}function m1(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Wt(),e.pingedLanes|=e.suspendedLanes&r,At===e&&(Lt&r)===r&&(Tt===4||Tt===3&&(Lt&130023424)===Lt&&500>gt()-sd?Yn(e,0):od|=r),nr(e,t)}function o0(e,t){t===0&&(e.mode&1?(t=Cs,Cs<<=1,!(Cs&130023424)&&(Cs=4194304)):t=1);var r=Wt();e=fn(e,t),e!==null&&(cs(e,t,r),nr(e,r))}function y1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),o0(e,r)}function v1(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(t),o0(e,r)}var s0;s0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||tr.current)Zt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Zt=!1,o1(e,t,r);Zt=!!(e.flags&131072)}else Zt=!1,et&&t.flags&1048576&&cg(t,ka,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ta(e,t),e=t.pendingProps;var i=Mi(t,$t.current);Ni(t,r),i=Zc(null,t,n,e,i,r);var o=ed();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rr(n)?(o=!0,xa(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jc(t),i.updater=Za,t.stateNode=i,i._reactInternals=t,zl(t,n,e,r),t=Jl(null,t,n,!0,o,r)):(t.tag=0,et&&o&&Hc(t),zt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ta(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=w1(n),e=Pr(n,e),i){case 0:t=ql(null,t,n,e,r);break e;case 1:t=$f(null,t,n,e,r);break e;case 11:t=Bf(null,t,n,e,r);break e;case 14:t=Hf(null,t,n,Pr(n.type,e),r);break e}throw Error(ae(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pr(n,i),ql(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pr(n,i),$f(e,t,n,i,r);case 3:e:{if(Kg(t),e===null)throw Error(ae(387));n=t.pendingProps,o=t.memoizedState,i=o.element,mg(e,t),Pa(t,n,null,r);var u=t.memoizedState;if(n=u.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Ki(Error(ae(423)),t),t=Kf(e,t,n,r,i);break e}else if(n!==i){i=Ki(Error(ae(424)),t),t=Kf(e,t,n,r,i);break e}else for(sr=Pn(t.stateNode.containerInfo.firstChild),ur=t,et=!0,Ir=null,r=pg(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bi(),n===i){t=hn(e,t,r);break e}zt(e,t,n,r)}t=t.child}return t;case 5:return yg(t),e===null&&$l(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,u=i.children,jl(n,i)?u=null:o!==null&&jl(n,o)&&(t.flags|=32),$g(e,t),zt(e,t,u,r),t.child;case 6:return e===null&&$l(t),null;case 13:return Vg(e,t,r);case 4:return Gc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Hi(t,null,n,r):zt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pr(n,i),Bf(e,t,n,i,r);case 7:return zt(e,t,t.pendingProps,r),t.child;case 8:return zt(e,t,t.pendingProps.children,r),t.child;case 12:return zt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ve(Ta,n._currentValue),n._currentValue=u,o!==null)if(Mr(o.value,u)){if(o.children===i.children&&!tr.current){t=hn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){u=o.child;for(var h=c.firstContext;h!==null;){if(h.context===n){if(o.tag===1){h=un(-1,r&-r),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Kl(o.return,r,t),c.lanes|=r;break}h=h.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(ae(341));u.lanes|=r,c=u.alternate,c!==null&&(c.lanes|=r),Kl(u,r,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}zt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ni(t,r),i=Sr(i),n=n(i),t.flags|=1,zt(e,t,n,r),t.child;case 14:return n=t.type,i=Pr(n,t.pendingProps),i=Pr(n.type,i),Hf(e,t,n,i,r);case 15:return Bg(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pr(n,i),ta(e,t),t.tag=1,rr(n)?(e=!0,xa(t)):e=!1,Ni(t,r),jg(t,n,i),zl(t,n,i,r),Jl(null,t,n,!0,e,r);case 19:return zg(e,t,r);case 22:return Hg(e,t,r)}throw Error(ae(156,t.tag))};function a0(e,t){return Lp(e,t)}function _1(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(e,t,r,n){return new _1(e,t,r,n)}function cd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function w1(e){if(typeof e=="function")return cd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pc)return 11;if(e===Ac)return 14}return 2}function Nn(e,t){var r=e.alternate;return r===null?(r=_r(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ia(e,t,r,n,i,o){var u=2;if(n=e,typeof e=="function")cd(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case yi:return Xn(r.children,i,o,t);case Cc:u=8,i|=8;break;case gl:return e=_r(12,r,t,i|2),e.elementType=gl,e.lanes=o,e;case ml:return e=_r(13,r,t,i),e.elementType=ml,e.lanes=o,e;case yl:return e=_r(19,r,t,i),e.elementType=yl,e.lanes=o,e;case yp:return ru(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gp:u=10;break e;case mp:u=9;break e;case Pc:u=11;break e;case Ac:u=14;break e;case wn:u=16,n=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=_r(u,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Xn(e,t,r,n){return e=_r(7,e,n,t),e.lanes=r,e}function ru(e,t,r,n){return e=_r(22,e,n,t),e.elementType=yp,e.lanes=r,e.stateNode={isHidden:!1},e}function Xu(e,t,r){return e=_r(6,e,null,t),e.lanes=r,e}function Zu(e,t,r){return t=_r(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S1(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nu(0),this.expirationTimes=Nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nu(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dd(e,t,r,n,i,o,u,c,h){return e=new S1(e,t,r,c,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=_r(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jc(o),e}function E1(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function u0(e){if(!e)return Dn;e=e._reactInternals;e:{if(ai(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var r=e.type;if(rr(r))return ug(e,r,t)}return t}function l0(e,t,r,n,i,o,u,c,h){return e=dd(r,n,!0,e,i,o,u,c,h),e.context=u0(null),r=e.current,n=Wt(),i=In(r),o=un(n,i),o.callback=t??null,An(r,o,i),e.current.lanes=i,cs(e,i,n),nr(e,n),e}function nu(e,t,r,n){var i=t.current,o=Wt(),u=In(i);return r=u0(r),t.context===null?t.context=r:t.pendingContext=r,t=un(o,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=An(i,t,u),e!==null&&(jr(e,i,u,o),Xs(e,i,u)),u}function ja(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function fd(e,t){Zf(e,t),(e=e.alternate)&&Zf(e,t)}function b1(){return null}var c0=typeof reportError=="function"?reportError:function(e){console.error(e)};function hd(e){this._internalRoot=e}iu.prototype.render=hd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));nu(e,t,null,null)};iu.prototype.unmount=hd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;oi(function(){nu(null,e,null,null)}),t[dn]=null}};function iu(e){this._internalRoot=e}iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<En.length&&t!==0&&t<En[r].priority;r++);En.splice(r,0,e),r===0&&Kp(e)}};function pd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eh(){}function x1(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var f=ja(u);o.call(f)}}var u=l0(t,n,e,0,null,!1,!1,"",eh);return e._reactRootContainer=u,e[dn]=u.current,Xo(e.nodeType===8?e.parentNode:e),oi(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var c=n;n=function(){var f=ja(h);c.call(f)}}var h=dd(e,0,!1,null,null,!1,!1,"",eh);return e._reactRootContainer=h,e[dn]=h.current,Xo(e.nodeType===8?e.parentNode:e),oi(function(){nu(t,h,r,n)}),h}function su(e,t,r,n,i){var o=r._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var c=i;i=function(){var h=ja(u);c.call(h)}}nu(t,u,e,i)}else u=x1(r,t,e,i,n);return ja(u)}Mp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=To(t.pendingLanes);r!==0&&(Nc(t,r|1),nr(t,gt()),!(Re&6)&&(Vi=gt()+500,Mn()))}break;case 13:oi(function(){var n=fn(e,1);if(n!==null){var i=Wt();jr(n,e,1,i)}}),fd(e,1)}};Lc=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var r=Wt();jr(t,e,134217728,r)}fd(e,134217728)}};Bp=function(e){if(e.tag===13){var t=In(e),r=fn(e,t);if(r!==null){var n=Wt();jr(r,e,t,n)}fd(e,t)}};Hp=function(){return Le};$p=function(e,t){var r=Le;try{return Le=e,t()}finally{Le=r}};Tl=function(e,t,r){switch(t){case"input":if(wl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Qa(n);if(!i)throw Error(ae(90));_p(n),wl(n,i)}}}break;case"textarea":Sp(e,r);break;case"select":t=r.value,t!=null&&Pi(e,!!r.multiple,t,!1)}};Cp=ad;Pp=oi;var F1={usingClientEntryPoint:!1,Events:[fs,Si,Qa,kp,Tp,ad]},_o={findFiberByHostInstance:qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k1={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ip(e),e===null?null:e.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||b1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{Wa=Ms.inject(k1),Jr=Ms}catch{}}fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F1;fr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pd(t))throw Error(ae(200));return E1(e,t,null,r)};fr.createRoot=function(e,t){if(!pd(e))throw Error(ae(299));var r=!1,n="",i=c0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=dd(e,1,!1,null,null,r,!1,n,i),e[dn]=t.current,Xo(e.nodeType===8?e.parentNode:e),new hd(t)};fr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=Ip(t),e=e===null?null:e.stateNode,e};fr.flushSync=function(e){return oi(e)};fr.hydrate=function(e,t,r){if(!ou(t))throw Error(ae(200));return su(null,e,t,!0,r)};fr.hydrateRoot=function(e,t,r){if(!pd(e))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",u=c0;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=l0(t,null,e,1,r??null,i,!1,o,u),e[dn]=t.current,Xo(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new iu(t)};fr.render=function(e,t,r){if(!ou(t))throw Error(ae(200));return su(null,e,t,!1,r)};fr.unmountComponentAtNode=function(e){if(!ou(e))throw Error(ae(40));return e._reactRootContainer?(oi(function(){su(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};fr.unstable_batchedUpdates=ad;fr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ou(r))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return su(e,t,r,!1,n)};fr.version="18.3.1-next-f1338f8080-20240426";function d0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d0)}catch(e){console.error(e)}}d0(),dp.exports=fr;var T1=dp.exports,th=T1;hl.createRoot=th.createRoot,hl.hydrateRoot=th.hydrateRoot;var er=function(){return er=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},er.apply(this,arguments)};function Ua(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var Ge="-ms-",Ho="-moz-",Ne="-webkit-",f0="comm",au="rule",gd="decl",C1="@import",h0="@keyframes",P1="@layer",p0=Math.abs,md=String.fromCharCode,sc=Object.assign;function A1(e,t){return Pt(e,0)^45?(((t<<2^Pt(e,0))<<2^Pt(e,1))<<2^Pt(e,2))<<2^Pt(e,3):0}function g0(e){return e.trim()}function rn(e,t){return(e=t.exec(e))?e[0]:e}function xe(e,t,r){return e.replace(t,r)}function oa(e,t,r){return e.indexOf(t,r)}function Pt(e,t){return e.charCodeAt(t)|0}function zi(e,t,r){return e.slice(t,r)}function zr(e){return e.length}function m0(e){return e.length}function Po(e,t){return t.push(e),e}function R1(e,t){return e.map(t).join("")}function rh(e,t){return e.filter(function(r){return!rn(r,t)})}var uu=1,Wi=1,y0=0,br=0,vt=0,to="";function lu(e,t,r,n,i,o,u,c){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:uu,column:Wi,length:u,return:"",siblings:c}}function vn(e,t){return sc(lu("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function hi(e){for(;e.root;)e=vn(e.root,{children:[e]});Po(e,e.siblings)}function I1(){return vt}function N1(){return vt=br>0?Pt(to,--br):0,Wi--,vt===10&&(Wi=1,uu--),vt}function Ur(){return vt=br<y0?Pt(to,br++):0,Wi++,vt===10&&(Wi=1,uu++),vt}function Zn(){return Pt(to,br)}function sa(){return br}function cu(e,t){return zi(to,e,t)}function ac(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function L1(e){return uu=Wi=1,y0=zr(to=e),br=0,[]}function D1(e){return to="",e}function el(e){return g0(cu(br-1,uc(e===91?e+2:e===40?e+1:e)))}function O1(e){for(;(vt=Zn())&&vt<33;)Ur();return ac(e)>2||ac(vt)>3?"":" "}function j1(e,t){for(;--t&&Ur()&&!(vt<48||vt>102||vt>57&&vt<65||vt>70&&vt<97););return cu(e,sa()+(t<6&&Zn()==32&&Ur()==32))}function uc(e){for(;Ur();)switch(vt){case e:return br;case 34:case 39:e!==34&&e!==39&&uc(vt);break;case 40:e===41&&uc(e);break;case 92:Ur();break}return br}function U1(e,t){for(;Ur()&&e+vt!==57;)if(e+vt===84&&Zn()===47)break;return"/*"+cu(t,br-1)+"*"+md(e===47?e:Ur())}function M1(e){for(;!ac(Zn());)Ur();return cu(e,br)}function B1(e){return D1(aa("",null,null,null,[""],e=L1(e),0,[0],e))}function aa(e,t,r,n,i,o,u,c,h){for(var f=0,g=0,p=u,y=0,F=0,E=0,C=1,I=1,_=1,v=0,b="",P=i,B=o,L=n,A=b;I;)switch(E=v,v=Ur()){case 40:if(E!=108&&Pt(A,p-1)==58){oa(A+=xe(el(v),"&","&\f"),"&\f",p0(f?c[f-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:A+=el(v);break;case 9:case 10:case 13:case 32:A+=O1(E);break;case 92:A+=j1(sa()-1,7);continue;case 47:switch(Zn()){case 42:case 47:Po(H1(U1(Ur(),sa()),t,r,h),h);break;default:A+="/"}break;case 123*C:c[f++]=zr(A)*_;case 125*C:case 59:case 0:switch(v){case 0:case 125:I=0;case 59+g:_==-1&&(A=xe(A,/\f/g,"")),F>0&&zr(A)-p&&Po(F>32?ih(A+";",n,r,p-1,h):ih(xe(A," ","")+";",n,r,p-2,h),h);break;case 59:A+=";";default:if(Po(L=nh(A,t,r,f,g,i,c,b,P=[],B=[],p,o),o),v===123)if(g===0)aa(A,t,L,L,P,o,p,c,B);else switch(y===99&&Pt(A,3)===110?100:y){case 100:case 108:case 109:case 115:aa(e,L,L,n&&Po(nh(e,L,L,0,0,i,c,b,i,P=[],p,B),B),i,B,p,c,n?P:B);break;default:aa(A,L,L,L,[""],B,0,c,B)}}f=g=F=0,C=_=1,b=A="",p=u;break;case 58:p=1+zr(A),F=E;default:if(C<1){if(v==123)--C;else if(v==125&&C++==0&&N1()==125)continue}switch(A+=md(v),v*C){case 38:_=g>0?1:(A+="\f",-1);break;case 44:c[f++]=(zr(A)-1)*_,_=1;break;case 64:Zn()===45&&(A+=el(Ur())),y=Zn(),g=p=zr(b=A+=M1(sa())),v++;break;case 45:E===45&&zr(A)==2&&(C=0)}}return o}function nh(e,t,r,n,i,o,u,c,h,f,g,p){for(var y=i-1,F=i===0?o:[""],E=m0(F),C=0,I=0,_=0;C<n;++C)for(var v=0,b=zi(e,y+1,y=p0(I=u[C])),P=e;v<E;++v)(P=g0(I>0?F[v]+" "+b:xe(b,/&\f/g,F[v])))&&(h[_++]=P);return lu(e,t,r,i===0?au:c,h,f,g,p)}function H1(e,t,r,n){return lu(e,t,r,f0,md(I1()),zi(e,2,-2),0,n)}function ih(e,t,r,n,i){return lu(e,t,r,gd,zi(e,0,n),zi(e,n+1,-1),n,i)}function v0(e,t,r){switch(A1(e,t)){case 5103:return Ne+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ne+e+e;case 4789:return Ho+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ne+e+Ho+e+Ge+e+e;case 5936:switch(Pt(e,t+11)){case 114:return Ne+e+Ge+xe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ne+e+Ge+xe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ne+e+Ge+xe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ne+e+Ge+e+e;case 6165:return Ne+e+Ge+"flex-"+e+e;case 5187:return Ne+e+xe(e,/(\w+).+(:[^]+)/,Ne+"box-$1$2"+Ge+"flex-$1$2")+e;case 5443:return Ne+e+Ge+"flex-item-"+xe(e,/flex-|-self/g,"")+(rn(e,/flex-|baseline/)?"":Ge+"grid-row-"+xe(e,/flex-|-self/g,""))+e;case 4675:return Ne+e+Ge+"flex-line-pack"+xe(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ne+e+Ge+xe(e,"shrink","negative")+e;case 5292:return Ne+e+Ge+xe(e,"basis","preferred-size")+e;case 6060:return Ne+"box-"+xe(e,"-grow","")+Ne+e+Ge+xe(e,"grow","positive")+e;case 4554:return Ne+xe(e,/([^-])(transform)/g,"$1"+Ne+"$2")+e;case 6187:return xe(xe(xe(e,/(zoom-|grab)/,Ne+"$1"),/(image-set)/,Ne+"$1"),e,"")+e;case 5495:case 3959:return xe(e,/(image-set\([^]*)/,Ne+"$1$`$1");case 4968:return xe(xe(e,/(.+:)(flex-)?(.*)/,Ne+"box-pack:$3"+Ge+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ne+e+e;case 4200:if(!rn(e,/flex-|baseline/))return Ge+"grid-column-align"+zi(e,t)+e;break;case 2592:case 3360:return Ge+xe(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(n,i){return t=i,rn(n.props,/grid-\w+-end/)})?~oa(e+(r=r[t].value),"span",0)?e:Ge+xe(e,"-start","")+e+Ge+"grid-row-span:"+(~oa(r,"span",0)?rn(r,/\d+/):+rn(r,/\d+/)-+rn(e,/\d+/))+";":Ge+xe(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(n){return rn(n.props,/grid-\w+-start/)})?e:Ge+xe(xe(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return xe(e,/(.+)-inline(.+)/,Ne+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zr(e)-1-t>6)switch(Pt(e,t+1)){case 109:if(Pt(e,t+4)!==45)break;case 102:return xe(e,/(.+:)(.+)-([^]+)/,"$1"+Ne+"$2-$3$1"+Ho+(Pt(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~oa(e,"stretch",0)?v0(xe(e,"stretch","fill-available"),t,r)+e:e}break;case 5152:case 5920:return xe(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,o,u,c,h,f){return Ge+i+":"+o+f+(u?Ge+i+"-span:"+(c?h:+h-+o)+f:"")+e});case 4949:if(Pt(e,t+6)===121)return xe(e,":",":"+Ne)+e;break;case 6444:switch(Pt(e,Pt(e,14)===45?18:11)){case 120:return xe(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ne+(Pt(e,14)===45?"inline-":"")+"box$3$1"+Ne+"$2$3$1"+Ge+"$2box$3")+e;case 100:return xe(e,":",":"+Ge)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return xe(e,"scroll-","scroll-snap-")+e}return e}function Ma(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function $1(e,t,r,n){switch(e.type){case P1:if(e.children.length)break;case C1:case gd:return e.return=e.return||e.value;case f0:return"";case h0:return e.return=e.value+"{"+Ma(e.children,n)+"}";case au:if(!zr(e.value=e.props.join(",")))return""}return zr(r=Ma(e.children,n))?e.return=e.value+"{"+r+"}":""}function K1(e){var t=m0(e);return function(r,n,i,o){for(var u="",c=0;c<t;c++)u+=e[c](r,n,i,o)||"";return u}}function V1(e){return function(t){t.root||(t=t.return)&&e(t)}}function z1(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case gd:e.return=v0(e.value,e.length,r);return;case h0:return Ma([vn(e,{value:xe(e.value,"@","@"+Ne)})],n);case au:if(e.length)return R1(r=e.props,function(i){switch(rn(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":hi(vn(e,{props:[xe(i,/:(read-\w+)/,":"+Ho+"$1")]})),hi(vn(e,{props:[i]})),sc(e,{props:rh(r,n)});break;case"::placeholder":hi(vn(e,{props:[xe(i,/:(plac\w+)/,":"+Ne+"input-$1")]})),hi(vn(e,{props:[xe(i,/:(plac\w+)/,":"+Ho+"$1")]})),hi(vn(e,{props:[xe(i,/:(plac\w+)/,Ge+"input-$1")]})),hi(vn(e,{props:[i]})),sc(e,{props:rh(r,n)});break}return""})}}var W1={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ir={},qi=typeof process<"u"&&ir!==void 0&&(ir.REACT_APP_SC_ATTR||ir.SC_ATTR)||"data-styled",_0="active",w0="data-styled-version",du="6.1.11",yd=`/*!sc*/
`,vd=typeof window<"u"&&"HTMLElement"in window,q1=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ir!==void 0&&ir.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ir.REACT_APP_SC_DISABLE_SPEEDY!==""?ir.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ir.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ir!==void 0&&ir.SC_DISABLE_SPEEDY!==void 0&&ir.SC_DISABLE_SPEEDY!==""&&ir.SC_DISABLE_SPEEDY!=="false"&&ir.SC_DISABLE_SPEEDY),fu=Object.freeze([]),Ji=Object.freeze({});function J1(e,t,r){return r===void 0&&(r=Ji),e.theme!==r.theme&&e.theme||t||r.theme}var S0=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),G1=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Q1=/(^-|-$)/g;function oh(e){return e.replace(G1,"-").replace(Q1,"")}var Y1=/(a)(d)/gi,Bs=52,sh=function(e){return String.fromCharCode(e+(e>25?39:97))};function lc(e){var t,r="";for(t=Math.abs(e);t>Bs;t=t/Bs|0)r=sh(t%Bs)+r;return(sh(t%Bs)+r).replace(Y1,"$1-$2")}var tl,E0=5381,Ci=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},b0=function(e){return Ci(E0,e)};function X1(e){return lc(b0(e)>>>0)}function Z1(e){return e.displayName||e.name||"Component"}function rl(e){return typeof e=="string"&&!0}var x0=typeof Symbol=="function"&&Symbol.for,F0=x0?Symbol.for("react.memo"):60115,e_=x0?Symbol.for("react.forward_ref"):60112,t_={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r_={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},k0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},n_=((tl={})[e_]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tl[F0]=k0,tl);function ah(e){return("type"in(t=e)&&t.type.$$typeof)===F0?k0:"$$typeof"in e?n_[e.$$typeof]:t_;var t}var i_=Object.defineProperty,o_=Object.getOwnPropertyNames,uh=Object.getOwnPropertySymbols,s_=Object.getOwnPropertyDescriptor,a_=Object.getPrototypeOf,lh=Object.prototype;function T0(e,t,r){if(typeof t!="string"){if(lh){var n=a_(t);n&&n!==lh&&T0(e,n,r)}var i=o_(t);uh&&(i=i.concat(uh(t)));for(var o=ah(e),u=ah(t),c=0;c<i.length;++c){var h=i[c];if(!(h in r_||r&&r[h]||u&&h in u||o&&h in o)){var f=s_(t,h);try{i_(e,h,f)}catch{}}}}return e}function Gi(e){return typeof e=="function"}function _d(e){return typeof e=="object"&&"styledComponentId"in e}function Qn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function ch(e,t){if(e.length===0)return"";for(var r=e[0],n=1;n<e.length;n++)r+=e[n];return r}function as(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function cc(e,t,r){if(r===void 0&&(r=!1),!r&&!as(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=cc(e[n],t[n]);else if(as(t))for(var n in t)e[n]=cc(e[n],t[n]);return e}function wd(e,t){Object.defineProperty(e,"toString",{value:t})}function ps(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var u_=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var r=0,n=0;n<t;n++)r+=this.groupSizes[n];return r},e.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,o=i;t>=o;)if((o<<=1)<0)throw ps(16,"".concat(t));this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var u=i;u<o;u++)this.groupSizes[u]=0}for(var c=this.indexOfGroup(t+1),h=(u=0,r.length);u<h;u++)this.tag.insertRule(c,r[u])&&(this.groupSizes[t]++,c++)},e.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],n=this.indexOfGroup(t),i=n+r;this.groupSizes[t]=0;for(var o=n;o<i;o++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var n=this.groupSizes[t],i=this.indexOfGroup(t),o=i+n,u=i;u<o;u++)r+="".concat(this.tag.getRule(u)).concat(yd);return r},e}(),ua=new Map,Ba=new Map,la=1,Hs=function(e){if(ua.has(e))return ua.get(e);for(;Ba.has(la);)la++;var t=la++;return ua.set(e,t),Ba.set(t,e),t},l_=function(e,t){la=t+1,ua.set(e,t),Ba.set(t,e)},c_="style[".concat(qi,"][").concat(w0,'="').concat(du,'"]'),d_=new RegExp("^".concat(qi,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),f_=function(e,t,r){for(var n,i=r.split(","),o=0,u=i.length;o<u;o++)(n=i[o])&&e.registerName(t,n)},h_=function(e,t){for(var r,n=((r=t.textContent)!==null&&r!==void 0?r:"").split(yd),i=[],o=0,u=n.length;o<u;o++){var c=n[o].trim();if(c){var h=c.match(d_);if(h){var f=0|parseInt(h[1],10),g=h[2];f!==0&&(l_(g,f),f_(e,g,h[3]),e.getTag().insertRules(f,i)),i.length=0}else i.push(c)}}};function p_(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var C0=function(e){var t=document.head,r=e||t,n=document.createElement("style"),i=function(c){var h=Array.from(c.querySelectorAll("style[".concat(qi,"]")));return h[h.length-1]}(r),o=i!==void 0?i.nextSibling:null;n.setAttribute(qi,_0),n.setAttribute(w0,du);var u=p_();return u&&n.setAttribute("nonce",u),r.insertBefore(n,o),n},g_=function(){function e(t){this.element=C0(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var n=document.styleSheets,i=0,o=n.length;i<o;i++){var u=n[i];if(u.ownerNode===r)return u}throw ps(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},e}(),m_=function(){function e(t){this.element=C0(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var n=document.createTextNode(r);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),y_=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),dh=vd,v_={isServer:!vd,useCSSOMInjection:!q1},P0=function(){function e(t,r,n){t===void 0&&(t=Ji),r===void 0&&(r={});var i=this;this.options=er(er({},v_),t),this.gs=r,this.names=new Map(n),this.server=!!t.isServer,!this.server&&vd&&dh&&(dh=!1,function(o){for(var u=document.querySelectorAll(c_),c=0,h=u.length;c<h;c++){var f=u[c];f&&f.getAttribute(qi)!==_0&&(h_(o,f),f.parentNode&&f.parentNode.removeChild(f))}}(this)),wd(this,function(){return function(o){for(var u=o.getTag(),c=u.length,h="",f=function(p){var y=function(_){return Ba.get(_)}(p);if(y===void 0)return"continue";var F=o.names.get(y),E=u.getGroup(p);if(F===void 0||E.length===0)return"continue";var C="".concat(qi,".g").concat(p,'[id="').concat(y,'"]'),I="";F!==void 0&&F.forEach(function(_){_.length>0&&(I+="".concat(_,","))}),h+="".concat(E).concat(C,'{content:"').concat(I,'"}').concat(yd)},g=0;g<c;g++)f(g);return h}(i)})}return e.registerId=function(t){return Hs(t)},e.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new e(er(er({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var n=r.useCSSOMInjection,i=r.target;return r.isServer?new y_(i):n?new g_(i):new m_(i)}(this.options),new u_(t)));var t},e.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},e.prototype.registerName=function(t,r){if(Hs(t),this.names.has(t))this.names.get(t).add(r);else{var n=new Set;n.add(r),this.names.set(t,n)}},e.prototype.insertRules=function(t,r,n){this.registerName(t,r),this.getTag().insertRules(Hs(t),n)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(Hs(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),__=/&/g,w_=/^\s*\/\/.*$/gm;function A0(e,t){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=A0(r.children,t)),r})}function S_(e){var t,r,n,i=Ji,o=i.options,u=o===void 0?Ji:o,c=i.plugins,h=c===void 0?fu:c,f=function(y,F,E){return E.startsWith(r)&&E.endsWith(r)&&E.replaceAll(r,"").length>0?".".concat(t):y},g=h.slice();g.push(function(y){y.type===au&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(__,r).replace(n,f))}),u.prefix&&g.push(z1),g.push($1);var p=function(y,F,E,C){F===void 0&&(F=""),E===void 0&&(E=""),C===void 0&&(C="&"),t=C,r=F,n=new RegExp("\\".concat(r,"\\b"),"g");var I=y.replace(w_,""),_=B1(E||F?"".concat(E," ").concat(F," { ").concat(I," }"):I);u.namespace&&(_=A0(_,u.namespace));var v=[];return Ma(_,K1(g.concat(V1(function(b){return v.push(b)})))),v};return p.hash=h.length?h.reduce(function(y,F){return F.name||ps(15),Ci(y,F.name)},E0).toString():"",p}var E_=new P0,dc=S_(),R0=ji.createContext({shouldForwardProp:void 0,styleSheet:E_,stylis:dc});R0.Consumer;ji.createContext(void 0);function fh(){return dt.useContext(R0)}var b_=function(){function e(t,r){var n=this;this.inject=function(i,o){o===void 0&&(o=dc);var u=n.name+o.hash;i.hasNameForId(n.id,u)||i.insertRules(n.id,u,o(n.rules,u,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,wd(this,function(){throw ps(12,String(n.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=dc),this.name+t.hash},e}(),x_=function(e){return e>="A"&&e<="Z"};function hh(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(r===1&&n==="-"&&e[0]==="-")return e;x_(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var I0=function(e){return e==null||e===!1||e===""},N0=function(e){var t,r,n=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!I0(o)&&(Array.isArray(o)&&o.isCss||Gi(o)?n.push("".concat(hh(i),":"),o,";"):as(o)?n.push.apply(n,Ua(Ua(["".concat(i," {")],N0(o),!1),["}"],!1)):n.push("".concat(hh(i),": ").concat((t=i,(r=o)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in W1||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return n};function ei(e,t,r,n){if(I0(e))return[];if(_d(e))return[".".concat(e.styledComponentId)];if(Gi(e)){if(!Gi(o=e)||o.prototype&&o.prototype.isReactComponent||!t)return[e];var i=e(t);return ei(i,t,r,n)}var o;return e instanceof b_?r?(e.inject(r,n),[e.getName(n)]):[e]:as(e)?N0(e):Array.isArray(e)?Array.prototype.concat.apply(fu,e.map(function(u){return ei(u,t,r,n)})):[e.toString()]}function F_(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(Gi(r)&&!_d(r))return!1}return!0}var k_=b0(du),T_=function(){function e(t,r,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&F_(t),this.componentId=r,this.baseHash=Ci(k_,r),this.baseStyle=n,P0.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))i=Qn(i,this.staticRulesId);else{var o=ch(ei(this.rules,t,r,n)),u=lc(Ci(this.baseHash,o)>>>0);if(!r.hasNameForId(this.componentId,u)){var c=n(o,".".concat(u),void 0,this.componentId);r.insertRules(this.componentId,u,c)}i=Qn(i,u),this.staticRulesId=u}else{for(var h=Ci(this.baseHash,n.hash),f="",g=0;g<this.rules.length;g++){var p=this.rules[g];if(typeof p=="string")f+=p;else if(p){var y=ch(ei(p,t,r,n));h=Ci(h,y+g),f+=y}}if(f){var F=lc(h>>>0);r.hasNameForId(this.componentId,F)||r.insertRules(this.componentId,F,n(f,".".concat(F),void 0,this.componentId)),i=Qn(i,F)}}return i},e}(),L0=ji.createContext(void 0);L0.Consumer;var nl={};function C_(e,t,r){var n=_d(e),i=e,o=!rl(e),u=t.attrs,c=u===void 0?fu:u,h=t.componentId,f=h===void 0?function(P,B){var L=typeof P!="string"?"sc":oh(P);nl[L]=(nl[L]||0)+1;var A="".concat(L,"-").concat(X1(du+L+nl[L]));return B?"".concat(B,"-").concat(A):A}(t.displayName,t.parentComponentId):h,g=t.displayName,p=g===void 0?function(P){return rl(P)?"styled.".concat(P):"Styled(".concat(Z1(P),")")}(e):g,y=t.displayName&&t.componentId?"".concat(oh(t.displayName),"-").concat(t.componentId):t.componentId||f,F=n&&i.attrs?i.attrs.concat(c).filter(Boolean):c,E=t.shouldForwardProp;if(n&&i.shouldForwardProp){var C=i.shouldForwardProp;if(t.shouldForwardProp){var I=t.shouldForwardProp;E=function(P,B){return C(P,B)&&I(P,B)}}else E=C}var _=new T_(r,y,n?i.componentStyle:void 0);function v(P,B){return function(L,A,Q){var ie=L.attrs,M=L.componentStyle,oe=L.defaultProps,ke=L.foldedComponentIds,Fe=L.styledComponentId,ft=L.target,ze=ji.useContext(L0),st=fh(),Me=L.shouldForwardProp||st.shouldForwardProp,le=J1(A,ze,oe)||Ji,ue=function(ht,tt,He){for(var mt,$e=er(er({},tt),{className:void 0,theme:He}),De=0;De<ht.length;De+=1){var W=Gi(mt=ht[De])?mt($e):mt;for(var S in W)$e[S]=S==="className"?Qn($e[S],W[S]):S==="style"?er(er({},$e[S]),W[S]):W[S]}return tt.className&&($e.className=Qn($e.className,tt.className)),$e}(ie,A,le),ce=ue.as||ft,Se={};for(var be in ue)ue[be]===void 0||be[0]==="$"||be==="as"||be==="theme"&&ue.theme===le||(be==="forwardedAs"?Se.as=ue.forwardedAs:Me&&!Me(be,ce)||(Se[be]=ue[be]));var at=function(ht,tt){var He=fh(),mt=ht.generateAndInjectStyles(tt,He.styleSheet,He.stylis);return mt}(M,ue),Be=Qn(ke,Fe);return at&&(Be+=" "+at),ue.className&&(Be+=" "+ue.className),Se[rl(ce)&&!S0.has(ce)?"class":"className"]=Be,Se.ref=Q,dt.createElement(ce,Se)}(b,P,B)}v.displayName=p;var b=ji.forwardRef(v);return b.attrs=F,b.componentStyle=_,b.displayName=p,b.shouldForwardProp=E,b.foldedComponentIds=n?Qn(i.foldedComponentIds,i.styledComponentId):"",b.styledComponentId=y,b.target=n?i.target:e,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(P){this._foldedDefaultProps=n?function(B){for(var L=[],A=1;A<arguments.length;A++)L[A-1]=arguments[A];for(var Q=0,ie=L;Q<ie.length;Q++)cc(B,ie[Q],!0);return B}({},i.defaultProps,P):P}}),wd(b,function(){return".".concat(b.styledComponentId)}),o&&T0(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function ph(e,t){for(var r=[e[0]],n=0,i=t.length;n<i;n+=1)r.push(t[n],e[n+1]);return r}var gh=function(e){return Object.assign(e,{isCss:!0})};function P_(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Gi(e)||as(e))return gh(ei(ph(fu,Ua([e],t,!0))));var n=e;return t.length===0&&n.length===1&&typeof n[0]=="string"?ei(n):gh(ei(ph(n,t)))}function fc(e,t,r){if(r===void 0&&(r=Ji),!t)throw ps(1,t);var n=function(i){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return e(t,r,P_.apply(void 0,Ua([i],o,!1)))};return n.attrs=function(i){return fc(e,t,er(er({},r),{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return fc(e,t,er(er({},r),i))},n}var D0=function(e){return fc(C_,e)},Ue=D0;S0.forEach(function(e){Ue[e]=D0(e)});const A_=Ue.div`
    display: flex;
    background: black;
    padding: .5em;
    align-items: center;
`,R_=Ue.div`
    display: flex;
    justify-content: center;
    padding: 1em;
`,Di=Ue.div`
    display: flex;
    flex-direction: column;
`,O0=Ue.div`
    display: flex;
    &.align-center {
        align-items: center;
    }
`,I_=Ue.button`
    border-radius: 50%;
    padding: 6px 11px;
`,j0=Ue.div`flex:1`,On=crypto,Sd=e=>e instanceof CryptoKey,qr=new TextEncoder,Qi=new TextDecoder;function U0(...e){const t=e.reduce((i,{length:o})=>i+o,0),r=new Uint8Array(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return r}const N_=e=>{let t=e;typeof t=="string"&&(t=qr.encode(t));const r=32768,n=[];for(let i=0;i<t.length;i+=r)n.push(String.fromCharCode.apply(null,t.subarray(i,i+r)));return btoa(n.join(""))},ca=e=>N_(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),L_=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},da=e=>{let t=e;t instanceof Uint8Array&&(t=Qi.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return L_(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class dr extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)==null||r.call(Error,this,this.constructor)}}class Kr extends dr{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}}class mh extends dr{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}}class D_ extends dr{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class ar extends dr{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class lt extends dr{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Ed extends dr{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class M0 extends dr{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class B0 extends dr{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class O_ extends dr{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class j_ extends dr{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class U_ extends dr{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}On.getRandomValues.bind(On);function Zr(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function $s(e,t){return e.name===t}function il(e){return parseInt(e.name.slice(4),10)}function M_(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function B_(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function H_(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!$s(e.algorithm,"HMAC"))throw Zr("HMAC");const n=parseInt(t.slice(2),10);if(il(e.algorithm.hash)!==n)throw Zr(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!$s(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Zr("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(il(e.algorithm.hash)!==n)throw Zr(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!$s(e.algorithm,"RSA-PSS"))throw Zr("RSA-PSS");const n=parseInt(t.slice(2),10);if(il(e.algorithm.hash)!==n)throw Zr(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw Zr("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!$s(e.algorithm,"ECDSA"))throw Zr("ECDSA");const n=M_(t);if(e.algorithm.namedCurve!==n)throw Zr(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}B_(e,r)}function H0(e,t,...r){var n;if(r.length>2){const i=r.pop();e+=`one of type ${r.join(", ")}, or ${i}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&(n=t.constructor)!=null&&n.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const hc=(e,...t)=>H0("Key must be ",e,...t);function $0(e,t,...r){return H0(`Key for the ${e} algorithm must be `,t,...r)}const K0=e=>Sd(e),Nr=["CryptoKey"],V0=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const i=Object.keys(n);if(!r||r.size===0){r=new Set(i);continue}for(const o of i){if(r.has(o))return!1;r.add(o)}}return!0};function $_(e){return typeof e=="object"&&e!==null}function Yi(e){if(!$_(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const z0=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function K_(e){let t,r;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new ar('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new ar('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new ar('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new ar('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const V_=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=K_(e),n=[t,e.ext??!1,e.key_ops??r],i={...e};return delete i.alg,delete i.use,On.subtle.importKey("jwk",i,...n)};async function z_(e,t){if(!Yi(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return da(e.k);case"RSA":if(e.oth!==void 0)throw new ar('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return V_({...e,alg:t});default:throw new ar('Unsupported "kty" (Key Type) Parameter value')}}const W_=(e,t)=>{if(!(t instanceof Uint8Array)){if(!K0(t))throw new TypeError($0(e,t,...Nr,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Nr.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},q_=(e,t,r)=>{if(!K0(t))throw new TypeError($0(e,t,...Nr));if(t.type==="secret")throw new TypeError(`${Nr.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Nr.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Nr.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Nr.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Nr.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},W0=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?W_(e,t):q_(e,t,r)};function q0(e,t,r,n,i){if(i.crit!==void 0&&(n==null?void 0:n.crit)===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(u=>typeof u!="string"||u.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;r!==void 0?o=new Map([...Object.entries(r),...t.entries()]):o=t;for(const u of n.crit){if(!o.has(u))throw new ar(`Extension Header Parameter "${u}" is not recognized`);if(i[u]===void 0)throw new e(`Extension Header Parameter "${u}" is missing`);if(o.get(u)&&n[u]===void 0)throw new e(`Extension Header Parameter "${u}" MUST be integrity protected`)}return new Set(n.crit)}const J_=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)},G_=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:ca(e)};if(!Sd(e))throw new TypeError(hc(e,...Nr,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:i,...o}=await On.subtle.exportKey("jwk",e);return o};async function Q_(e){return G_(e)}function J0(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new ar(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function G0(e,t,r){if(Sd(t))return H_(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(hc(t,...Nr));return On.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(hc(t,...Nr,"Uint8Array"))}const Y_=async(e,t,r,n)=>{const i=await G0(e,t,"verify");z0(e,i);const o=J0(e,i.algorithm);try{return await On.subtle.verify(o,i,r,n)}catch{return!1}};async function X_(e,t,r){if(!Yi(e))throw new lt("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new lt('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new lt("JWS Protected Header incorrect type");if(e.payload===void 0)throw new lt("JWS Payload missing");if(typeof e.signature!="string")throw new lt("JWS Signature missing or incorrect type");if(e.header!==void 0&&!Yi(e.header))throw new lt("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{const C=da(e.protected);n=JSON.parse(Qi.decode(C))}catch{throw new lt("JWS Protected Header is invalid")}if(!V0(n,e.header))throw new lt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...n,...e.header},o=q0(lt,new Map([["b64",!0]]),r==null?void 0:r.crit,n,i);let u=!0;if(o.has("b64")&&(u=n.b64,typeof u!="boolean"))throw new lt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:c}=i;if(typeof c!="string"||!c)throw new lt('JWS "alg" (Algorithm) Header Parameter missing or invalid');const h=r&&J_("algorithms",r.algorithms);if(h&&!h.has(c))throw new D_('"alg" (Algorithm) Header Parameter value not allowed');if(u){if(typeof e.payload!="string")throw new lt("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new lt("JWS Payload must be a string or an Uint8Array instance");let f=!1;typeof t=="function"&&(t=await t(n,e),f=!0),W0(c,t,"verify");const g=U0(qr.encode(e.protected??""),qr.encode("."),typeof e.payload=="string"?qr.encode(e.payload):e.payload);let p;try{p=da(e.signature)}catch{throw new lt("Failed to base64url decode the signature")}if(!await Y_(c,t,p,g))throw new U_;let F;if(u)try{F=da(e.payload)}catch{throw new lt("Failed to base64url decode the payload")}else typeof e.payload=="string"?F=qr.encode(e.payload):F=e.payload;const E={payload:F};return e.protected!==void 0&&(E.protectedHeader=n),e.header!==void 0&&(E.unprotectedHeader=e.header),f?{...E,key:t}:E}async function Z_(e,t,r){if(e instanceof Uint8Array&&(e=Qi.decode(e)),typeof e!="string")throw new lt("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:o,length:u}=e.split(".");if(u!==3)throw new lt("Invalid Compact JWS");const c=await X_({payload:i,protected:n,signature:o},t,r),h={payload:c.payload,protectedHeader:c.protectedHeader};return typeof t=="function"?{...h,key:c.key}:h}const _n=e=>Math.floor(e.getTime()/1e3),Q0=60,Y0=Q0*60,bd=Y0*24,ew=bd*7,tw=bd*365.25,rw=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,$o=e=>{const t=rw.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]),n=t[3].toLowerCase();let i;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":i=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":i=Math.round(r*Q0);break;case"hour":case"hours":case"hr":case"hrs":case"h":i=Math.round(r*Y0);break;case"day":case"days":case"d":i=Math.round(r*bd);break;case"week":case"weeks":case"w":i=Math.round(r*ew);break;default:i=Math.round(r*tw);break}return t[1]==="-"||t[4]==="ago"?-i:i},yh=e=>e.toLowerCase().replace(/^application\//,""),nw=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,iw=(e,t,r={})=>{const{typ:n}=r;if(n&&(typeof e.typ!="string"||yh(e.typ)!==yh(n)))throw new Kr('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(Qi.decode(t))}catch{}if(!Yi(i))throw new Ed("JWT Claims Set must be a top-level JSON object");const{requiredClaims:o=[],issuer:u,subject:c,audience:h,maxTokenAge:f}=r,g=[...o];f!==void 0&&g.push("iat"),h!==void 0&&g.push("aud"),c!==void 0&&g.push("sub"),u!==void 0&&g.push("iss");for(const E of new Set(g.reverse()))if(!(E in i))throw new Kr(`missing required "${E}" claim`,E,"missing");if(u&&!(Array.isArray(u)?u:[u]).includes(i.iss))throw new Kr('unexpected "iss" claim value',"iss","check_failed");if(c&&i.sub!==c)throw new Kr('unexpected "sub" claim value',"sub","check_failed");if(h&&!nw(i.aud,typeof h=="string"?[h]:h))throw new Kr('unexpected "aud" claim value',"aud","check_failed");let p;switch(typeof r.clockTolerance){case"string":p=$o(r.clockTolerance);break;case"number":p=r.clockTolerance;break;case"undefined":p=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:y}=r,F=_n(y||new Date);if((i.iat!==void 0||f)&&typeof i.iat!="number")throw new Kr('"iat" claim must be a number',"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new Kr('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>F+p)throw new Kr('"nbf" claim timestamp check failed',"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new Kr('"exp" claim must be a number',"exp","invalid");if(i.exp<=F-p)throw new mh('"exp" claim timestamp check failed',"exp","check_failed")}if(f){const E=F-i.iat,C=typeof f=="number"?f:$o(f);if(E-p>C)throw new mh('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(E<0-p)throw new Kr('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function ow(e,t,r){var u;const n=await Z_(e,t,r);if((u=n.protectedHeader.crit)!=null&&u.includes("b64")&&n.protectedHeader.b64===!1)throw new Ed("JWTs MUST NOT use unencoded payload");const o={payload:iw(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return typeof t=="function"?{...o,key:n.key}:o}const sw=async(e,t,r)=>{const n=await G0(e,t,"sign");z0(e,n);const i=await On.subtle.sign(J0(e,n.algorithm),n,r);return new Uint8Array(i)};class aw{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new lt("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!V0(this._protectedHeader,this._unprotectedHeader))throw new lt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},i=q0(lt,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n);let o=!0;if(i.has("b64")&&(o=this._protectedHeader.b64,typeof o!="boolean"))throw new lt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:u}=n;if(typeof u!="string"||!u)throw new lt('JWS "alg" (Algorithm) Header Parameter missing or invalid');W0(u,t,"sign");let c=this._payload;o&&(c=qr.encode(ca(c)));let h;this._protectedHeader?h=qr.encode(ca(JSON.stringify(this._protectedHeader))):h=qr.encode("");const f=U0(h,qr.encode("."),c),g=await sw(u,t,f),p={signature:ca(g),payload:""};return o&&(p.payload=Qi.decode(c)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=Qi.decode(h)),p}}class uw{constructor(t){this._flattened=new aw(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}function Vn(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class lw{constructor(t={}){if(!Yi(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:Vn("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:Vn("setNotBefore",_n(t))}:this._payload={...this._payload,nbf:_n(new Date)+$o(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:Vn("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:Vn("setExpirationTime",_n(t))}:this._payload={...this._payload,exp:_n(new Date)+$o(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:_n(new Date)}:t instanceof Date?this._payload={...this._payload,iat:Vn("setIssuedAt",_n(t))}:typeof t=="string"?this._payload={...this._payload,iat:Vn("setIssuedAt",_n(new Date)+$o(t))}:this._payload={...this._payload,iat:Vn("setIssuedAt",t)},this}}class cw extends lw{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var i;const n=new uw(qr.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray((i=this._protectedHeader)==null?void 0:i.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Ed("JWTs MUST NOT use unencoded payload");return n.sign(t,r)}}function dw(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new ar('Unsupported "alg" value for a JSON Web Key Set')}}function fw(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(hw)}function hw(e){return Yi(e)}function X0(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class pw{constructor(t){if(this._cached=new WeakMap,!fw(t))throw new M0("JSON Web Key Set malformed");this._jwks=X0(t)}async getKey(t,r){const{alg:n,kid:i}={...t,...r==null?void 0:r.header},o=dw(n),u=this._jwks.keys.filter(f=>{let g=o===f.kty;if(g&&typeof i=="string"&&(g=i===f.kid),g&&typeof f.alg=="string"&&(g=n===f.alg),g&&typeof f.use=="string"&&(g=f.use==="sig"),g&&Array.isArray(f.key_ops)&&(g=f.key_ops.includes("verify")),g&&n==="EdDSA"&&(g=f.crv==="Ed25519"||f.crv==="Ed448"),g)switch(n){case"ES256":g=f.crv==="P-256";break;case"ES256K":g=f.crv==="secp256k1";break;case"ES384":g=f.crv==="P-384";break;case"ES512":g=f.crv==="P-521";break}return g}),{0:c,length:h}=u;if(h===0)throw new B0;if(h!==1){const f=new O_,{_cached:g}=this;throw f[Symbol.asyncIterator]=async function*(){for(const p of u)try{yield await vh(g,p,n)}catch{}},f}return vh(this._cached,c,n)}}async function vh(e,t,r){const n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){const i=await z_({...t,ext:!0},r);if(i instanceof Uint8Array||i.type!=="public")throw new M0("JSON Web Key Set members must be public keys");n[r]=i}return n[r]}function gw(e){const t=new pw(e),r=async(n,i)=>t.getKey(n,i);return Object.defineProperties(r,{jwks:{value:()=>X0(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}const mw=async(e,t,r)=>{let n,i,o=!1;typeof AbortController=="function"&&(n=new AbortController,i=setTimeout(()=>{o=!0,n.abort()},t));const u=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(c=>{throw o?new j_:c});if(i!==void 0&&clearTimeout(i),u.status!==200)throw new dr("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await u.json()}catch{throw new dr("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function yw(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let pc;var Ws,Xh;(typeof navigator>"u"||!((Xh=(Ws=navigator.userAgent)==null?void 0:Ws.startsWith)!=null&&Xh.call(Ws,"Mozilla/5.0 ")))&&(pc="jose/v5.3.0");class vw{constructor(t,r){if(!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r==null?void 0:r.agent,headers:r==null?void 0:r.headers},this._timeoutDuration=typeof(r==null?void 0:r.timeoutDuration)=="number"?r==null?void 0:r.timeoutDuration:5e3,this._cooldownDuration=typeof(r==null?void 0:r.cooldownDuration)=="number"?r==null?void 0:r.cooldownDuration:3e4,this._cacheMaxAge=typeof(r==null?void 0:r.cacheMaxAge)=="number"?r==null?void 0:r.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._local||!this.fresh())&&await this.reload();try{return await this._local(t,r)}catch(n){if(n instanceof B0&&this.coolingDown()===!1)return await this.reload(),this._local(t,r);throw n}}async reload(){this._pendingFetch&&yw()&&(this._pendingFetch=void 0);const t=new Headers(this._options.headers);pc&&!t.has("User-Agent")&&(t.set("User-Agent",pc),this._options.headers=Object.fromEntries(t.entries())),this._pendingFetch||(this._pendingFetch=mw(this._url,this._timeoutDuration,this._options).then(r=>{this._local=gw(r),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(r=>{throw this._pendingFetch=void 0,r})),await this._pendingFetch}}function _w(e,t){const r=new vw(e,t),n=async(i,o)=>r.getKey(i,o);return Object.defineProperties(n,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>{var i;return(i=r._local)==null?void 0:i.jwks()},enumerable:!0,configurable:!1,writable:!1}}),n}function ol(e){const t=(e==null?void 0:e.modulusLength)??2048;if(typeof t!="number"||t<2048)throw new ar("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function ww(e,t){let r,n;switch(e){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:ol(t)},n=["sign","verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:ol(t)},n=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:ol(t)},n=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"},n=["sign","verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},n=["sign","verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},n=["sign","verify"];break;case"EdDSA":{n=["sign","verify"];const i="Ed25519";switch(i){case"Ed25519":case"Ed448":r={name:i};break;default:throw new ar("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{n=["deriveKey","deriveBits"];const i="P-256";switch(i){case"P-256":case"P-384":case"P-521":{r={name:"ECDH",namedCurve:i};break}case"X25519":case"X448":r={name:i};break;default:throw new ar("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new ar('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return On.subtle.generateKey(r,!1,n)}async function Sw(e,t){return ww(e,t)}let Ks;const Ew=new Uint8Array(16);function bw(){if(!Ks&&(Ks=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ks))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ks(Ew)}const It=[];for(let e=0;e<256;++e)It.push((e+256).toString(16).slice(1));function xw(e,t=0){return It[e[t+0]]+It[e[t+1]]+It[e[t+2]]+It[e[t+3]]+"-"+It[e[t+4]]+It[e[t+5]]+"-"+It[e[t+6]]+It[e[t+7]]+"-"+It[e[t+8]]+It[e[t+9]]+"-"+It[e[t+10]]+It[e[t+11]]+It[e[t+12]]+It[e[t+13]]+It[e[t+14]]+It[e[t+15]]}const Fw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_h={randomUUID:Fw};function hu(e,t,r){if(_h.randomUUID&&!t&&!e)return _h.randomUUID();e=e||{};const n=e.random||(e.rng||bw)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,xw(n)}const Z0="solidClientAuthn:",Ha=["ES256","RS256"],kt={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},wh=5,kw="openid",Tw="offline_access",Cw="webid",em=[kw,Tw,Cw].join(" ");class Pw{constructor(t){this.handleables=t,this.handleables=t}async getProperHandler(t){const r=await Promise.all(this.handleables.map(n=>n.canHandle(...t)));for(let n=0;n<r.length;n+=1)if(r[n])return this.handleables[n];return null}async canHandle(...t){return await this.getProperHandler(t)!==null}async handle(...t){const r=await this.getProperHandler(t);if(r)return r.handle(...t);throw new Error(`[${this.constructor.name}] cannot find a suitable handler for: ${t.map(n=>{try{return JSON.stringify(n)}catch{return n.toString()}}).join(", ")}`)}}async function tm(e,t,r,n){let i;try{const{payload:o}=await ow(e,_w(new URL(t)),{issuer:r,audience:n});i=o}catch(o){throw new Error(`Token verification failed: ${o.stack}`)}if(typeof i.webid=="string")return i.webid;if(typeof i.sub!="string")throw new Error(`The token ${JSON.stringify(i)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(i.sub),i.sub}catch(o){throw new Error(`The token has no 'webid' claim, and its 'sub' claim of [${i.sub}] is invalid as a URL - error [${o}].`)}}function rm(e){try{const t=new URL(e),r=!t.searchParams.has("code")&&!t.searchParams.has("state"),n=t.hash==="";return r&&n}catch{return!1}}function nm(e){const t=new URL(e);return t.searchParams.delete("state"),t.searchParams.delete("code"),t.searchParams.delete("error"),t.searchParams.delete("error_description"),t.searchParams.delete("iss"),t}function Aw(e,t){return typeof e=="boolean"?!!e:!!t}class Rw{constructor(t,r){this.storageUtility=t,this.redirector=r,this.parametersGuard=n=>n.issuerConfiguration.grantTypesSupported!==void 0&&n.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1&&n.redirectUrl!==void 0,this.storageUtility=t,this.redirector=r}async canHandle(t){return this.parametersGuard(t)}async handleRedirect({oidcLoginOptions:t,state:r,codeVerifier:n,targetUrl:i}){if(!this.parametersGuard(t))throw new Error("The authorization code grant requires a redirectUrl.");await Promise.all([this.storageUtility.setForUser(r,{sessionId:t.sessionId}),this.storageUtility.setForUser(t.sessionId,{codeVerifier:n,issuer:t.issuer.toString(),redirectUrl:t.redirectUrl,dpop:(!!t.dpop).toString(),keepAlive:Aw(t.keepAlive,!0).toString()})]),this.redirector.redirect(i,{handleRedirect:t.handleRedirect})}}class Iw{constructor(t){this.sessionInfoManager=t,this.sessionInfoManager=t}async canHandle(){return!0}async handle(t){await this.sessionInfoManager.clear(t)}}class Nw{constructor(t){this.redirector=t,this.redirector=t}async canHandle(t,r){return(r==null?void 0:r.logoutType)==="idp"}async handle(t,r){if((r==null?void 0:r.logoutType)!=="idp")throw new Error("Attempting to call idp logout handler to perform app logout");if(r.toLogoutUrl===void 0)throw new Error("Cannot perform IDP logout. Did you log in using the OIDC authentication flow?");this.redirector.redirect(r.toLogoutUrl(r),{handleRedirect:r.handleRedirect})}}class Lw{constructor(t,r){this.handlers=[new Iw(t),new Nw(r)]}async canHandle(){return!0}async handle(t,r){for(const n of this.handlers)await n.canHandle(t,r)&&await n.handle(t,r)}}function im(){return{isLoggedIn:!1,sessionId:hu(),fetch:(...e)=>fetch(...e)}}async function om(e,t){await Promise.all([t.deleteAllUserData(e,{secure:!1}),t.deleteAllUserData(e,{secure:!0})])}class Dw{constructor(t){this.storageUtility=t,this.storageUtility=t}update(t,r){throw new Error("Not Implemented")}get(t){throw new Error("Not implemented")}async getAll(){throw new Error("Not implemented")}async clear(t){return om(t,this.storageUtility)}async register(t){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}}function Ow({endSessionEndpoint:e,idTokenHint:t,postLogoutRedirectUri:r,state:n}){const i=new URL(e);return t!==void 0&&i.searchParams.append("id_token_hint",t),r!==void 0&&(i.searchParams.append("post_logout_redirect_uri",r),n!==void 0&&i.searchParams.append("state",n)),i.toString()}function jw({endSessionEndpoint:e,idTokenHint:t}){if(e!==void 0)return function({state:n,postLogoutUrl:i}){return Ow({endSessionEndpoint:e,idTokenHint:t,state:n,postLogoutRedirectUri:i})}}function Uw(e){return typeof e=="string"&&["DPoP","Bearer"].includes(e)}function sm(e){try{return new URL(e),!0}catch{return!1}}function Mw(e,t){var r;return(r=t.find(n=>e.includes(n)))!==null&&r!==void 0?r:null}function Bw(e){return e.clientId!==void 0&&!sm(e.clientId)}function Hw(e,t){return t.scopesSupported.includes("webid")&&e.clientId!==void 0&&sm(e.clientId)}function $w(e){return typeof e=="string"&&["dynamic","static","solid-oidc"].includes(e)}async function Kw(e,t,r,n){let i;if(Hw(e,t))i={clientId:e.clientId,clientName:e.clientName,clientType:"solid-oidc"};else if(Bw(e))i={clientId:e.clientId,clientSecret:e.clientSecret,clientName:e.clientName,clientType:"static"};else return n.getClient({sessionId:e.sessionId,clientName:e.clientName,redirectUrl:e.redirectUrl},t);const o={clientId:i.clientId,clientType:i.clientType};return i.clientType==="static"&&(o.clientSecret=i.clientSecret),i.clientName&&(o.clientName=i.clientName),await r.setForUser(e.sessionId,o),i}const Sh=(e,t)=>fetch(e,t);let Vw=class{constructor(t,r,n,i,o){this.loginHandler=t,this.redirectHandler=r,this.logoutHandler=n,this.sessionInfoManager=i,this.issuerConfigFetcher=o,this.fetch=Sh,this.logout=async(u,c)=>{await this.logoutHandler.handle(u,(c==null?void 0:c.logoutType)==="idp"?{...c,toLogoutUrl:this.boundLogout}:c),this.fetch=Sh,delete this.boundLogout},this.getSessionInfo=async u=>this.sessionInfoManager.get(u),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.loginHandler=t,this.redirectHandler=r,this.logoutHandler=n,this.sessionInfoManager=i,this.issuerConfigFetcher=o}};async function am(e,t,r){try{const[n,i,o,u,c]=await Promise.all([t.getForUser(e,"issuer",{errorIfNull:!0}),t.getForUser(e,"codeVerifier"),t.getForUser(e,"redirectUrl"),t.getForUser(e,"dpop",{errorIfNull:!0}),t.getForUser(e,"keepAlive")]);await t.deleteForUser(e,"codeVerifier");const h=await r.fetchConfig(n);return{codeVerifier:i,redirectUrl:o,issuerConfig:h,dpop:u==="true",keepAlive:typeof c=="string"?c==="true":!0}}catch(n){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${e}]: ${n}`)}}class zw{constructor(t,r){this.secureStorage=t,this.insecureStorage=r,this.secureStorage=t,this.insecureStorage=r}getKey(t){return`solidClientAuthenticationUser:${t}`}async getUserData(t,r){const n=await(r?this.secureStorage:this.insecureStorage).get(this.getKey(t));if(n===void 0)return{};try{return JSON.parse(n)}catch{throw new Error(`Data for user [${t}] in [${r?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${n}`)}}async setUserData(t,r,n){await(n?this.secureStorage:this.insecureStorage).set(this.getKey(t),JSON.stringify(r))}async get(t,r){const n=await(r!=null&&r.secure?this.secureStorage:this.insecureStorage).get(t);if(n===void 0&&(r!=null&&r.errorIfNull))throw new Error(`[${t}] is not stored`);return n}async set(t,r,n){return(n!=null&&n.secure?this.secureStorage:this.insecureStorage).set(t,r)}async delete(t,r){return(r!=null&&r.secure?this.secureStorage:this.insecureStorage).delete(t)}async getForUser(t,r,n){const i=await this.getUserData(t,n==null?void 0:n.secure);let o;if((!i||!i[r])&&(o=void 0),o=i[r],o===void 0&&(n!=null&&n.errorIfNull))throw new Error(`Field [${r}] for user [${t}] is not stored`);return o||void 0}async setForUser(t,r,n){let i;try{i=await this.getUserData(t,n==null?void 0:n.secure)}catch{i={}}await this.setUserData(t,{...i,...r},n==null?void 0:n.secure)}async deleteForUser(t,r,n){const i=await this.getUserData(t,n==null?void 0:n.secure);delete i[r],await this.setUserData(t,i,n==null?void 0:n.secure)}async deleteAllUserData(t,r){await(r!=null&&r.secure?this.secureStorage:this.insecureStorage).delete(this.getKey(t))}}class Ww{constructor(){this.map={}}async get(t){return this.map[t]||void 0}async set(t,r){this.map[t]=r}async delete(t){delete this.map[t]}}class gc extends Error{constructor(t){super(t)}}class Ao extends Error{constructor(t){super(`Invalid response from OIDC provider: missing fields ${t}`),this.missingFields=t}}class um extends Error{constructor(t,r,n){super(t),this.error=r,this.errorDescription=n}}function qw(e){const t=new URL(e);return new URL(t.pathname,t.origin).toString()}async function xd(e,t,r){return new cw({htu:qw(e),htm:t.toUpperCase(),jti:hu()}).setProtectedHeader({alg:Ha[0],jwk:r.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(r.privateKey,{})}async function Jw(){const{privateKey:e,publicKey:t}=await Sw(Ha[0]),r={privateKey:e,publicKey:await Q_(t)};return[r.publicKey.alg]=Ha,r}const lm=600;function Gw(e){return[401,403].includes(e)}async function Qw(e,t,r,n){var i;const o=new Headers(n==null?void 0:n.headers);return o.set("Authorization",`DPoP ${t}`),o.set("DPoP",await xd(e,(i=n==null?void 0:n.method)!==null&&i!==void 0?i:"get",r)),{...n,headers:o}}async function Yw(e,t,r,n){if(r!==void 0)return Qw(e,t,r,n);const i=new Headers(n==null?void 0:n.headers);return i.set("Authorization",`Bearer ${t}`),{...n,headers:i}}async function Eh(e,t,r,n){return fetch(t,await Yw(t.toString(),e,n,r))}async function Xw(e,t,r){var n;const i=await e.tokenRefresher.refresh(e.sessionId,e.refreshToken,t);return r==null||r.emit(kt.SESSION_EXTENDED,(n=i.expiresIn)!==null&&n!==void 0?n:lm),typeof i.refreshToken=="string"&&(r==null||r.emit(kt.NEW_REFRESH_TOKEN,i.refreshToken)),{accessToken:i.accessToken,refreshToken:i.refreshToken,expiresIn:i.expiresIn}}const sl=e=>e!==void 0?e-wh>0?e-wh:e:lm;async function Zw(e,t){var r;let n=e,i;const o=t==null?void 0:t.refreshOptions;if(o!==void 0){const u=async()=>{var c,h,f,g;try{const{accessToken:p,refreshToken:y,expiresIn:F}=await Xw(o,t.dpopKey,t.eventEmitter);n=p,y!==void 0&&(o.refreshToken=y),clearTimeout(i),i=setTimeout(u,sl(F)*1e3),(c=t.eventEmitter)===null||c===void 0||c.emit(kt.TIMEOUT_SET,i)}catch(p){p instanceof um&&((h=t==null?void 0:t.eventEmitter)===null||h===void 0||h.emit(kt.ERROR,p.error,p.errorDescription),(f=t==null?void 0:t.eventEmitter)===null||f===void 0||f.emit(kt.SESSION_EXPIRED)),p instanceof Ao&&p.missingFields.includes("access_token")&&((g=t==null?void 0:t.eventEmitter)===null||g===void 0||g.emit(kt.SESSION_EXPIRED))}};i=setTimeout(u,sl(t.expiresIn)*1e3),(r=t.eventEmitter)===null||r===void 0||r.emit(kt.TIMEOUT_SET,i)}else if(t!==void 0&&t.eventEmitter!==void 0){const u=setTimeout(()=>{t.eventEmitter.emit(kt.SESSION_EXPIRED)},sl(t.expiresIn)*1e3);t.eventEmitter.emit(kt.TIMEOUT_SET,u)}return async(u,c)=>{let h=await Eh(n,u,c,t==null?void 0:t.dpopKey);const f=!h.ok&&!Gw(h.status);return h.ok||f||h.url!==u&&(t==null?void 0:t.dpopKey)!==void 0&&(h=await Eh(n,h.url,c,t.dpopKey)),h}}var Fd={exports:{}},Oi=typeof Reflect=="object"?Reflect:null,bh=Oi&&typeof Oi.apply=="function"?Oi.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},fa;Oi&&typeof Oi.ownKeys=="function"?fa=Oi.ownKeys:Object.getOwnPropertySymbols?fa=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:fa=function(t){return Object.getOwnPropertyNames(t)};function eS(e){console&&console.warn&&console.warn(e)}var cm=Number.isNaN||function(t){return t!==t};function je(){je.init.call(this)}Fd.exports=je;Fd.exports.once=iS;je.EventEmitter=je;je.prototype._events=void 0;je.prototype._eventsCount=0;je.prototype._maxListeners=void 0;var xh=10;function pu(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(je,"defaultMaxListeners",{enumerable:!0,get:function(){return xh},set:function(e){if(typeof e!="number"||e<0||cm(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");xh=e}});je.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};je.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||cm(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function dm(e){return e._maxListeners===void 0?je.defaultMaxListeners:e._maxListeners}je.prototype.getMaxListeners=function(){return dm(this)};je.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var u;if(r.length>0&&(u=r[0]),u instanceof Error)throw u;var c=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw c.context=u,c}var h=o[t];if(h===void 0)return!1;if(typeof h=="function")bh(h,this,r);else for(var f=h.length,g=mm(h,f),n=0;n<f;++n)bh(g[n],this,r);return!0};function fm(e,t,r,n){var i,o,u;if(pu(r),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),u=o[t]),u===void 0)u=o[t]=r,++e._eventsCount;else if(typeof u=="function"?u=o[t]=n?[r,u]:[u,r]:n?u.unshift(r):u.push(r),i=dm(e),i>0&&u.length>i&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,eS(c)}return e}je.prototype.addListener=function(t,r){return fm(this,t,r,!1)};je.prototype.on=je.prototype.addListener;je.prototype.prependListener=function(t,r){return fm(this,t,r,!0)};function tS(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hm(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=tS.bind(n);return i.listener=r,n.wrapFn=i,i}je.prototype.once=function(t,r){return pu(r),this.on(t,hm(this,t,r)),this};je.prototype.prependOnceListener=function(t,r){return pu(r),this.prependListener(t,hm(this,t,r)),this};je.prototype.removeListener=function(t,r){var n,i,o,u,c;if(pu(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(o=-1,u=n.length-1;u>=0;u--)if(n[u]===r||n[u].listener===r){c=n[u].listener,o=u;break}if(o<0)return this;o===0?n.shift():rS(n,o),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,c||r)}return this};je.prototype.off=je.prototype.removeListener;je.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o=Object.keys(n),u;for(i=0;i<o.length;++i)u=o[i],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function pm(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?nS(i):mm(i,i.length)}je.prototype.listeners=function(t){return pm(this,t,!0)};je.prototype.rawListeners=function(t){return pm(this,t,!1)};je.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):gm.call(e,t)};je.prototype.listenerCount=gm;function gm(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}je.prototype.eventNames=function(){return this._eventsCount>0?fa(this._events):[]};function mm(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function rS(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function nS(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function iS(e,t){return new Promise(function(r,n){function i(u){e.removeListener(t,o),n(u)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}ym(e,t,o,{once:!0}),t!=="error"&&oS(e,i,{once:!0})})}function oS(e,t,r){typeof e.on=="function"&&ym(e,"error",t,r)}function ym(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var sS=Fd.exports;const aS=Va(sS);var vm={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Zh,function(){return function(r){var n={};function i(o){if(n[o])return n[o].exports;var u=n[o]={i:o,l:!1,exports:{}};return r[o].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=r,i.c=n,i.d=function(o,u,c){i.o(o,u)||Object.defineProperty(o,u,{enumerable:!0,get:c})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,u){if(1&u&&(o=i(o)),8&u||4&u&&typeof o=="object"&&o&&o.__esModule)return o;var c=Object.create(null);if(i.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),2&u&&typeof o!="string")for(var h in o)i.d(c,h,(function(f){return o[f]}).bind(null,h));return c},i.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(u,"a",u),u},i.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},i.p="",i(i.s=22)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function f(g,p){for(var y=0;y<p.length;y++){var F=p[y];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(g,F.key,F)}}return function(g,p,y){return p&&f(g.prototype,p),y&&f(g,y),g}}(),u={debug:function(){},info:function(){},warn:function(){},error:function(){}},c=void 0,h=void 0;(n.Log=function(){function f(){(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f)}return f.reset=function(){h=3,c=u},f.debug=function(){if(h>=4){for(var p=arguments.length,y=Array(p),F=0;F<p;F++)y[F]=arguments[F];c.debug.apply(c,Array.from(y))}},f.info=function(){if(h>=3){for(var p=arguments.length,y=Array(p),F=0;F<p;F++)y[F]=arguments[F];c.info.apply(c,Array.from(y))}},f.warn=function(){if(h>=2){for(var p=arguments.length,y=Array(p),F=0;F<p;F++)y[F]=arguments[F];c.warn.apply(c,Array.from(y))}},f.error=function(){if(h>=1){for(var p=arguments.length,y=Array(p),F=0;F<p;F++)y[F]=arguments[F];c.error.apply(c,Array.from(y))}},o(f,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return h},set:function(p){if(!(0<=p&&p<=4))throw new Error("Invalid log level");h=p}},{key:"logger",get:function(){return c},set:function(p){if(!p.debug&&p.info&&(p.debug=p.info),!(p.debug&&p.info&&p.warn&&p.error))throw new Error("Invalid logger");c=p}}]),f}()).reset()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function f(g,p){for(var y=0;y<p.length;y++){var F=p[y];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(g,F.key,F)}}return function(g,p,y){return p&&f(g.prototype,p),y&&f(g,y),g}}(),u={setInterval:function(f){function g(p,y){return f.apply(this,arguments)}return g.toString=function(){return f.toString()},g}(function(f,g){return setInterval(f,g)}),clearInterval:function(f){function g(p){return f.apply(this,arguments)}return g.toString=function(){return f.toString()},g}(function(f){return clearInterval(f)})},c=!1,h=null;n.Global=function(){function f(){(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f)}return f._testing=function(){c=!0},f.setXMLHttpRequest=function(p){h=p},o(f,null,[{key:"location",get:function(){if(!c)return location}},{key:"localStorage",get:function(){if(!c&&typeof window<"u")return localStorage}},{key:"sessionStorage",get:function(){if(!c&&typeof window<"u")return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!c&&typeof window<"u")return h||XMLHttpRequest}},{key:"timer",get:function(){if(!c)return u}}]),f}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.MetadataService=void 0;var o=function(){function g(p,y){for(var F=0;F<y.length;F++){var E=y[F];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,E.key,E)}}return function(p,y,F){return y&&g(p.prototype,y),F&&g(p,F),p}}(),u=i(0),c=i(7);function h(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}var f=".well-known/openid-configuration";n.MetadataService=function(){function g(p){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.JsonService;if(h(this,g),!p)throw u.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=p,this._jsonService=new y(["application/jwk-set+json"])}return g.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},g.prototype.getMetadata=function(){var y=this;return this._settings.metadata?(u.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(u.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(F){u.Log.debug("MetadataService.getMetadata: json received");var E=y._settings.metadataSeed||{};return y._settings.metadata=Object.assign({},E,F),y._settings.metadata})):(u.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},g.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},g.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},g.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},g.prototype.getTokenEndpoint=function(){var y=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this._getMetadataProperty("token_endpoint",y)},g.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},g.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},g.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},g.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},g.prototype._getMetadataProperty=function(y){var F=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return u.Log.debug("MetadataService.getMetadataProperty for: "+y),this.getMetadata().then(function(E){if(u.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),E[y]===void 0){if(F===!0)return void u.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+y);throw u.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+y),new Error("Metadata does not contain property "+y)}return E[y]})},g.prototype.getSigningKeys=function(){var y=this;return this._settings.signingKeys?(u.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(F){return u.Log.debug("MetadataService.getSigningKeys: jwks_uri received",F),y._jsonService.getJson(F).then(function(E){if(u.Log.debug("MetadataService.getSigningKeys: key set received",E),!E.keys)throw u.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return y._settings.signingKeys=E.keys,y._settings.signingKeys})})},o(g,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(f)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=f))),this._metadataUrl}}]),g}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UrlUtility=void 0;var o=i(0),u=i(1);n.UrlUtility=function(){function c(){(function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.addQueryParam=function(f,g,p){return f.indexOf("?")<0&&(f+="?"),f[f.length-1]!=="?"&&(f+="&"),f+=encodeURIComponent(g),f+="=",f+=encodeURIComponent(p)},c.parseUrlFragment=function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.Global;typeof f!="string"&&(f=p.location.href);var y=f.lastIndexOf(g);y>=0&&(f=f.substr(y+1)),g==="?"&&(y=f.indexOf("#"))>=0&&(f=f.substr(0,y));for(var F,E={},C=/([^&=]+)=([^&]*)/g,I=0;F=C.exec(f);)if(E[decodeURIComponent(F[1])]=decodeURIComponent(F[2].replace(/\+/g," ")),I++>50)return o.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",f),{error:"Response exceeded expected number of parameters"};for(var _ in E)return E;return{}},c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.JoseUtil=void 0;var o=i(26),u=function(h){return h&&h.__esModule?h:{default:h}}(i(33));n.JoseUtil=(0,u.default)({jws:o.jws,KeyUtil:o.KeyUtil,X509:o.X509,crypto:o.crypto,hextob64u:o.hextob64u,b64tohex:o.b64tohex,AllowedSigningAlgs:o.AllowedSigningAlgs})},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClientSettings=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u=function(){function _(v,b){for(var P=0;P<b.length;P++){var B=b[P];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(v,B.key,B)}}return function(v,b,P){return b&&_(v.prototype,b),P&&_(v,P),v}}(),c=i(0),h=i(23),f=i(6),g=i(24),p=i(2);function y(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}var F=".well-known/openid-configuration",E="id_token",C="openid",I="client_secret_post";n.OidcClientSettings=function(){function _(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=v.authority,P=v.metadataUrl,B=v.metadata,L=v.signingKeys,A=v.metadataSeed,Q=v.client_id,ie=v.client_secret,M=v.response_type,oe=M===void 0?E:M,ke=v.scope,Fe=ke===void 0?C:ke,ft=v.redirect_uri,ze=v.post_logout_redirect_uri,st=v.client_authentication,Me=st===void 0?I:st,le=v.prompt,ue=v.display,ce=v.max_age,Se=v.ui_locales,be=v.acr_values,at=v.resource,Be=v.response_mode,ht=v.filterProtocolClaims,tt=ht===void 0||ht,He=v.loadUserInfo,mt=He===void 0||He,$e=v.staleStateAge,De=$e===void 0?900:$e,W=v.clockSkew,S=W===void 0?300:W,x=v.clockService,K=x===void 0?new h.ClockService:x,q=v.userInfoJwtIssuer,X=q===void 0?"OP":q,ne=v.mergeClaims,ye=ne!==void 0&&ne,Ee=v.stateStore,Ie=Ee===void 0?new f.WebStorageStateStore:Ee,Ae=v.ResponseValidatorCtor,Oe=Ae===void 0?g.ResponseValidator:Ae,Gt=v.MetadataServiceCtor,xr=Gt===void 0?p.MetadataService:Gt,ve=v.extraQueryParams,rt=ve===void 0?{}:ve,Ce=v.extraTokenParams,pr=Ce===void 0?{}:Ce;y(this,_),this._authority=b,this._metadataUrl=P,this._metadata=B,this._metadataSeed=A,this._signingKeys=L,this._client_id=Q,this._client_secret=ie,this._response_type=oe,this._scope=Fe,this._redirect_uri=ft,this._post_logout_redirect_uri=ze,this._client_authentication=Me,this._prompt=le,this._display=ue,this._max_age=ce,this._ui_locales=Se,this._acr_values=be,this._resource=at,this._response_mode=Be,this._filterProtocolClaims=!!tt,this._loadUserInfo=!!mt,this._staleStateAge=De,this._clockSkew=S,this._clockService=K,this._userInfoJwtIssuer=X,this._mergeClaims=!!ye,this._stateStore=Ie,this._validator=new Oe(this),this._metadataService=new xr(this),this._extraQueryParams=(rt===void 0?"undefined":o(rt))==="object"?rt:{},this._extraTokenParams=(pr===void 0?"undefined":o(pr))==="object"?pr:{}}return _.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},u(_,[{key:"client_id",get:function(){return this._client_id},set:function(b){if(this._client_id)throw c.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=b}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(b){if(this._authority)throw c.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=b}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(F)<0&&(this._metadataUrl[this._metadataUrl.length-1]!=="/"&&(this._metadataUrl+="/"),this._metadataUrl+=F)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(b){this._metadata=b}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(b){this._metadataSeed=b}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(b){this._signingKeys=b}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(b){(b===void 0?"undefined":o(b))==="object"?this._extraQueryParams=b:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(b){(b===void 0?"undefined":o(b))==="object"?this._extraTokenParams=b:this._extraTokenParams={}}}]),_}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.WebStorageStateStore=void 0;var o=i(0),u=i(1);function c(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}n.WebStorageStateStore=function(){function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=f.prefix,p=g===void 0?"oidc.":g,y=f.store,F=y===void 0?u.Global.localStorage:y;c(this,h),this._store=F,this._prefix=p}return h.prototype.set=function(g,p){return o.Log.debug("WebStorageStateStore.set",g),g=this._prefix+g,this._store.setItem(g,p),Promise.resolve()},h.prototype.get=function(g){o.Log.debug("WebStorageStateStore.get",g),g=this._prefix+g;var p=this._store.getItem(g);return Promise.resolve(p)},h.prototype.remove=function(g){o.Log.debug("WebStorageStateStore.remove",g),g=this._prefix+g;var p=this._store.getItem(g);return this._store.removeItem(g),Promise.resolve(p)},h.prototype.getAllKeys=function(){o.Log.debug("WebStorageStateStore.getAllKeys");for(var g=[],p=0;p<this._store.length;p++){var y=this._store.key(p);y.indexOf(this._prefix)===0&&g.push(y.substr(this._prefix.length))}return Promise.resolve(g)},h}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.JsonService=void 0;var o=i(0),u=i(1);function c(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}n.JsonService=function(){function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.Global.XMLHttpRequest,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;c(this,h),f&&Array.isArray(f)?this._contentTypes=f.slice():this._contentTypes=[],this._contentTypes.push("application/json"),p&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=g,this._jwtHandler=p}return h.prototype.getJson=function(g,p){var y=this;if(!g)throw o.Log.error("JsonService.getJson: No url passed"),new Error("url");return o.Log.debug("JsonService.getJson, url: ",g),new Promise(function(F,E){var C=new y._XMLHttpRequest;C.open("GET",g);var I=y._contentTypes,_=y._jwtHandler;C.onload=function(){if(o.Log.debug("JsonService.getJson: HTTP response received, status",C.status),C.status===200){var v=C.getResponseHeader("Content-Type");if(v){var b=I.find(function(P){if(v.startsWith(P))return!0});if(b=="application/jwt")return void _(C).then(F,E);if(b)try{return void F(JSON.parse(C.responseText))}catch(P){return o.Log.error("JsonService.getJson: Error parsing JSON response",P.message),void E(P)}}E(Error("Invalid response Content-Type: "+v+", from URL: "+g))}else E(Error(C.statusText+" ("+C.status+")"))},C.onerror=function(){o.Log.error("JsonService.getJson: network error"),E(Error("Network Error"))},p&&(o.Log.debug("JsonService.getJson: token passed, setting Authorization header"),C.setRequestHeader("Authorization","Bearer "+p)),C.send()})},h.prototype.postForm=function(g,p,y){var F=this;if(!g)throw o.Log.error("JsonService.postForm: No url passed"),new Error("url");return o.Log.debug("JsonService.postForm, url: ",g),new Promise(function(E,C){var I=new F._XMLHttpRequest;I.open("POST",g);var _=F._contentTypes;I.onload=function(){if(o.Log.debug("JsonService.postForm: HTTP response received, status",I.status),I.status!==200){if(I.status===400&&(L=I.getResponseHeader("Content-Type"))&&_.find(function(A){if(L.startsWith(A))return!0}))try{var B=JSON.parse(I.responseText);if(B&&B.error)return o.Log.error("JsonService.postForm: Error from server: ",B.error),void C(new Error(B.error))}catch(A){return o.Log.error("JsonService.postForm: Error parsing JSON response",A.message),void C(A)}C(Error(I.statusText+" ("+I.status+")"))}else{var L;if((L=I.getResponseHeader("Content-Type"))&&_.find(function(A){if(L.startsWith(A))return!0}))try{return void E(JSON.parse(I.responseText))}catch(A){return o.Log.error("JsonService.postForm: Error parsing JSON response",A.message),void C(A)}C(Error("Invalid response Content-Type: "+L+", from URL: "+g))}},I.onerror=function(){o.Log.error("JsonService.postForm: network error"),C(Error("Network Error"))};var v="";for(var b in p){var P=p[b];P&&(v.length>0&&(v+="&"),v+=encodeURIComponent(b),v+="=",v+=encodeURIComponent(P))}I.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),y!==void 0&&I.setRequestHeader("Authorization","Basic "+btoa(y)),I.send(v)})},h}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninRequest=void 0;var o=i(0),u=i(3),c=i(13);n.SigninRequest=function(){function h(f){var g=f.url,p=f.client_id,y=f.redirect_uri,F=f.response_type,E=f.scope,C=f.authority,I=f.data,_=f.prompt,v=f.display,b=f.max_age,P=f.ui_locales,B=f.id_token_hint,L=f.login_hint,A=f.acr_values,Q=f.resource,ie=f.response_mode,M=f.request,oe=f.request_uri,ke=f.extraQueryParams,Fe=f.request_type,ft=f.client_secret,ze=f.extraTokenParams,st=f.skipUserInfo;if(function(at,Be){if(!(at instanceof Be))throw new TypeError("Cannot call a class as a function")}(this,h),!g)throw o.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!p)throw o.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!y)throw o.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!F)throw o.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!E)throw o.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!C)throw o.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var Me=h.isOidc(F),le=h.isCode(F);ie||(ie=h.isCode(F)?"query":null),this.state=new c.SigninState({nonce:Me,data:I,client_id:p,authority:C,redirect_uri:y,code_verifier:le,request_type:Fe,response_mode:ie,client_secret:ft,scope:E,extraTokenParams:ze,skipUserInfo:st}),g=u.UrlUtility.addQueryParam(g,"client_id",p),g=u.UrlUtility.addQueryParam(g,"redirect_uri",y),g=u.UrlUtility.addQueryParam(g,"response_type",F),g=u.UrlUtility.addQueryParam(g,"scope",E),g=u.UrlUtility.addQueryParam(g,"state",this.state.id),Me&&(g=u.UrlUtility.addQueryParam(g,"nonce",this.state.nonce)),le&&(g=u.UrlUtility.addQueryParam(g,"code_challenge",this.state.code_challenge),g=u.UrlUtility.addQueryParam(g,"code_challenge_method","S256"));var ue={prompt:_,display:v,max_age:b,ui_locales:P,id_token_hint:B,login_hint:L,acr_values:A,resource:Q,request:M,request_uri:oe,response_mode:ie};for(var ce in ue)ue[ce]&&(g=u.UrlUtility.addQueryParam(g,ce,ue[ce]));for(var Se in ke)g=u.UrlUtility.addQueryParam(g,Se,ke[Se]);this.url=g}return h.isOidc=function(g){return!!g.split(/\s+/g).filter(function(p){return p==="id_token"})[0]},h.isOAuth=function(g){return!!g.split(/\s+/g).filter(function(p){return p==="token"})[0]},h.isCode=function(g){return!!g.split(/\s+/g).filter(function(p){return p==="code"})[0]},h}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.State=void 0;var o=function(){function f(g,p){for(var y=0;y<p.length;y++){var F=p[y];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(g,F.key,F)}}return function(g,p,y){return p&&f(g.prototype,p),y&&f(g,y),g}}(),u=i(0),c=function(g){return g&&g.__esModule?g:{default:g}}(i(14));function h(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}n.State=function(){function f(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=g.id,y=g.data,F=g.created,E=g.request_type;h(this,f),this._id=p||(0,c.default)(),this._data=y,this._created=typeof F=="number"&&F>0?F:parseInt(Date.now()/1e3),this._request_type=E}return f.prototype.toStorageString=function(){return u.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},f.fromStorageString=function(p){return u.Log.debug("State.fromStorageString"),new f(JSON.parse(p))},f.clearStaleState=function(p,y){var F=Date.now()/1e3-y;return p.getAllKeys().then(function(E){u.Log.debug("State.clearStaleState: got keys",E);for(var C=[],I=function(P){var B=E[P];v=p.get(B).then(function(L){var A=!1;if(L)try{var Q=f.fromStorageString(L);u.Log.debug("State.clearStaleState: got item from key: ",B,Q.created),Q.created<=F&&(A=!0)}catch(ie){u.Log.error("State.clearStaleState: Error parsing state for key",B,ie.message),A=!0}else u.Log.debug("State.clearStaleState: no item in storage for key: ",B),A=!0;if(A)return u.Log.debug("State.clearStaleState: removed item for key: ",B),p.remove(B)}),C.push(v)},_=0;_<E.length;_++){var v;I(_)}return u.Log.debug("State.clearStaleState: waiting on promise count:",C.length),Promise.all(C)})},o(f,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),f}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.OidcClient=void 0;var o=function(){function I(_,v){for(var b=0;b<v.length;b++){var P=v[b];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}return function(_,v,b){return v&&I(_.prototype,v),b&&I(_,b),_}}(),u=i(0),c=i(5),h=i(12),f=i(8),g=i(34),p=i(35),y=i(36),F=i(13),E=i(9);function C(I,_){if(!(I instanceof _))throw new TypeError("Cannot call a class as a function")}n.OidcClient=function(){function I(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};C(this,I),_ instanceof c.OidcClientSettings?this._settings=_:this._settings=new c.OidcClientSettings(_)}return I.prototype.createSigninRequest=function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=b.response_type,B=b.scope,L=b.redirect_uri,A=b.data,Q=b.state,ie=b.prompt,M=b.display,oe=b.max_age,ke=b.ui_locales,Fe=b.id_token_hint,ft=b.login_hint,ze=b.acr_values,st=b.resource,Me=b.request,le=b.request_uri,ue=b.response_mode,ce=b.extraQueryParams,Se=b.extraTokenParams,be=b.request_type,at=b.skipUserInfo,Be=arguments[1];u.Log.debug("OidcClient.createSigninRequest");var ht=this._settings.client_id;P=P||this._settings.response_type,B=B||this._settings.scope,L=L||this._settings.redirect_uri,ie=ie||this._settings.prompt,M=M||this._settings.display,oe=oe||this._settings.max_age,ke=ke||this._settings.ui_locales,ze=ze||this._settings.acr_values,st=st||this._settings.resource,ue=ue||this._settings.response_mode,ce=ce||this._settings.extraQueryParams,Se=Se||this._settings.extraTokenParams;var tt=this._settings.authority;return f.SigninRequest.isCode(P)&&P!=="code"?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(He){u.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",He);var mt=new f.SigninRequest({url:He,client_id:ht,redirect_uri:L,response_type:P,scope:B,data:A||Q,authority:tt,prompt:ie,display:M,max_age:oe,ui_locales:ke,id_token_hint:Fe,login_hint:ft,acr_values:ze,resource:st,request:Me,request_uri:le,extraQueryParams:ce,extraTokenParams:Se,request_type:be,response_mode:ue,client_secret:v._settings.client_secret,skipUserInfo:at}),$e=mt.state;return(Be=Be||v._stateStore).set($e.id,$e.toStorageString()).then(function(){return mt})})},I.prototype.readSigninResponseState=function(v,b){var P=arguments.length>2&&arguments[2]!==void 0&&arguments[2];u.Log.debug("OidcClient.readSigninResponseState");var B=this._settings.response_mode==="query"||!this._settings.response_mode&&f.SigninRequest.isCode(this._settings.response_type),L=B?"?":"#",A=new g.SigninResponse(v,L);if(!A.state)return u.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));b=b||this._stateStore;var Q=P?b.remove.bind(b):b.get.bind(b);return Q(A.state).then(function(ie){if(!ie)throw u.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:F.SigninState.fromStorageString(ie),response:A}})},I.prototype.processSigninResponse=function(v,b){var P=this;return u.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(v,b,!0).then(function(B){var L=B.state,A=B.response;return u.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),P._validator.validateSigninResponse(L,A)})},I.prototype.createSignoutRequest=function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=b.id_token_hint,B=b.data,L=b.state,A=b.post_logout_redirect_uri,Q=b.extraQueryParams,ie=b.request_type,M=arguments[1];return u.Log.debug("OidcClient.createSignoutRequest"),A=A||this._settings.post_logout_redirect_uri,Q=Q||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(oe){if(!oe)throw u.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");u.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",oe);var ke=new p.SignoutRequest({url:oe,id_token_hint:P,post_logout_redirect_uri:A,data:B||L,extraQueryParams:Q,request_type:ie}),Fe=ke.state;return Fe&&(u.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(M=M||v._stateStore).set(Fe.id,Fe.toStorageString())),ke})},I.prototype.readSignoutResponseState=function(v,b){var P=arguments.length>2&&arguments[2]!==void 0&&arguments[2];u.Log.debug("OidcClient.readSignoutResponseState");var B=new y.SignoutResponse(v);if(!B.state)return u.Log.debug("OidcClient.readSignoutResponseState: No state in response"),B.error?(u.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",B.error),Promise.reject(new h.ErrorResponse(B))):Promise.resolve({state:void 0,response:B});var L=B.state;b=b||this._stateStore;var A=P?b.remove.bind(b):b.get.bind(b);return A(L).then(function(Q){if(!Q)throw u.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:E.State.fromStorageString(Q),response:B}})},I.prototype.processSignoutResponse=function(v,b){var P=this;return u.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(v,b,!0).then(function(B){var L=B.state,A=B.response;return L?(u.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),P._validator.validateSignoutResponse(L,A)):(u.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),A)})},I.prototype.clearStaleState=function(v){return u.Log.debug("OidcClient.clearStaleState"),v=v||this._stateStore,E.State.clearStaleState(v,this.settings.staleStateAge)},o(I,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),I}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenClient=void 0;var o=i(7),u=i(2),c=i(0);function h(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}n.TokenClient=function(){function f(g){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.JsonService,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.MetadataService;if(h(this,f),!g)throw c.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=g,this._jsonService=new p,this._metadataService=new y(this._settings)}return f.prototype.exchangeCode=function(){var p=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(y=Object.assign({},y)).grant_type=y.grant_type||"authorization_code",y.client_id=y.client_id||this._settings.client_id,y.client_secret=y.client_secret||this._settings.client_secret,y.redirect_uri=y.redirect_uri||this._settings.redirect_uri;var F=void 0,E=y._client_authentication||this._settings._client_authentication;return delete y._client_authentication,y.code?y.redirect_uri?y.code_verifier?y.client_id?y.client_secret||E!="client_secret_basic"?(E=="client_secret_basic"&&(F=y.client_id+":"+y.client_secret,delete y.client_id,delete y.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(C){return c.Log.debug("TokenClient.exchangeCode: Received token endpoint"),p._jsonService.postForm(C,y,F).then(function(I){return c.Log.debug("TokenClient.exchangeCode: response received"),I})})):(c.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(c.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(c.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(c.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(c.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},f.prototype.exchangeRefreshToken=function(){var p=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(y=Object.assign({},y)).grant_type=y.grant_type||"refresh_token",y.client_id=y.client_id||this._settings.client_id,y.client_secret=y.client_secret||this._settings.client_secret;var F=void 0,E=y._client_authentication||this._settings._client_authentication;return delete y._client_authentication,y.refresh_token?y.client_id?(E=="client_secret_basic"&&(F=y.client_id+":"+y.client_secret,delete y.client_id,delete y.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(C){return c.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),p._jsonService.postForm(C,y,F).then(function(I){return c.Log.debug("TokenClient.exchangeRefreshToken: response received"),I})})):(c.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(c.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},f}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorResponse=void 0;var o=i(0);function u(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function c(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?h:f}n.ErrorResponse=function(h){function f(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=g.error,y=g.error_description,F=g.error_uri,E=g.state,C=g.session_state;if(u(this,f),!p)throw o.Log.error("No error passed to ErrorResponse"),new Error("error");var I=c(this,h.call(this,y||p));return I.name="ErrorResponse",I.error=p,I.error_description=y,I.error_uri=F,I.state=E,I.session_state=C,I}return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}(f,h),f}(Error)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninState=void 0;var o=function(){function y(F,E){for(var C=0;C<E.length;C++){var I=E[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(F,I.key,I)}}return function(F,E,C){return E&&y(F.prototype,E),C&&y(F,C),F}}(),u=i(0),c=i(9),h=i(4),f=function(F){return F&&F.__esModule?F:{default:F}}(i(14));function g(y,F){if(!(y instanceof F))throw new TypeError("Cannot call a class as a function")}function p(y,F){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||typeof F!="object"&&typeof F!="function"?y:F}n.SigninState=function(y){function F(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=E.nonce,I=E.authority,_=E.client_id,v=E.redirect_uri,b=E.code_verifier,P=E.response_mode,B=E.client_secret,L=E.scope,A=E.extraTokenParams,Q=E.skipUserInfo;g(this,F);var ie=p(this,y.call(this,arguments[0]));if(C===!0?ie._nonce=(0,f.default)():C&&(ie._nonce=C),b===!0?ie._code_verifier=(0,f.default)()+(0,f.default)()+(0,f.default)():b&&(ie._code_verifier=b),ie.code_verifier){var M=h.JoseUtil.hashString(ie.code_verifier,"SHA256");ie._code_challenge=h.JoseUtil.hexToBase64Url(M)}return ie._redirect_uri=v,ie._authority=I,ie._client_id=_,ie._response_mode=P,ie._client_secret=B,ie._scope=L,ie._extraTokenParams=A,ie._skipUserInfo=Q,ie}return function(C,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);C.prototype=Object.create(I&&I.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(C,I):C.__proto__=I)}(F,y),F.prototype.toStorageString=function(){return u.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},F.fromStorageString=function(C){return u.Log.debug("SigninState.fromStorageString"),new F(JSON.parse(C))},o(F,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),F}(c.State)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return(o!="undefined"&&o!==null&&o.getRandomValues!==void 0?u:c)().replace(/-/g,"")};var o=typeof window<"u"?window.crypto||window.msCrypto:null;function u(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(h){return(h^o.getRandomValues(new Uint8Array(1))[0]&15>>h/4).toString(16)})}function c(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(h){return(h^16*Math.random()>>h/4).toString(16)})}r.exports=n.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.User=void 0;var o=function(){function c(h,f){for(var g=0;g<f.length;g++){var p=f[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,f,g){return f&&c(h.prototype,f),g&&c(h,g),h}}(),u=i(0);n.User=function(){function c(h){var f=h.id_token,g=h.session_state,p=h.access_token,y=h.refresh_token,F=h.token_type,E=h.scope,C=h.profile,I=h.expires_at,_=h.state;(function(b,P){if(!(b instanceof P))throw new TypeError("Cannot call a class as a function")})(this,c),this.id_token=f,this.session_state=g,this.access_token=p,this.refresh_token=y,this.token_type=F,this.scope=E,this.profile=C,this.expires_at=I,this.state=_}return c.prototype.toStorageString=function(){return u.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},c.fromStorageString=function(f){return u.Log.debug("User.fromStorageString"),new c(JSON.parse(f))},o(c,[{key:"expires_in",get:function(){if(this.expires_at){var f=parseInt(Date.now()/1e3);return this.expires_at-f}},set:function(f){var g=parseInt(f);if(typeof g=="number"&&g>0){var p=parseInt(Date.now()/1e3);this.expires_at=p+g}}},{key:"expired",get:function(){var f=this.expires_in;if(f!==void 0)return f<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AccessTokenEvents=void 0;var o=i(0),u=i(46);function c(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}n.AccessTokenEvents=function(){function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=f.accessTokenExpiringNotificationTime,p=g===void 0?60:g,y=f.accessTokenExpiringTimer,F=y===void 0?new u.Timer("Access token expiring"):y,E=f.accessTokenExpiredTimer,C=E===void 0?new u.Timer("Access token expired"):E;c(this,h),this._accessTokenExpiringNotificationTime=p,this._accessTokenExpiring=F,this._accessTokenExpired=C}return h.prototype.load=function(g){if(g.access_token&&g.expires_in!==void 0){var p=g.expires_in;if(o.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",p),p>0){var y=p-this._accessTokenExpiringNotificationTime;y<=0&&(y=1),o.Log.debug("AccessTokenEvents.load: registering expiring timer in:",y),this._accessTokenExpiring.init(y)}else o.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var F=p+1;o.Log.debug("AccessTokenEvents.load: registering expired timer in:",F),this._accessTokenExpired.init(F)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},h.prototype.unload=function(){o.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},h.prototype.addAccessTokenExpiring=function(g){this._accessTokenExpiring.addHandler(g)},h.prototype.removeAccessTokenExpiring=function(g){this._accessTokenExpiring.removeHandler(g)},h.prototype.addAccessTokenExpired=function(g){this._accessTokenExpired.addHandler(g)},h.prototype.removeAccessTokenExpired=function(g){this._accessTokenExpired.removeHandler(g)},h}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.Event=void 0;var o=i(0);n.Event=function(){function u(c){(function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")})(this,u),this._name=c,this._callbacks=[]}return u.prototype.addHandler=function(h){this._callbacks.push(h)},u.prototype.removeHandler=function(h){var f=this._callbacks.findIndex(function(g){return g===h});f>=0&&this._callbacks.splice(f,1)},u.prototype.raise=function(){o.Log.debug("Event: Raising event: "+this._name);for(var h=0;h<this._callbacks.length;h++){var f;(f=this._callbacks)[h].apply(f,arguments)}},u}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SessionMonitor=void 0;var o=function(){function g(p,y){for(var F=0;F<y.length;F++){var E=y[F];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(p,E.key,E)}}return function(p,y,F){return y&&g(p.prototype,y),F&&g(p,F),p}}(),u=i(0),c=i(19),h=i(1);function f(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}n.SessionMonitor=function(){function g(p){var y=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.CheckSessionIFrame,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.Global.timer;if(f(this,g),!p)throw u.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=p,this._CheckSessionIFrameCtor=F,this._timer=E,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(C){C?y._start(C):y._settings.monitorAnonymousSession&&y._userManager.querySessionStatus().then(function(I){var _={session_state:I.session_state};I.sub&&I.sid&&(_.profile={sub:I.sub,sid:I.sid}),y._start(_)}).catch(function(I){u.Log.error("SessionMonitor ctor: error from querySessionStatus:",I.message)})}).catch(function(C){u.Log.error("SessionMonitor ctor: error from getUser:",C.message)}))}return g.prototype._start=function(y){var F=this,E=y.session_state;E&&(y.profile?(this._sub=y.profile.sub,this._sid=y.profile.sid,u.Log.debug("SessionMonitor._start: session_state:",E,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,u.Log.debug("SessionMonitor._start: session_state:",E,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(E):this._metadataService.getCheckSessionIframe().then(function(C){if(C){u.Log.debug("SessionMonitor._start: Initializing check session iframe");var I=F._client_id,_=F._checkSessionInterval,v=F._stopCheckSessionOnError;F._checkSessionIFrame=new F._CheckSessionIFrameCtor(F._callback.bind(F),I,C,_,v),F._checkSessionIFrame.load().then(function(){F._checkSessionIFrame.start(E)})}else u.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(C){u.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",C.message)}))},g.prototype._stop=function(){var y=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(u.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var F=this._timer.setInterval(function(){y._timer.clearInterval(F),y._userManager.querySessionStatus().then(function(E){var C={session_state:E.session_state};E.sub&&E.sid&&(C.profile={sub:E.sub,sid:E.sid}),y._start(C)}).catch(function(E){u.Log.error("SessionMonitor: error from querySessionStatus:",E.message)})},1e3)},g.prototype._callback=function(){var y=this;this._userManager.querySessionStatus().then(function(F){var E=!0;F?F.sub===y._sub?(E=!1,y._checkSessionIFrame.start(F.session_state),F.sid===y._sid?u.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",F.session_state):(u.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",F.session_state),y._userManager.events._raiseUserSessionChanged())):u.Log.debug("SessionMonitor._callback: Different subject signed into OP:",F.sub):u.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),E&&(y._sub?(u.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),y._userManager.events._raiseUserSignedOut()):(u.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),y._userManager.events._raiseUserSignedIn()))}).catch(function(F){y._sub&&(u.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",F.message),y._userManager.events._raiseUserSignedOut())})},o(g,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),g}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CheckSessionIFrame=void 0;var o=i(0);function u(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}n.CheckSessionIFrame=function(){function c(h,f,g,p){var y=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];u(this,c),this._callback=h,this._client_id=f,this._url=g,this._interval=p||2e3,this._stopOnError=y;var F=g.indexOf("/",g.indexOf("//")+2);this._frame_origin=g.substr(0,F),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=g}return c.prototype.load=function(){var f=this;return new Promise(function(g){f._frame.onload=function(){g()},window.document.body.appendChild(f._frame),f._boundMessageEvent=f._message.bind(f),window.addEventListener("message",f._boundMessageEvent,!1)})},c.prototype._message=function(f){f.origin===this._frame_origin&&f.source===this._frame.contentWindow&&(f.data==="error"?(o.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):f.data==="changed"?(o.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):o.Log.debug("CheckSessionIFrame: "+f.data+" message from check session op iframe"))},c.prototype.start=function(f){var g=this;if(this._session_state!==f){o.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=f;var p=function(){g._frame.contentWindow.postMessage(g._client_id+" "+g._session_state,g._frame_origin)};p(),this._timer=window.setInterval(p,this._interval)}},c.prototype.stop=function(){this._session_state=null,this._timer&&(o.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRevocationClient=void 0;var o=i(0),u=i(2),c=i(1);function h(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}var f="access_token",g="refresh_token";n.TokenRevocationClient=function(){function p(y){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.Global.XMLHttpRequest,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.MetadataService;if(h(this,p),!y)throw o.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=y,this._XMLHttpRequestCtor=F,this._metadataService=new E(this._settings)}return p.prototype.revoke=function(F,E){var C=this,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"access_token";if(!F)throw o.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(I!==f&&I!=g)throw o.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(_){if(_){o.Log.debug("TokenRevocationClient.revoke: Revoking "+I);var v=C._settings.client_id,b=C._settings.client_secret;return C._revoke(_,v,b,F,I)}if(E)throw o.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},p.prototype._revoke=function(F,E,C,I,_){var v=this;return new Promise(function(b,P){var B=new v._XMLHttpRequestCtor;B.open("POST",F),B.onload=function(){o.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",B.status),B.status===200?b():P(Error(B.statusText+" ("+B.status+")"))},B.onerror=function(){o.Log.debug("TokenRevocationClient.revoke: Network Error."),P("Network Error")};var L="client_id="+encodeURIComponent(E);C&&(L+="&client_secret="+encodeURIComponent(C)),L+="&token_type_hint="+encodeURIComponent(_),L+="&token="+encodeURIComponent(I),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),B.send(L)})},p}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupWindow=void 0;var o=function(){function c(h,f){for(var g=0;g<f.length;g++){var p=f[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,f,g){return f&&c(h.prototype,f),g&&c(h,g),h}}(),u=i(0);n.CordovaPopupWindow=function(){function c(h){var f=this;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,c),this._promise=new Promise(function(g,p){f._resolve=g,f._reject=p}),this.features=h.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=h.popupWindowTarget||"_blank",this.redirect_uri=h.startUrl,u.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return c.prototype._isInAppBrowserInstalled=function(f){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(g){return f.hasOwnProperty(g)})},c.prototype.navigate=function(f){if(f&&f.url){if(!window.cordova)return this._error("cordova is undefined");var g=window.cordova.require("cordova/plugin_list").metadata;if(this._isInAppBrowserInstalled(g)===!1)return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(f.url,this.target,this.features),this._popup?(u.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},c.prototype._loadStartCallback=function(f){f.url.indexOf(this.redirect_uri)===0&&this._success({url:f.url})},c.prototype._exitCallback=function(f){this._error(f)},c.prototype._success=function(f){this._cleanup(),u.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(f)},c.prototype._error=function(f){this._cleanup(),u.Log.error(f),this._reject(new Error(f))},c.prototype.close=function(){this._cleanup()},c.prototype._cleanup=function(){this._popup&&(u.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},o(c,[{key:"promise",get:function(){return this._promise}}]),c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var o=i(0),u=i(10),c=i(5),h=i(6),f=i(37),g=i(38),p=i(16),y=i(2),F=i(48),E=i(49),C=i(19),I=i(20),_=i(18),v=i(1),b=i(15),P=i(50);n.default={Version:P.Version,Log:o.Log,OidcClient:u.OidcClient,OidcClientSettings:c.OidcClientSettings,WebStorageStateStore:h.WebStorageStateStore,InMemoryWebStorage:f.InMemoryWebStorage,UserManager:g.UserManager,AccessTokenEvents:p.AccessTokenEvents,MetadataService:y.MetadataService,CordovaPopupNavigator:F.CordovaPopupNavigator,CordovaIFrameNavigator:E.CordovaIFrameNavigator,CheckSessionIFrame:C.CheckSessionIFrame,TokenRevocationClient:I.TokenRevocationClient,SessionMonitor:_.SessionMonitor,Global:v.Global,User:b.User},r.exports=n.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ClockService=function(){function o(){(function(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")})(this,o)}return o.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},o}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.ResponseValidator=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},u=i(0),c=i(2),h=i(25),f=i(11),g=i(12),p=i(4);function y(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}var F=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];n.ResponseValidator=function(){function E(C){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.MetadataService,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.UserInfoService,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:p.JoseUtil,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f.TokenClient;if(y(this,E),!C)throw u.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=C,this._metadataService=new I(this._settings),this._userInfoService=new _(this._settings),this._joseUtil=v,this._tokenClient=new b(this._settings)}return E.prototype.validateSigninResponse=function(I,_){var v=this;return u.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(I,_).then(function(b){return u.Log.debug("ResponseValidator.validateSigninResponse: state processed"),v._validateTokens(I,b).then(function(P){return u.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),v._processClaims(I,P).then(function(B){return u.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),B})})})},E.prototype.validateSignoutResponse=function(I,_){return I.id!==_.state?(u.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(u.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),_.state=I.data,_.error?(u.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",_.error),Promise.reject(new g.ErrorResponse(_))):Promise.resolve(_))},E.prototype._processSigninParams=function(I,_){if(I.id!==_.state)return u.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!I.client_id)return u.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!I.authority)return u.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==I.authority)return u.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=I.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==I.client_id)return u.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=I.client_id;return u.Log.debug("ResponseValidator._processSigninParams: state validated"),_.state=I.data,_.error?(u.Log.warn("ResponseValidator._processSigninParams: Response was error",_.error),Promise.reject(new g.ErrorResponse(_))):I.nonce&&!_.id_token?(u.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!I.nonce&&_.id_token?(u.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):I.code_verifier&&!_.code?(u.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!I.code_verifier&&_.code?(u.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(_.scope||(_.scope=I.scope),Promise.resolve(_))},E.prototype._processClaims=function(I,_){var v=this;if(_.isOpenIdConnect){if(u.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),_.profile=this._filterProtocolClaims(_.profile),I.skipUserInfo!==!0&&this._settings.loadUserInfo&&_.access_token)return u.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(_.access_token).then(function(b){return u.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),b.sub!==_.profile.sub?(u.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(_.profile=v._mergeClaims(_.profile,b),u.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",_.profile),_)});u.Log.debug("ResponseValidator._processClaims: not loading user info")}else u.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(_)},E.prototype._mergeClaims=function(I,_){var v=Object.assign({},I);for(var b in _){var P=_[b];Array.isArray(P)||(P=[P]);for(var B=0;B<P.length;B++){var L=P[B];v[b]?Array.isArray(v[b])?v[b].indexOf(L)<0&&v[b].push(L):v[b]!==L&&((L===void 0?"undefined":o(L))==="object"&&this._settings.mergeClaims?v[b]=this._mergeClaims(v[b],L):v[b]=[v[b],L]):v[b]=L}}return v},E.prototype._filterProtocolClaims=function(I){u.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",I);var _=Object.assign({},I);return this._settings._filterProtocolClaims?(F.forEach(function(v){delete _[v]}),u.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",_)):u.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),_},E.prototype._validateTokens=function(I,_){return _.code?(u.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(I,_)):_.id_token?_.access_token?(u.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(I,_)):(u.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(I,_)):(u.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(_))},E.prototype._processCode=function(I,_){var v=this,b={client_id:I.client_id,client_secret:I.client_secret,code:_.code,redirect_uri:I.redirect_uri,code_verifier:I.code_verifier};return I.extraTokenParams&&o(I.extraTokenParams)==="object"&&Object.assign(b,I.extraTokenParams),this._tokenClient.exchangeCode(b).then(function(P){for(var B in P)_[B]=P[B];return _.id_token?(u.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),v._validateIdTokenAttributes(I,_)):(u.Log.debug("ResponseValidator._processCode: token response successful, returning response"),_)})},E.prototype._validateIdTokenAttributes=function(I,_){var v=this;return this._metadataService.getIssuer().then(function(b){var P=I.client_id,B=v._settings.clockSkew;return u.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",B),v._settings.getEpochTime().then(function(L){return v._joseUtil.validateJwtAttributes(_.id_token,b,P,B,L).then(function(A){return I.nonce&&I.nonce!==A.nonce?(u.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):A.sub?(_.profile=A,_):(u.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},E.prototype._validateIdTokenAndAccessToken=function(I,_){var v=this;return this._validateIdToken(I,_).then(function(b){return v._validateAccessToken(b)})},E.prototype._getSigningKeyForJwt=function(I){var _=this;return this._metadataService.getSigningKeys().then(function(v){var b=I.header.kid;if(!v)return u.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));u.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var P=void 0;if(b)P=v.filter(function(B){return B.kid===b})[0];else{if((v=_._filterByAlg(v,I.header.alg)).length>1)return u.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));P=v[0]}return Promise.resolve(P)})},E.prototype._getSigningKeyForJwtWithSingleRetry=function(I){var _=this;return this._getSigningKeyForJwt(I).then(function(v){return v?Promise.resolve(v):(_._metadataService.resetSigningKeys(),_._getSigningKeyForJwt(I))})},E.prototype._validateIdToken=function(I,_){var v=this;if(!I.nonce)return u.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var b=this._joseUtil.parseJwt(_.id_token);return b&&b.header&&b.payload?I.nonce!==b.payload.nonce?(u.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(P){return u.Log.debug("ResponseValidator._validateIdToken: Received issuer"),v._getSigningKeyForJwtWithSingleRetry(b).then(function(B){if(!B)return u.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var L=I.client_id,A=v._settings.clockSkew;return u.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",A),v._joseUtil.validateJwt(_.id_token,B,P,L,A).then(function(){return u.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),b.payload.sub?(_.profile=b.payload,_):(u.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(u.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",b),Promise.reject(new Error("Failed to parse id_token")))},E.prototype._filterByAlg=function(I,_){var v=null;if(_.startsWith("RS"))v="RSA";else if(_.startsWith("PS"))v="PS";else{if(!_.startsWith("ES"))return u.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",_),[];v="EC"}return u.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",v),I=I.filter(function(b){return b.kty===v}),u.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",v,I.length),I},E.prototype._validateAccessToken=function(I){if(!I.profile)return u.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!I.profile.at_hash)return u.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!I.id_token)return u.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var _=this._joseUtil.parseJwt(I.id_token);if(!_||!_.header)return u.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",_),Promise.reject(new Error("Failed to parse id_token"));var v=_.header.alg;if(!v||v.length!==5)return u.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",v),Promise.reject(new Error("Unsupported alg: "+v));var b=v.substr(2,3);if(!b)return u.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",v,b),Promise.reject(new Error("Unsupported alg: "+v));if((b=parseInt(b))!==256&&b!==384&&b!==512)return u.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",v,b),Promise.reject(new Error("Unsupported alg: "+v));var P="sha"+b,B=this._joseUtil.hashString(I.access_token,P);if(!B)return u.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",P),Promise.reject(new Error("Failed to validate at_hash"));var L=B.substr(0,B.length/2),A=this._joseUtil.hexToBase64Url(L);return A!==I.profile.at_hash?(u.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",A,I.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(u.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(I))},E}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserInfoService=void 0;var o=i(7),u=i(2),c=i(0),h=i(4);function f(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}n.UserInfoService=function(){function g(p){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.JsonService,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.MetadataService,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:h.JoseUtil;if(f(this,g),!p)throw c.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=p,this._jsonService=new y(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new F(this._settings),this._joseUtil=E}return g.prototype.getClaims=function(y){var F=this;return y?this._metadataService.getUserInfoEndpoint().then(function(E){return c.Log.debug("UserInfoService.getClaims: received userinfo url",E),F._jsonService.getJson(E,y).then(function(C){return c.Log.debug("UserInfoService.getClaims: claims received",C),C})}):(c.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},g.prototype._getClaimsFromJwt=function(y){var F=this;try{var E=this._joseUtil.parseJwt(y.responseText);if(!E||!E.header||!E.payload)return c.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",E),Promise.reject(new Error("Failed to parse id_token"));var C=E.header.kid,I=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":I=this._metadataService.getIssuer();break;case"ANY":I=Promise.resolve(E.payload.iss);break;default:I=Promise.resolve(this._settings.userInfoJwtIssuer)}return I.then(function(_){return c.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+_),F._metadataService.getSigningKeys().then(function(v){if(!v)return c.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));c.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var b=void 0;if(C)b=v.filter(function(L){return L.kid===C})[0];else{if((v=F._filterByAlg(v,E.header.alg)).length>1)return c.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));b=v[0]}if(!b)return c.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var P=F._settings.client_id,B=F._settings.clockSkew;return c.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",B),F._joseUtil.validateJwt(y.responseText,b,_,P,B,void 0,!0).then(function(){return c.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),E.payload})})})}catch(_){return c.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",_.message),void reject(_)}},g.prototype._filterByAlg=function(y,F){var E=null;if(F.startsWith("RS"))E="RSA";else if(F.startsWith("PS"))E="PS";else{if(!F.startsWith("ES"))return c.Log.debug("UserInfoService._filterByAlg: alg not supported: ",F),[];E="EC"}return c.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",E),y=y.filter(function(C){return C.kty===E}),c.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",E,y.length),y},g}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.AllowedSigningAlgs=n.b64tohex=n.hextob64u=n.crypto=n.X509=n.KeyUtil=n.jws=void 0;var o=i(27);n.jws=o.jws,n.KeyUtil=o.KEYUTIL,n.X509=o.X509,n.crypto=o.crypto,n.hextob64u=o.hextob64u,n.b64tohex=o.b64tohex,n.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(r,n,i){(function(o){Object.defineProperty(n,"__esModule",{value:!0});var u,c,h,f,g,p,y,F,E,C,I,_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},v={userAgent:!1},b={},P=P||(u=Math,h=(c={}).lib={},f=h.Base=function(){function a(){}return{extend:function(l){a.prototype=this;var d=new a;return l&&d.mixIn(l),d.hasOwnProperty("init")||(d.init=function(){d.$super.init.apply(this,arguments)}),d.init.prototype=d,d.$super=this,d},create:function(){var l=this.extend();return l.init.apply(l,arguments),l},init:function(){},mixIn:function(l){for(var d in l)l.hasOwnProperty(d)&&(this[d]=l[d]);l.hasOwnProperty("toString")&&(this.toString=l.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),g=h.WordArray=f.extend({init:function(s,l){s=this.words=s||[],this.sigBytes=l??4*s.length},toString:function(s){return(s||y).stringify(this)},concat:function(s){var l=this.words,d=s.words,m=this.sigBytes,w=s.sigBytes;if(this.clamp(),m%4)for(var T=0;T<w;T++){var O=d[T>>>2]>>>24-T%4*8&255;l[m+T>>>2]|=O<<24-(m+T)%4*8}else for(T=0;T<w;T+=4)l[m+T>>>2]=d[T>>>2];return this.sigBytes+=w,this},clamp:function(){var s=this.words,l=this.sigBytes;s[l>>>2]&=4294967295<<32-l%4*8,s.length=u.ceil(l/4)},clone:function(){var s=f.clone.call(this);return s.words=this.words.slice(0),s},random:function(s){for(var l=[],d=0;d<s;d+=4)l.push(4294967296*u.random()|0);return new g.init(l,s)}}),p=c.enc={},y=p.Hex={stringify:function(s){for(var l=s.words,d=s.sigBytes,m=[],w=0;w<d;w++){var T=l[w>>>2]>>>24-w%4*8&255;m.push((T>>>4).toString(16)),m.push((15&T).toString(16))}return m.join("")},parse:function(s){for(var l=s.length,d=[],m=0;m<l;m+=2)d[m>>>3]|=parseInt(s.substr(m,2),16)<<24-m%8*4;return new g.init(d,l/2)}},F=p.Latin1={stringify:function(s){for(var l=s.words,d=s.sigBytes,m=[],w=0;w<d;w++){var T=l[w>>>2]>>>24-w%4*8&255;m.push(String.fromCharCode(T))}return m.join("")},parse:function(s){for(var l=s.length,d=[],m=0;m<l;m++)d[m>>>2]|=(255&s.charCodeAt(m))<<24-m%4*8;return new g.init(d,l)}},E=p.Utf8={stringify:function(s){try{return decodeURIComponent(escape(F.stringify(s)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(s){return F.parse(unescape(encodeURIComponent(s)))}},C=h.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(s){typeof s=="string"&&(s=E.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes},_process:function(s){var l=this._data,d=l.words,m=l.sigBytes,w=this.blockSize,T=m/(4*w),O=(T=s?u.ceil(T):u.max((0|T)-this._minBufferSize,0))*w,N=u.min(4*O,m);if(O){for(var D=0;D<O;D+=w)this._doProcessBlock(d,D);var j=d.splice(0,O);l.sigBytes-=N}return new g.init(j,N)},clone:function(){var s=f.clone.call(this);return s._data=this._data.clone(),s},_minBufferSize:0}),h.Hasher=C.extend({cfg:f.extend(),init:function(s){this.cfg=this.cfg.extend(s),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(s){return this._append(s),this._process(),this},finalize:function(s){return s&&this._append(s),this._doFinalize()},blockSize:16,_createHelper:function(s){return function(l,d){return new s.init(d).finalize(l)}},_createHmacHelper:function(s){return function(l,d){return new I.HMAC.init(s,d).finalize(l)}}}),I=c.algo={},c);(function(a){var s,l=(s=P).lib,d=l.Base,m=l.WordArray;(s=s.x64={}).Word=d.extend({init:function(T,O){this.high=T,this.low=O}}),s.WordArray=d.extend({init:function(T,O){T=this.words=T||[],this.sigBytes=O??8*T.length},toX32:function(){for(var T=this.words,O=T.length,N=[],D=0;D<O;D++){var j=T[D];N.push(j.high),N.push(j.low)}return m.create(N,this.sigBytes)},clone:function(){for(var T=d.clone.call(this),O=T.words=this.words.slice(0),N=O.length,D=0;D<N;D++)O[D]=O[D].clone();return T}})})(),function(){var a=P,s=a.lib.WordArray;a.enc.Base64={stringify:function(d){var m=d.words,w=d.sigBytes,T=this._map;d.clamp(),d=[];for(var O=0;O<w;O+=3)for(var N=(m[O>>>2]>>>24-O%4*8&255)<<16|(m[O+1>>>2]>>>24-(O+1)%4*8&255)<<8|m[O+2>>>2]>>>24-(O+2)%4*8&255,D=0;4>D&&O+.75*D<w;D++)d.push(T.charAt(N>>>6*(3-D)&63));if(m=T.charAt(64))for(;d.length%4;)d.push(m);return d.join("")},parse:function(d){var m=d.length,w=this._map;(T=w.charAt(64))&&(T=d.indexOf(T))!=-1&&(m=T);for(var T=[],O=0,N=0;N<m;N++)if(N%4){var D=w.indexOf(d.charAt(N-1))<<N%4*2,j=w.indexOf(d.charAt(N))>>>6-N%4*2;T[O>>>2]|=(D|j)<<24-O%4*8,O++}return s.create(T,O)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){for(var s=P,l=(m=s.lib).WordArray,d=m.Hasher,m=s.algo,w=[],T=[],O=function(Z){return 4294967296*(Z-(0|Z))|0},N=2,D=0;64>D;){var j;e:{j=N;for(var H=a.sqrt(j),z=2;z<=H;z++)if(!(j%z)){j=!1;break e}j=!0}j&&(8>D&&(w[D]=O(a.pow(N,.5))),T[D]=O(a.pow(N,1/3)),D++),N++}var J=[];m=m.SHA256=d.extend({_doReset:function(){this._hash=new l.init(w.slice(0))},_doProcessBlock:function(Z,te){for(var k=this._hash.words,U=k[0],$=k[1],V=k[2],Y=k[3],re=k[4],ge=k[5],se=k[6],Te=k[7],pe=0;64>pe;pe++){if(16>pe)J[pe]=0|Z[te+pe];else{var _e=J[pe-15],Ke=J[pe-2];J[pe]=((_e<<25|_e>>>7)^(_e<<14|_e>>>18)^_e>>>3)+J[pe-7]+((Ke<<15|Ke>>>17)^(Ke<<13|Ke>>>19)^Ke>>>10)+J[pe-16]}_e=Te+((re<<26|re>>>6)^(re<<21|re>>>11)^(re<<7|re>>>25))+(re&ge^~re&se)+T[pe]+J[pe],Ke=((U<<30|U>>>2)^(U<<19|U>>>13)^(U<<10|U>>>22))+(U&$^U&V^$&V),Te=se,se=ge,ge=re,re=Y+_e|0,Y=V,V=$,$=U,U=_e+Ke|0}k[0]=k[0]+U|0,k[1]=k[1]+$|0,k[2]=k[2]+V|0,k[3]=k[3]+Y|0,k[4]=k[4]+re|0,k[5]=k[5]+ge|0,k[6]=k[6]+se|0,k[7]=k[7]+Te|0},_doFinalize:function(){var Z=this._data,te=Z.words,k=8*this._nDataBytes,U=8*Z.sigBytes;return te[U>>>5]|=128<<24-U%32,te[14+(U+64>>>9<<4)]=a.floor(k/4294967296),te[15+(U+64>>>9<<4)]=k,Z.sigBytes=4*te.length,this._process(),this._hash},clone:function(){var Z=d.clone.call(this);return Z._hash=this._hash.clone(),Z}}),s.SHA256=d._createHelper(m),s.HmacSHA256=d._createHmacHelper(m)}(Math),function(){function a(){return d.create.apply(d,arguments)}for(var s=P,l=s.lib.Hasher,d=(w=s.x64).Word,m=w.WordArray,w=s.algo,T=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],O=[],N=0;80>N;N++)O[N]=a();w=w.SHA512=l.extend({_doReset:function(){this._hash=new m.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(j,H){for(var z=($=this._hash.words)[0],J=$[1],G=$[2],Z=$[3],te=$[4],k=$[5],U=$[6],$=$[7],V=z.high,Y=z.low,re=J.high,ge=J.low,se=G.high,Te=G.low,pe=Z.high,_e=Z.low,Ke=te.high,Xe=te.low,qe=k.high,Yt=k.low,jt=U.high,Kt=U.low,pt=$.high,bt=$.low,Rt=V,Vt=Y,oo=re,li=ge,so=se,ci=Te,Fu=pe,ao=_e,kr=Ke,mr=Xe,Ss=qe,uo=Yt,Es=jt,lo=Kt,ku=pt,co=bt,Tr=0;80>Tr;Tr++){var Hn=O[Tr];if(16>Tr)var Yr=Hn.high=0|j[H+2*Tr],Ze=Hn.low=0|j[H+2*Tr+1];else{Yr=((Ze=(Yr=O[Tr-15]).high)>>>1|(Xr=Yr.low)<<31)^(Ze>>>8|Xr<<24)^Ze>>>7;var Xr=(Xr>>>1|Ze<<31)^(Xr>>>8|Ze<<24)^(Xr>>>7|Ze<<25),di=((Ze=(di=O[Tr-2]).high)>>>19|(xt=di.low)<<13)^(Ze<<3|xt>>>29)^Ze>>>6,xt=(xt>>>19|Ze<<13)^(xt<<3|Ze>>>29)^(xt>>>6|Ze<<26),Tu=(Ze=O[Tr-7]).high,$n=(Kn=O[Tr-16]).high,Kn=Kn.low;Yr=(Yr=(Yr=Yr+Tu+((Ze=Xr+Ze.low)>>>0<Xr>>>0?1:0))+di+((Ze=Ze+xt)>>>0<xt>>>0?1:0))+$n+((Ze=Ze+Kn)>>>0<Kn>>>0?1:0),Hn.high=Yr,Hn.low=Ze}Tu=kr&Ss^~kr&Es,Kn=mr&uo^~mr&lo,Hn=Rt&oo^Rt&so^oo&so;var ey=Vt&li^Vt&ci^li&ci,ty=(Xr=(Rt>>>28|Vt<<4)^(Rt<<30|Vt>>>2)^(Rt<<25|Vt>>>7),di=(Vt>>>28|Rt<<4)^(Vt<<30|Rt>>>2)^(Vt<<25|Rt>>>7),(xt=T[Tr]).high),zd=xt.low;$n=ku+((kr>>>14|mr<<18)^(kr>>>18|mr<<14)^(kr<<23|mr>>>9))+((xt=co+((mr>>>14|kr<<18)^(mr>>>18|kr<<14)^(mr<<23|kr>>>9)))>>>0<co>>>0?1:0),ku=Es,co=lo,Es=Ss,lo=uo,Ss=kr,uo=mr,kr=Fu+($n=($n=($n=$n+Tu+((xt=xt+Kn)>>>0<Kn>>>0?1:0))+ty+((xt=xt+zd)>>>0<zd>>>0?1:0))+Yr+((xt=xt+Ze)>>>0<Ze>>>0?1:0))+((mr=ao+xt|0)>>>0<ao>>>0?1:0)|0,Fu=so,ao=ci,so=oo,ci=li,oo=Rt,li=Vt,Rt=$n+(Hn=Xr+Hn+((Ze=di+ey)>>>0<di>>>0?1:0))+((Vt=xt+Ze|0)>>>0<xt>>>0?1:0)|0}Y=z.low=Y+Vt,z.high=V+Rt+(Y>>>0<Vt>>>0?1:0),ge=J.low=ge+li,J.high=re+oo+(ge>>>0<li>>>0?1:0),Te=G.low=Te+ci,G.high=se+so+(Te>>>0<ci>>>0?1:0),_e=Z.low=_e+ao,Z.high=pe+Fu+(_e>>>0<ao>>>0?1:0),Xe=te.low=Xe+mr,te.high=Ke+kr+(Xe>>>0<mr>>>0?1:0),Yt=k.low=Yt+uo,k.high=qe+Ss+(Yt>>>0<uo>>>0?1:0),Kt=U.low=Kt+lo,U.high=jt+Es+(Kt>>>0<lo>>>0?1:0),bt=$.low=bt+co,$.high=pt+ku+(bt>>>0<co>>>0?1:0)},_doFinalize:function(){var j=this._data,H=j.words,z=8*this._nDataBytes,J=8*j.sigBytes;return H[J>>>5]|=128<<24-J%32,H[30+(J+128>>>10<<5)]=Math.floor(z/4294967296),H[31+(J+128>>>10<<5)]=z,j.sigBytes=4*H.length,this._process(),this._hash.toX32()},clone:function(){var j=l.clone.call(this);return j._hash=this._hash.clone(),j},blockSize:32}),s.SHA512=l._createHelper(w),s.HmacSHA512=l._createHmacHelper(w)}(),function(){var a=P,s=(m=a.x64).Word,l=m.WordArray,d=(m=a.algo).SHA512,m=m.SHA384=d.extend({_doReset:function(){this._hash=new l.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var T=d._doFinalize.call(this);return T.sigBytes-=16,T}});a.SHA384=d._createHelper(m),a.HmacSHA384=d._createHmacHelper(m)}();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var B,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function A(a){var s,l,d="";for(s=0;s+3<=a.length;s+=3)l=parseInt(a.substring(s,s+3),16),d+=L.charAt(l>>6)+L.charAt(63&l);for(s+1==a.length?(l=parseInt(a.substring(s,s+1),16),d+=L.charAt(l<<2)):s+2==a.length&&(l=parseInt(a.substring(s,s+2),16),d+=L.charAt(l>>2)+L.charAt((3&l)<<4)),"=";(3&d.length)>0;)d+="=";return d}function Q(a){var s,l,d,m="",w=0;for(s=0;s<a.length&&a.charAt(s)!="=";++s)(d=L.indexOf(a.charAt(s)))<0||(w==0?(m+=ze(d>>2),l=3&d,w=1):w==1?(m+=ze(l<<2|d>>4),l=15&d,w=2):w==2?(m+=ze(l),m+=ze(d>>2),l=3&d,w=3):(m+=ze(l<<2|d>>4),m+=ze(15&d),w=0));return w==1&&(m+=ze(l<<2)),m}function ie(a){var s,l=Q(a),d=new Array;for(s=0;2*s<l.length;++s)d[s]=parseInt(l.substring(2*s,2*s+2),16);return d}function M(a,s,l){a!=null&&(typeof a=="number"?this.fromNumber(a,s,l):s==null&&typeof a!="string"?this.fromString(a,256):this.fromString(a,s))}function oe(){return new M(null)}v.appName=="Microsoft Internet Explorer"?(M.prototype.am=function(s,l,d,m,w,T){for(var O=32767&l,N=l>>15;--T>=0;){var D=32767&this[s],j=this[s++]>>15,H=N*D+j*O;w=((D=O*D+((32767&H)<<15)+d[m]+(1073741823&w))>>>30)+(H>>>15)+N*j+(w>>>30),d[m++]=1073741823&D}return w},B=30):v.appName!="Netscape"?(M.prototype.am=function(s,l,d,m,w,T){for(;--T>=0;){var O=l*this[s++]+d[m]+w;w=Math.floor(O/67108864),d[m++]=67108863&O}return w},B=26):(M.prototype.am=function(s,l,d,m,w,T){for(var O=16383&l,N=l>>14;--T>=0;){var D=16383&this[s],j=this[s++]>>14,H=N*D+j*O;w=((D=O*D+((16383&H)<<14)+d[m]+w)>>28)+(H>>14)+N*j,d[m++]=268435455&D}return w},B=28),M.prototype.DB=B,M.prototype.DM=(1<<B)-1,M.prototype.DV=1<<B,M.prototype.FV=Math.pow(2,52),M.prototype.F1=52-B,M.prototype.F2=2*B-52;var ke,Fe,ft=new Array;for(ke=48,Fe=0;Fe<=9;++Fe)ft[ke++]=Fe;for(ke=97,Fe=10;Fe<36;++Fe)ft[ke++]=Fe;for(ke=65,Fe=10;Fe<36;++Fe)ft[ke++]=Fe;function ze(a){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(a)}function st(a,s){var l=ft[a.charCodeAt(s)];return l??-1}function Me(a){var s=oe();return s.fromInt(a),s}function le(a){var s,l=1;return(s=a>>>16)!=0&&(a=s,l+=16),(s=a>>8)!=0&&(a=s,l+=8),(s=a>>4)!=0&&(a=s,l+=4),(s=a>>2)!=0&&(a=s,l+=2),(s=a>>1)!=0&&(a=s,l+=1),l}function ue(a){this.m=a}function ce(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function Se(a,s){return a&s}function be(a,s){return a|s}function at(a,s){return a^s}function Be(a,s){return a&~s}function ht(a){if(a==0)return-1;var s=0;return!(65535&a)&&(a>>=16,s+=16),!(255&a)&&(a>>=8,s+=8),!(15&a)&&(a>>=4,s+=4),!(3&a)&&(a>>=2,s+=2),!(1&a)&&++s,s}function tt(a){for(var s=0;a!=0;)a&=a-1,++s;return s}function He(){}function mt(a){return a}function $e(a){this.r2=oe(),this.q3=oe(),M.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}ue.prototype.convert=function(s){return s.s<0||s.compareTo(this.m)>=0?s.mod(this.m):s},ue.prototype.revert=function(s){return s},ue.prototype.reduce=function(s){s.divRemTo(this.m,null,s)},ue.prototype.mulTo=function(s,l,d){s.multiplyTo(l,d),this.reduce(d)},ue.prototype.sqrTo=function(s,l){s.squareTo(l),this.reduce(l)},ce.prototype.convert=function(s){var l=oe();return s.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),s.s<0&&l.compareTo(M.ZERO)>0&&this.m.subTo(l,l),l},ce.prototype.revert=function(s){var l=oe();return s.copyTo(l),this.reduce(l),l},ce.prototype.reduce=function(s){for(;s.t<=this.mt2;)s[s.t++]=0;for(var l=0;l<this.m.t;++l){var d=32767&s[l],m=d*this.mpl+((d*this.mph+(s[l]>>15)*this.mpl&this.um)<<15)&s.DM;for(s[d=l+this.m.t]+=this.m.am(0,m,s,l,0,this.m.t);s[d]>=s.DV;)s[d]-=s.DV,s[++d]++}s.clamp(),s.drShiftTo(this.m.t,s),s.compareTo(this.m)>=0&&s.subTo(this.m,s)},ce.prototype.mulTo=function(s,l,d){s.multiplyTo(l,d),this.reduce(d)},ce.prototype.sqrTo=function(s,l){s.squareTo(l),this.reduce(l)},M.prototype.copyTo=function(s){for(var l=this.t-1;l>=0;--l)s[l]=this[l];s.t=this.t,s.s=this.s},M.prototype.fromInt=function(s){this.t=1,this.s=s<0?-1:0,s>0?this[0]=s:s<-1?this[0]=s+this.DV:this.t=0},M.prototype.fromString=function(s,l){var d;if(l==16)d=4;else if(l==8)d=3;else if(l==256)d=8;else if(l==2)d=1;else if(l==32)d=5;else{if(l!=4)return void this.fromRadix(s,l);d=2}this.t=0,this.s=0;for(var m=s.length,w=!1,T=0;--m>=0;){var O=d==8?255&s[m]:st(s,m);O<0?s.charAt(m)=="-"&&(w=!0):(w=!1,T==0?this[this.t++]=O:T+d>this.DB?(this[this.t-1]|=(O&(1<<this.DB-T)-1)<<T,this[this.t++]=O>>this.DB-T):this[this.t-1]|=O<<T,(T+=d)>=this.DB&&(T-=this.DB))}d==8&&128&s[0]&&(this.s=-1,T>0&&(this[this.t-1]|=(1<<this.DB-T)-1<<T)),this.clamp(),w&&M.ZERO.subTo(this,this)},M.prototype.clamp=function(){for(var s=this.s&this.DM;this.t>0&&this[this.t-1]==s;)--this.t},M.prototype.dlShiftTo=function(s,l){var d;for(d=this.t-1;d>=0;--d)l[d+s]=this[d];for(d=s-1;d>=0;--d)l[d]=0;l.t=this.t+s,l.s=this.s},M.prototype.drShiftTo=function(s,l){for(var d=s;d<this.t;++d)l[d-s]=this[d];l.t=Math.max(this.t-s,0),l.s=this.s},M.prototype.lShiftTo=function(s,l){var d,m=s%this.DB,w=this.DB-m,T=(1<<w)-1,O=Math.floor(s/this.DB),N=this.s<<m&this.DM;for(d=this.t-1;d>=0;--d)l[d+O+1]=this[d]>>w|N,N=(this[d]&T)<<m;for(d=O-1;d>=0;--d)l[d]=0;l[O]=N,l.t=this.t+O+1,l.s=this.s,l.clamp()},M.prototype.rShiftTo=function(s,l){l.s=this.s;var d=Math.floor(s/this.DB);if(d>=this.t)l.t=0;else{var m=s%this.DB,w=this.DB-m,T=(1<<m)-1;l[0]=this[d]>>m;for(var O=d+1;O<this.t;++O)l[O-d-1]|=(this[O]&T)<<w,l[O-d]=this[O]>>m;m>0&&(l[this.t-d-1]|=(this.s&T)<<w),l.t=this.t-d,l.clamp()}},M.prototype.subTo=function(s,l){for(var d=0,m=0,w=Math.min(s.t,this.t);d<w;)m+=this[d]-s[d],l[d++]=m&this.DM,m>>=this.DB;if(s.t<this.t){for(m-=s.s;d<this.t;)m+=this[d],l[d++]=m&this.DM,m>>=this.DB;m+=this.s}else{for(m+=this.s;d<s.t;)m-=s[d],l[d++]=m&this.DM,m>>=this.DB;m-=s.s}l.s=m<0?-1:0,m<-1?l[d++]=this.DV+m:m>0&&(l[d++]=m),l.t=d,l.clamp()},M.prototype.multiplyTo=function(s,l){var d=this.abs(),m=s.abs(),w=d.t;for(l.t=w+m.t;--w>=0;)l[w]=0;for(w=0;w<m.t;++w)l[w+d.t]=d.am(0,m[w],l,w,0,d.t);l.s=0,l.clamp(),this.s!=s.s&&M.ZERO.subTo(l,l)},M.prototype.squareTo=function(s){for(var l=this.abs(),d=s.t=2*l.t;--d>=0;)s[d]=0;for(d=0;d<l.t-1;++d){var m=l.am(d,l[d],s,2*d,0,1);(s[d+l.t]+=l.am(d+1,2*l[d],s,2*d+1,m,l.t-d-1))>=l.DV&&(s[d+l.t]-=l.DV,s[d+l.t+1]=1)}s.t>0&&(s[s.t-1]+=l.am(d,l[d],s,2*d,0,1)),s.s=0,s.clamp()},M.prototype.divRemTo=function(s,l,d){var m=s.abs();if(!(m.t<=0)){var w=this.abs();if(w.t<m.t)return l!=null&&l.fromInt(0),void(d!=null&&this.copyTo(d));d==null&&(d=oe());var T=oe(),O=this.s,N=s.s,D=this.DB-le(m[m.t-1]);D>0?(m.lShiftTo(D,T),w.lShiftTo(D,d)):(m.copyTo(T),w.copyTo(d));var j=T.t,H=T[j-1];if(H!=0){var z=H*(1<<this.F1)+(j>1?T[j-2]>>this.F2:0),J=this.FV/z,G=(1<<this.F1)/z,Z=1<<this.F2,te=d.t,k=te-j,U=l??oe();for(T.dlShiftTo(k,U),d.compareTo(U)>=0&&(d[d.t++]=1,d.subTo(U,d)),M.ONE.dlShiftTo(j,U),U.subTo(T,T);T.t<j;)T[T.t++]=0;for(;--k>=0;){var $=d[--te]==H?this.DM:Math.floor(d[te]*J+(d[te-1]+Z)*G);if((d[te]+=T.am(0,$,d,k,0,j))<$)for(T.dlShiftTo(k,U),d.subTo(U,d);d[te]<--$;)d.subTo(U,d)}l!=null&&(d.drShiftTo(j,l),O!=N&&M.ZERO.subTo(l,l)),d.t=j,d.clamp(),D>0&&d.rShiftTo(D,d),O<0&&M.ZERO.subTo(d,d)}}},M.prototype.invDigit=function(){if(this.t<1)return 0;var s=this[0];if(!(1&s))return 0;var l=3&s;return(l=(l=(l=(l=l*(2-(15&s)*l)&15)*(2-(255&s)*l)&255)*(2-((65535&s)*l&65535))&65535)*(2-s*l%this.DV)%this.DV)>0?this.DV-l:-l},M.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},M.prototype.exp=function(s,l){if(s>4294967295||s<1)return M.ONE;var d=oe(),m=oe(),w=l.convert(this),T=le(s)-1;for(w.copyTo(d);--T>=0;)if(l.sqrTo(d,m),(s&1<<T)>0)l.mulTo(m,w,d);else{var O=d;d=m,m=O}return l.revert(d)},M.prototype.toString=function(s){if(this.s<0)return"-"+this.negate().toString(s);var l;if(s==16)l=4;else if(s==8)l=3;else if(s==2)l=1;else if(s==32)l=5;else{if(s!=4)return this.toRadix(s);l=2}var d,m=(1<<l)-1,w=!1,T="",O=this.t,N=this.DB-O*this.DB%l;if(O-- >0)for(N<this.DB&&(d=this[O]>>N)>0&&(w=!0,T=ze(d));O>=0;)N<l?(d=(this[O]&(1<<N)-1)<<l-N,d|=this[--O]>>(N+=this.DB-l)):(d=this[O]>>(N-=l)&m,N<=0&&(N+=this.DB,--O)),d>0&&(w=!0),w&&(T+=ze(d));return w?T:"0"},M.prototype.negate=function(){var s=oe();return M.ZERO.subTo(this,s),s},M.prototype.abs=function(){return this.s<0?this.negate():this},M.prototype.compareTo=function(s){var l=this.s-s.s;if(l!=0)return l;var d=this.t;if((l=d-s.t)!=0)return this.s<0?-l:l;for(;--d>=0;)if((l=this[d]-s[d])!=0)return l;return 0},M.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+le(this[this.t-1]^this.s&this.DM)},M.prototype.mod=function(s){var l=oe();return this.abs().divRemTo(s,null,l),this.s<0&&l.compareTo(M.ZERO)>0&&s.subTo(l,l),l},M.prototype.modPowInt=function(s,l){var d;return d=s<256||l.isEven()?new ue(l):new ce(l),this.exp(s,d)},M.ZERO=Me(0),M.ONE=Me(1),He.prototype.convert=mt,He.prototype.revert=mt,He.prototype.mulTo=function(s,l,d){s.multiplyTo(l,d)},He.prototype.sqrTo=function(s,l){s.squareTo(l)},$e.prototype.convert=function(s){if(s.s<0||s.t>2*this.m.t)return s.mod(this.m);if(s.compareTo(this.m)<0)return s;var l=oe();return s.copyTo(l),this.reduce(l),l},$e.prototype.revert=function(s){return s},$e.prototype.reduce=function(s){for(s.drShiftTo(this.m.t-1,this.r2),s.t>this.m.t+1&&(s.t=this.m.t+1,s.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);s.compareTo(this.r2)<0;)s.dAddOffset(1,this.m.t+1);for(s.subTo(this.r2,s);s.compareTo(this.m)>=0;)s.subTo(this.m,s)},$e.prototype.mulTo=function(s,l,d){s.multiplyTo(l,d),this.reduce(d)},$e.prototype.sqrTo=function(s,l){s.squareTo(l),this.reduce(l)};var De=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],W=(1<<26)/De[De.length-1];/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function S(){this.i=0,this.j=0,this.S=new Array}M.prototype.chunkSize=function(s){return Math.floor(Math.LN2*this.DB/Math.log(s))},M.prototype.toRadix=function(s){if(s==null&&(s=10),this.signum()==0||s<2||s>36)return"0";var l=this.chunkSize(s),d=Math.pow(s,l),m=Me(d),w=oe(),T=oe(),O="";for(this.divRemTo(m,w,T);w.signum()>0;)O=(d+T.intValue()).toString(s).substr(1)+O,w.divRemTo(m,w,T);return T.intValue().toString(s)+O},M.prototype.fromRadix=function(s,l){this.fromInt(0),l==null&&(l=10);for(var d=this.chunkSize(l),m=Math.pow(l,d),w=!1,T=0,O=0,N=0;N<s.length;++N){var D=st(s,N);D<0?s.charAt(N)=="-"&&this.signum()==0&&(w=!0):(O=l*O+D,++T>=d&&(this.dMultiply(m),this.dAddOffset(O,0),T=0,O=0))}T>0&&(this.dMultiply(Math.pow(l,T)),this.dAddOffset(O,0)),w&&M.ZERO.subTo(this,this)},M.prototype.fromNumber=function(s,l,d){if(typeof l=="number")if(s<2)this.fromInt(1);else for(this.fromNumber(s,d),this.testBit(s-1)||this.bitwiseTo(M.ONE.shiftLeft(s-1),be,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(l);)this.dAddOffset(2,0),this.bitLength()>s&&this.subTo(M.ONE.shiftLeft(s-1),this);else{var m=new Array,w=7&s;m.length=1+(s>>3),l.nextBytes(m),w>0?m[0]&=(1<<w)-1:m[0]=0,this.fromString(m,256)}},M.prototype.bitwiseTo=function(s,l,d){var m,w,T=Math.min(s.t,this.t);for(m=0;m<T;++m)d[m]=l(this[m],s[m]);if(s.t<this.t){for(w=s.s&this.DM,m=T;m<this.t;++m)d[m]=l(this[m],w);d.t=this.t}else{for(w=this.s&this.DM,m=T;m<s.t;++m)d[m]=l(w,s[m]);d.t=s.t}d.s=l(this.s,s.s),d.clamp()},M.prototype.changeBit=function(s,l){var d=M.ONE.shiftLeft(s);return this.bitwiseTo(d,l,d),d},M.prototype.addTo=function(s,l){for(var d=0,m=0,w=Math.min(s.t,this.t);d<w;)m+=this[d]+s[d],l[d++]=m&this.DM,m>>=this.DB;if(s.t<this.t){for(m+=s.s;d<this.t;)m+=this[d],l[d++]=m&this.DM,m>>=this.DB;m+=this.s}else{for(m+=this.s;d<s.t;)m+=s[d],l[d++]=m&this.DM,m>>=this.DB;m+=s.s}l.s=m<0?-1:0,m>0?l[d++]=m:m<-1&&(l[d++]=this.DV+m),l.t=d,l.clamp()},M.prototype.dMultiply=function(s){this[this.t]=this.am(0,s-1,this,0,0,this.t),++this.t,this.clamp()},M.prototype.dAddOffset=function(s,l){if(s!=0){for(;this.t<=l;)this[this.t++]=0;for(this[l]+=s;this[l]>=this.DV;)this[l]-=this.DV,++l>=this.t&&(this[this.t++]=0),++this[l]}},M.prototype.multiplyLowerTo=function(s,l,d){var m,w=Math.min(this.t+s.t,l);for(d.s=0,d.t=w;w>0;)d[--w]=0;for(m=d.t-this.t;w<m;++w)d[w+this.t]=this.am(0,s[w],d,w,0,this.t);for(m=Math.min(s.t,l);w<m;++w)this.am(0,s[w],d,w,0,l-w);d.clamp()},M.prototype.multiplyUpperTo=function(s,l,d){--l;var m=d.t=this.t+s.t-l;for(d.s=0;--m>=0;)d[m]=0;for(m=Math.max(l-this.t,0);m<s.t;++m)d[this.t+m-l]=this.am(l-m,s[m],d,0,0,this.t+m-l);d.clamp(),d.drShiftTo(1,d)},M.prototype.modInt=function(s){if(s<=0)return 0;var l=this.DV%s,d=this.s<0?s-1:0;if(this.t>0)if(l==0)d=this[0]%s;else for(var m=this.t-1;m>=0;--m)d=(l*d+this[m])%s;return d},M.prototype.millerRabin=function(s){var l=this.subtract(M.ONE),d=l.getLowestSetBit();if(d<=0)return!1;var m=l.shiftRight(d);(s=s+1>>1)>De.length&&(s=De.length);for(var w=oe(),T=0;T<s;++T){w.fromInt(De[Math.floor(Math.random()*De.length)]);var O=w.modPow(m,this);if(O.compareTo(M.ONE)!=0&&O.compareTo(l)!=0){for(var N=1;N++<d&&O.compareTo(l)!=0;)if((O=O.modPowInt(2,this)).compareTo(M.ONE)==0)return!1;if(O.compareTo(l)!=0)return!1}}return!0},M.prototype.clone=function(){var s=oe();return this.copyTo(s),s},M.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},M.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},M.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},M.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},M.prototype.toByteArray=function(){var s=this.t,l=new Array;l[0]=this.s;var d,m=this.DB-s*this.DB%8,w=0;if(s-- >0)for(m<this.DB&&(d=this[s]>>m)!=(this.s&this.DM)>>m&&(l[w++]=d|this.s<<this.DB-m);s>=0;)m<8?(d=(this[s]&(1<<m)-1)<<8-m,d|=this[--s]>>(m+=this.DB-8)):(d=this[s]>>(m-=8)&255,m<=0&&(m+=this.DB,--s)),128&d&&(d|=-256),w==0&&(128&this.s)!=(128&d)&&++w,(w>0||d!=this.s)&&(l[w++]=d);return l},M.prototype.equals=function(s){return this.compareTo(s)==0},M.prototype.min=function(s){return this.compareTo(s)<0?this:s},M.prototype.max=function(s){return this.compareTo(s)>0?this:s},M.prototype.and=function(s){var l=oe();return this.bitwiseTo(s,Se,l),l},M.prototype.or=function(s){var l=oe();return this.bitwiseTo(s,be,l),l},M.prototype.xor=function(s){var l=oe();return this.bitwiseTo(s,at,l),l},M.prototype.andNot=function(s){var l=oe();return this.bitwiseTo(s,Be,l),l},M.prototype.not=function(){for(var s=oe(),l=0;l<this.t;++l)s[l]=this.DM&~this[l];return s.t=this.t,s.s=~this.s,s},M.prototype.shiftLeft=function(s){var l=oe();return s<0?this.rShiftTo(-s,l):this.lShiftTo(s,l),l},M.prototype.shiftRight=function(s){var l=oe();return s<0?this.lShiftTo(-s,l):this.rShiftTo(s,l),l},M.prototype.getLowestSetBit=function(){for(var s=0;s<this.t;++s)if(this[s]!=0)return s*this.DB+ht(this[s]);return this.s<0?this.t*this.DB:-1},M.prototype.bitCount=function(){for(var s=0,l=this.s&this.DM,d=0;d<this.t;++d)s+=tt(this[d]^l);return s},M.prototype.testBit=function(s){var l=Math.floor(s/this.DB);return l>=this.t?this.s!=0:(this[l]&1<<s%this.DB)!=0},M.prototype.setBit=function(s){return this.changeBit(s,be)},M.prototype.clearBit=function(s){return this.changeBit(s,Be)},M.prototype.flipBit=function(s){return this.changeBit(s,at)},M.prototype.add=function(s){var l=oe();return this.addTo(s,l),l},M.prototype.subtract=function(s){var l=oe();return this.subTo(s,l),l},M.prototype.multiply=function(s){var l=oe();return this.multiplyTo(s,l),l},M.prototype.divide=function(s){var l=oe();return this.divRemTo(s,l,null),l},M.prototype.remainder=function(s){var l=oe();return this.divRemTo(s,null,l),l},M.prototype.divideAndRemainder=function(s){var l=oe(),d=oe();return this.divRemTo(s,l,d),new Array(l,d)},M.prototype.modPow=function(s,l){var d,m,w=s.bitLength(),T=Me(1);if(w<=0)return T;d=w<18?1:w<48?3:w<144?4:w<768?5:6,m=w<8?new ue(l):l.isEven()?new $e(l):new ce(l);var O=new Array,N=3,D=d-1,j=(1<<d)-1;if(O[1]=m.convert(this),d>1){var H=oe();for(m.sqrTo(O[1],H);N<=j;)O[N]=oe(),m.mulTo(H,O[N-2],O[N]),N+=2}var z,J,G=s.t-1,Z=!0,te=oe();for(w=le(s[G])-1;G>=0;){for(w>=D?z=s[G]>>w-D&j:(z=(s[G]&(1<<w+1)-1)<<D-w,G>0&&(z|=s[G-1]>>this.DB+w-D)),N=d;!(1&z);)z>>=1,--N;if((w-=N)<0&&(w+=this.DB,--G),Z)O[z].copyTo(T),Z=!1;else{for(;N>1;)m.sqrTo(T,te),m.sqrTo(te,T),N-=2;N>0?m.sqrTo(T,te):(J=T,T=te,te=J),m.mulTo(te,O[z],T)}for(;G>=0&&!(s[G]&1<<w);)m.sqrTo(T,te),J=T,T=te,te=J,--w<0&&(w=this.DB-1,--G)}return m.revert(T)},M.prototype.modInverse=function(s){var l=s.isEven();if(this.isEven()&&l||s.signum()==0)return M.ZERO;for(var d=s.clone(),m=this.clone(),w=Me(1),T=Me(0),O=Me(0),N=Me(1);d.signum()!=0;){for(;d.isEven();)d.rShiftTo(1,d),l?(w.isEven()&&T.isEven()||(w.addTo(this,w),T.subTo(s,T)),w.rShiftTo(1,w)):T.isEven()||T.subTo(s,T),T.rShiftTo(1,T);for(;m.isEven();)m.rShiftTo(1,m),l?(O.isEven()&&N.isEven()||(O.addTo(this,O),N.subTo(s,N)),O.rShiftTo(1,O)):N.isEven()||N.subTo(s,N),N.rShiftTo(1,N);d.compareTo(m)>=0?(d.subTo(m,d),l&&w.subTo(O,w),T.subTo(N,T)):(m.subTo(d,m),l&&O.subTo(w,O),N.subTo(T,N))}return m.compareTo(M.ONE)!=0?M.ZERO:N.compareTo(s)>=0?N.subtract(s):N.signum()<0?(N.addTo(s,N),N.signum()<0?N.add(s):N):N},M.prototype.pow=function(s){return this.exp(s,new He)},M.prototype.gcd=function(s){var l=this.s<0?this.negate():this.clone(),d=s.s<0?s.negate():s.clone();if(l.compareTo(d)<0){var m=l;l=d,d=m}var w=l.getLowestSetBit(),T=d.getLowestSetBit();if(T<0)return l;for(w<T&&(T=w),T>0&&(l.rShiftTo(T,l),d.rShiftTo(T,d));l.signum()>0;)(w=l.getLowestSetBit())>0&&l.rShiftTo(w,l),(w=d.getLowestSetBit())>0&&d.rShiftTo(w,d),l.compareTo(d)>=0?(l.subTo(d,l),l.rShiftTo(1,l)):(d.subTo(l,d),d.rShiftTo(1,d));return T>0&&d.lShiftTo(T,d),d},M.prototype.isProbablePrime=function(s){var l,d=this.abs();if(d.t==1&&d[0]<=De[De.length-1]){for(l=0;l<De.length;++l)if(d[0]==De[l])return!0;return!1}if(d.isEven())return!1;for(l=1;l<De.length;){for(var m=De[l],w=l+1;w<De.length&&m<W;)m*=De[w++];for(m=d.modInt(m);l<w;)if(m%De[l++]==0)return!1}return d.millerRabin(s)},M.prototype.square=function(){var s=oe();return this.squareTo(s),s},S.prototype.init=function(s){var l,d,m;for(l=0;l<256;++l)this.S[l]=l;for(d=0,l=0;l<256;++l)d=d+this.S[l]+s[l%s.length]&255,m=this.S[l],this.S[l]=this.S[d],this.S[d]=m;this.i=0,this.j=0},S.prototype.next=function(){var s;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,s=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=s,this.S[s+this.S[this.i]&255]};var x,K,q;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function X(){(function(s){K[q++]^=255&s,K[q++]^=s>>8&255,K[q++]^=s>>16&255,K[q++]^=s>>24&255,q>=256&&(q-=256)})(new Date().getTime())}if(K==null){var ne;if(K=new Array,q=0,b!==void 0&&(b.crypto!==void 0||b.msCrypto!==void 0)){var ye=b.crypto||b.msCrypto;if(ye.getRandomValues){var Ee=new Uint8Array(32);for(ye.getRandomValues(Ee),ne=0;ne<32;++ne)K[q++]=Ee[ne]}else if(v.appName=="Netscape"&&v.appVersion<"5"){var Ie=b.crypto.random(32);for(ne=0;ne<Ie.length;++ne)K[q++]=255&Ie.charCodeAt(ne)}}for(;q<256;)ne=Math.floor(65536*Math.random()),K[q++]=ne>>>8,K[q++]=255&ne;q=0,X()}function Ae(){if(x==null){for(X(),(x=function(){return new S}()).init(K),q=0;q<K.length;++q)K[q]=0;q=0}return x.next()}function Oe(){}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Gt(a,s){return new M(a,s)}function xr(a,s,l){for(var d="",m=0;d.length<s;)d+=l(String.fromCharCode.apply(String,a.concat([(4278190080&m)>>24,(16711680&m)>>16,(65280&m)>>8,255&m]))),m+=1;return d}function ve(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function rt(a,s){this.x=s,this.q=a}function Ce(a,s,l,d){this.curve=a,this.x=s,this.y=l,this.z=d??M.ONE,this.zinv=null}function pr(a,s,l){this.q=a,this.a=this.fromBigInteger(s),this.b=this.fromBigInteger(l),this.infinity=new Ce(this,null,null)}Oe.prototype.nextBytes=function(s){var l;for(l=0;l<s.length;++l)s[l]=Ae()},ve.prototype.doPublic=function(s){return s.modPowInt(this.e,this.n)},ve.prototype.setPublic=function(s,l){if(this.isPublic=!0,this.isPrivate=!1,typeof s!="string")this.n=s,this.e=l;else{if(!(s!=null&&l!=null&&s.length>0&&l.length>0))throw"Invalid RSA public key";this.n=Gt(s,16),this.e=parseInt(l,16)}},ve.prototype.encrypt=function(s){var l=function(T,O){if(O<T.length+11)throw"Message too long for RSA";for(var N=new Array,D=T.length-1;D>=0&&O>0;){var j=T.charCodeAt(D--);j<128?N[--O]=j:j>127&&j<2048?(N[--O]=63&j|128,N[--O]=j>>6|192):(N[--O]=63&j|128,N[--O]=j>>6&63|128,N[--O]=j>>12|224)}N[--O]=0;for(var H=new Oe,z=new Array;O>2;){for(z[0]=0;z[0]==0;)H.nextBytes(z);N[--O]=z[0]}return N[--O]=2,N[--O]=0,new M(N)}(s,this.n.bitLength()+7>>3);if(l==null)return null;var d=this.doPublic(l);if(d==null)return null;var m=d.toString(16);return 1&m.length?"0"+m:m},ve.prototype.encryptOAEP=function(s,l,d){var m=function(N,D,j,H){var z=R.crypto.MessageDigest,J=R.crypto.Util,G=null;if(j||(j="sha1"),typeof j=="string"&&(G=z.getCanonicalAlgName(j),H=z.getHashLength(G),j=function(se){return gr(J.hashHex(Br(se),G))}),N.length+2*H+2>D)throw"Message too long for RSA";var Z,te="";for(Z=0;Z<D-N.length-2*H-2;Z+=1)te+="\0";var k=j("")+te+""+N,U=new Array(H);new Oe().nextBytes(U);var $=xr(U,k.length,j),V=[];for(Z=0;Z<k.length;Z+=1)V[Z]=k.charCodeAt(Z)^$.charCodeAt(Z);var Y=xr(V,U.length,j),re=[0];for(Z=0;Z<U.length;Z+=1)re[Z+1]=U[Z]^Y.charCodeAt(Z);return new M(re.concat(V))}(s,this.n.bitLength()+7>>3,l,d);if(m==null)return null;var w=this.doPublic(m);if(w==null)return null;var T=w.toString(16);return 1&T.length?"0"+T:T},ve.prototype.type="RSA",rt.prototype.equals=function(s){return s==this||this.q.equals(s.q)&&this.x.equals(s.x)},rt.prototype.toBigInteger=function(){return this.x},rt.prototype.negate=function(){return new rt(this.q,this.x.negate().mod(this.q))},rt.prototype.add=function(s){return new rt(this.q,this.x.add(s.toBigInteger()).mod(this.q))},rt.prototype.subtract=function(s){return new rt(this.q,this.x.subtract(s.toBigInteger()).mod(this.q))},rt.prototype.multiply=function(s){return new rt(this.q,this.x.multiply(s.toBigInteger()).mod(this.q))},rt.prototype.square=function(){return new rt(this.q,this.x.square().mod(this.q))},rt.prototype.divide=function(s){return new rt(this.q,this.x.multiply(s.toBigInteger().modInverse(this.q)).mod(this.q))},Ce.prototype.getX=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Ce.prototype.getY=function(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Ce.prototype.equals=function(s){return s==this||(this.isInfinity()?s.isInfinity():s.isInfinity()?this.isInfinity():!!s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(M.ZERO)&&s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q).equals(M.ZERO))},Ce.prototype.isInfinity=function(){return this.x==null&&this.y==null||this.z.equals(M.ZERO)&&!this.y.toBigInteger().equals(M.ZERO)},Ce.prototype.negate=function(){return new Ce(this.curve,this.x,this.y.negate(),this.z)},Ce.prototype.add=function(s){if(this.isInfinity())return s;if(s.isInfinity())return this;var l=s.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(s.z)).mod(this.curve.q),d=s.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(s.z)).mod(this.curve.q);if(M.ZERO.equals(d))return M.ZERO.equals(l)?this.twice():this.curve.getInfinity();var m=new M("3"),w=this.x.toBigInteger(),T=this.y.toBigInteger(),O=(s.x.toBigInteger(),s.y.toBigInteger(),d.square()),N=O.multiply(d),D=w.multiply(O),j=l.square().multiply(this.z),H=j.subtract(D.shiftLeft(1)).multiply(s.z).subtract(N).multiply(d).mod(this.curve.q),z=D.multiply(m).multiply(l).subtract(T.multiply(N)).subtract(j.multiply(l)).multiply(s.z).add(l.multiply(N)).mod(this.curve.q),J=N.multiply(this.z).multiply(s.z).mod(this.curve.q);return new Ce(this.curve,this.curve.fromBigInteger(H),this.curve.fromBigInteger(z),J)},Ce.prototype.twice=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var s=new M("3"),l=this.x.toBigInteger(),d=this.y.toBigInteger(),m=d.multiply(this.z),w=m.multiply(d).mod(this.curve.q),T=this.curve.a.toBigInteger(),O=l.square().multiply(s);M.ZERO.equals(T)||(O=O.add(this.z.square().multiply(T)));var N=(O=O.mod(this.curve.q)).square().subtract(l.shiftLeft(3).multiply(w)).shiftLeft(1).multiply(m).mod(this.curve.q),D=O.multiply(s).multiply(l).subtract(w.shiftLeft(1)).shiftLeft(2).multiply(w).subtract(O.square().multiply(O)).mod(this.curve.q),j=m.square().multiply(m).shiftLeft(3).mod(this.curve.q);return new Ce(this.curve,this.curve.fromBigInteger(N),this.curve.fromBigInteger(D),j)},Ce.prototype.multiply=function(s){if(this.isInfinity())return this;if(s.signum()==0)return this.curve.getInfinity();var l,d=s,m=d.multiply(new M("3")),w=this.negate(),T=this,O=this.curve.q.subtract(s),N=O.multiply(new M("3")),D=new Ce(this.curve,this.x,this.y),j=D.negate();for(l=m.bitLength()-2;l>0;--l){T=T.twice();var H=m.testBit(l);H!=d.testBit(l)&&(T=T.add(H?this:w))}for(l=N.bitLength()-2;l>0;--l){D=D.twice();var z=N.testBit(l);z!=O.testBit(l)&&(D=D.add(z?D:j))}return T},Ce.prototype.multiplyTwo=function(s,l,d){var m;m=s.bitLength()>d.bitLength()?s.bitLength()-1:d.bitLength()-1;for(var w=this.curve.getInfinity(),T=this.add(l);m>=0;)w=w.twice(),s.testBit(m)?w=d.testBit(m)?w.add(T):w.add(this):d.testBit(m)&&(w=w.add(l)),--m;return w},pr.prototype.getQ=function(){return this.q},pr.prototype.getA=function(){return this.a},pr.prototype.getB=function(){return this.b},pr.prototype.equals=function(s){return s==this||this.q.equals(s.q)&&this.a.equals(s.a)&&this.b.equals(s.b)},pr.prototype.getInfinity=function(){return this.infinity},pr.prototype.fromBigInteger=function(s){return new rt(this.q,s)},pr.prototype.decodePointHex=function(s){switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var l=(s.length-2)/2,d=s.substr(2,l),m=s.substr(l+2,l);return new Ce(this,this.fromBigInteger(new M(d,16)),this.fromBigInteger(new M(m,16)));default:return null}},rt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Ce.prototype.getEncoded=function(a){var s=function(T,O){var N=T.toByteArrayUnsigned();if(O<N.length)N=N.slice(N.length-O);else for(;O>N.length;)N.unshift(0);return N},l=this.getX().toBigInteger(),d=this.getY().toBigInteger(),m=s(l,32);return a?d.isEven()?m.unshift(2):m.unshift(3):(m.unshift(4),m=m.concat(s(d,32))),m},Ce.decodeFrom=function(a,s){s[0];var l=s.length-1,d=s.slice(1,1+l/2),m=s.slice(1+l/2,1+l);d.unshift(0),m.unshift(0);var w=new M(d),T=new M(m);return new Ce(a,a.fromBigInteger(w),a.fromBigInteger(T))},Ce.decodeFromHex=function(a,s){s.substr(0,2);var l=s.length-2,d=s.substr(2,l/2),m=s.substr(2+l/2,l/2),w=new M(d,16),T=new M(m,16);return new Ce(a,a.fromBigInteger(w),a.fromBigInteger(T))},Ce.prototype.add2D=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;if(this.x.equals(a.x))return this.y.equals(a.y)?this.twice():this.curve.getInfinity();var s=a.x.subtract(this.x),l=a.y.subtract(this.y).divide(s),d=l.square().subtract(this.x).subtract(a.x),m=l.multiply(this.x.subtract(d)).subtract(this.y);return new Ce(this.curve,d,m)},Ce.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var a=this.curve.fromBigInteger(M.valueOf(2)),s=this.curve.fromBigInteger(M.valueOf(3)),l=this.x.square().multiply(s).add(this.curve.a).divide(this.y.multiply(a)),d=l.square().subtract(this.x.multiply(a)),m=l.multiply(this.x.subtract(d)).subtract(this.y);return new Ce(this.curve,d,m)},Ce.prototype.multiply2D=function(a){if(this.isInfinity())return this;if(a.signum()==0)return this.curve.getInfinity();var s,l=a,d=l.multiply(new M("3")),m=this.negate(),w=this;for(s=d.bitLength()-2;s>0;--s){w=w.twice();var T=d.testBit(s);T!=l.testBit(s)&&(w=w.add2D(T?this:m))}return w},Ce.prototype.isOnCurve=function(){var a=this.getX().toBigInteger(),s=this.getY().toBigInteger(),l=this.curve.getA().toBigInteger(),d=this.curve.getB().toBigInteger(),m=this.curve.getQ(),w=s.multiply(s).mod(m),T=a.multiply(a).multiply(a).add(l.multiply(a)).add(d).mod(m);return w.equals(T)},Ce.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Ce.prototype.validate=function(){var a=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var s=this.getX().toBigInteger(),l=this.getY().toBigInteger();if(s.compareTo(M.ONE)<0||s.compareTo(a.subtract(M.ONE))>0)throw new Error("x coordinate out of bounds");if(l.compareTo(M.ONE)<0||l.compareTo(a.subtract(M.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(a).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var Ad=function(){var a=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),s=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),l={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function d(T,O,N){return O?l[O]:String.fromCharCode(parseInt(N,16))}var m=new String(""),w=Object.hasOwnProperty;return function(T,O){var N,D,j=T.match(a),H=j[0],z=!1;H==="{"?N={}:H==="["?N=[]:(N=[],z=!0);for(var J=[N],G=1-z,Z=j.length;G<Z;++G){var te;switch((H=j[G]).charCodeAt(0)){default:(te=J[0])[D||te.length]=+H,D=void 0;break;case 34:if((H=H.substring(1,H.length-1)).indexOf("\\")!==-1&&(H=H.replace(s,d)),te=J[0],!D){if(!(te instanceof Array)){D=H||m;break}D=te.length}te[D]=H,D=void 0;break;case 91:te=J[0],J.unshift(te[D||te.length]=[]),D=void 0;break;case 93:J.shift();break;case 102:(te=J[0])[D||te.length]=!1,D=void 0;break;case 110:(te=J[0])[D||te.length]=null,D=void 0;break;case 116:(te=J[0])[D||te.length]=!0,D=void 0;break;case 123:te=J[0],J.unshift(te[D||te.length]={}),D=void 0;break;case 125:J.shift()}}if(z){if(J.length!==1)throw new Error;N=N[0]}else if(J.length)throw new Error;return O&&(N=function k(U,$){var V=U[$];if(V&&(V===void 0?"undefined":_(V))==="object"){var Y=null;for(var re in V)if(w.call(V,re)&&V!==U){var ge=k(V,re);ge!==void 0?V[re]=ge:(Y||(Y=[]),Y.push(re))}if(Y)for(var se=Y.length;--se>=0;)delete V[Y[se]]}return O.call(U,$,V)}({"":N},"")),N}}();R!==void 0&&R||(n.KJUR=R={}),R.asn1!==void 0&&R.asn1||(R.asn1={}),R.asn1.ASN1Util=new function(){this.integerToByteHex=function(a){var s=a.toString(16);return s.length%2==1&&(s="0"+s),s},this.bigIntToMinTwosComplementsHex=function(a){var s=a.toString(16);if(s.substr(0,1)!="-")s.length%2==1?s="0"+s:s.match(/^[0-7]/)||(s="00"+s);else{var l=s.substr(1).length;l%2==1?l+=1:s.match(/^[0-7]/)||(l+=2);for(var d="",m=0;m<l;m++)d+="f";s=new M(d,16).xor(a).add(M.ONE).toString(16).replace(/^-/,"")}return s},this.getPEMStringFromHex=function(a,s){return Qt(a,s)},this.newObject=function(a){var s=R.asn1,l=s.ASN1Object,d=s.DERBoolean,m=s.DERInteger,w=s.DERBitString,T=s.DEROctetString,O=s.DERNull,N=s.DERObjectIdentifier,D=s.DEREnumerated,j=s.DERUTF8String,H=s.DERNumericString,z=s.DERPrintableString,J=s.DERTeletexString,G=s.DERIA5String,Z=s.DERUTCTime,te=s.DERGeneralizedTime,k=s.DERVisibleString,U=s.DERBMPString,$=s.DERSequence,V=s.DERSet,Y=s.DERTaggedObject,re=s.ASN1Util.newObject;if(a instanceof s.ASN1Object)return a;var ge=Object.keys(a);if(ge.length!=1)throw new Error("key of param shall be only one.");var se=ge[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+se+":")==-1)throw new Error("undefined key: "+se);if(se=="bool")return new d(a[se]);if(se=="int")return new m(a[se]);if(se=="bitstr")return new w(a[se]);if(se=="octstr")return new T(a[se]);if(se=="null")return new O(a[se]);if(se=="oid")return new N(a[se]);if(se=="enum")return new D(a[se]);if(se=="utf8str")return new j(a[se]);if(se=="numstr")return new H(a[se]);if(se=="prnstr")return new z(a[se]);if(se=="telstr")return new J(a[se]);if(se=="ia5str")return new G(a[se]);if(se=="utctime")return new Z(a[se]);if(se=="gentime")return new te(a[se]);if(se=="visstr")return new k(a[se]);if(se=="bmpstr")return new U(a[se]);if(se=="asn1")return new l(a[se]);if(se=="seq"){for(var Te=a[se],pe=[],_e=0;_e<Te.length;_e++){var Ke=re(Te[_e]);pe.push(Ke)}return new $({array:pe})}if(se=="set"){for(Te=a[se],pe=[],_e=0;_e<Te.length;_e++)Ke=re(Te[_e]),pe.push(Ke);return new V({array:pe})}if(se=="tag"){var Xe=a[se];if(Object.prototype.toString.call(Xe)==="[object Array]"&&Xe.length==3){var qe=re(Xe[2]);return new Y({tag:Xe[0],explicit:Xe[1],obj:qe})}return new Y(Xe)}},this.jsonToASN1HEX=function(a){return this.newObject(a).getEncodedHex()}},R.asn1.ASN1Util.oidHexToInt=function(a){for(var s="",l=parseInt(a.substr(0,2),16),d=(s=Math.floor(l/40)+"."+l%40,""),m=2;m<a.length;m+=2){var w=("00000000"+parseInt(a.substr(m,2),16).toString(2)).slice(-8);d+=w.substr(1,7),w.substr(0,1)=="0"&&(s=s+"."+new M(d,2).toString(10),d="")}return s},R.asn1.ASN1Util.oidIntToHex=function(a){var s=function(N){var D=N.toString(16);return D.length==1&&(D="0"+D),D},l=function(N){var D="",j=new M(N,10).toString(2),H=7-j.length%7;H==7&&(H=0);for(var z="",J=0;J<H;J++)z+="0";for(j=z+j,J=0;J<j.length-1;J+=7){var G=j.substr(J,7);J!=j.length-7&&(G="1"+G),D+=s(parseInt(G,2))}return D};if(!a.match(/^[0-9.]+$/))throw"malformed oid string: "+a;var d="",m=a.split("."),w=40*parseInt(m[0])+parseInt(m[1]);d+=s(w),m.splice(0,2);for(var T=0;T<m.length;T++)d+=l(m[T]);return d},R.asn1.ASN1Object=function(a){this.params=null,this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var s=this.hV.length/2,l=s.toString(16);if(l.length%2==1&&(l="0"+l),s<128)return l;var d=l.length/2;if(d>15)throw"ASN.1 length too long to represent by 8x: n = "+s.toString(16);return(128+d).toString(16)+l},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(s){this.params=s},a!=null&&a.tlv!=null&&(this.hTLV=a.tlv,this.isModified=!1)},R.asn1.DERAbstractString=function(a){R.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(s){this.hTLV=null,this.isModified=!0,this.s=s,this.hV=Su(this.s).toLowerCase()},this.setStringHex=function(s){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.getFreshValueHex=function(){return this.hV},a!==void 0&&(typeof a=="string"?this.setString(a):a.str!==void 0?this.setString(a.str):a.hex!==void 0&&this.setStringHex(a.hex))},ut(R.asn1.DERAbstractString,R.asn1.ASN1Object),R.asn1.DERAbstractTime=function(a){R.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(s){var l=s.getTime()+6e4*s.getTimezoneOffset();return new Date(l)},this.formatDate=function(s,l,d){var m=this.zeroPadding,w=this.localDateToUTC(s),T=String(w.getFullYear());l=="utc"&&(T=T.substr(2,2));var O=T+m(String(w.getMonth()+1),2)+m(String(w.getDate()),2)+m(String(w.getHours()),2)+m(String(w.getMinutes()),2)+m(String(w.getSeconds()),2);if(d===!0){var N=w.getMilliseconds();if(N!=0){var D=m(String(N),3);O=O+"."+(D=D.replace(/[0]+$/,""))}}return O+"Z"},this.zeroPadding=function(s,l){return s.length>=l?s:new Array(l-s.length+1).join("0")+s},this.getString=function(){return this.s},this.setString=function(s){this.hTLV=null,this.isModified=!0,this.s=s,this.hV=Qr(s)},this.setByDateValue=function(s,l,d,m,w,T){var O=new Date(Date.UTC(s,l-1,d,m,w,T,0));this.setByDate(O)},this.getFreshValueHex=function(){return this.hV}},ut(R.asn1.DERAbstractTime,R.asn1.ASN1Object),R.asn1.DERAbstractStructured=function(a){R.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array=s},this.appendASN1Object=function(s){this.hTLV=null,this.isModified=!0,this.asn1Array.push(s)},this.asn1Array=new Array,a!==void 0&&a.array!==void 0&&(this.asn1Array=a.array)},ut(R.asn1.DERAbstractStructured,R.asn1.ASN1Object),R.asn1.DERBoolean=function(a){R.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=a==0?"010100":"0101ff"},ut(R.asn1.DERBoolean,R.asn1.ASN1Object),R.asn1.DERInteger=function(a){R.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(s){this.hTLV=null,this.isModified=!0,this.hV=R.asn1.ASN1Util.bigIntToMinTwosComplementsHex(s)},this.setByInteger=function(s){var l=new M(String(s),10);this.setByBigInteger(l)},this.setValueHex=function(s){this.hV=s},this.getFreshValueHex=function(){return this.hV},a!==void 0&&(a.bigint!==void 0?this.setByBigInteger(a.bigint):a.int!==void 0?this.setByInteger(a.int):typeof a=="number"?this.setByInteger(a):a.hex!==void 0&&this.setValueHex(a.hex))},ut(R.asn1.DERInteger,R.asn1.ASN1Object),R.asn1.DERBitString=function(a){if(a!==void 0&&a.obj!==void 0){var s=R.asn1.ASN1Util.newObject(a.obj);a.hex="00"+s.getEncodedHex()}R.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(l){this.hTLV=null,this.isModified=!0,this.hV=l},this.setUnusedBitsAndHexValue=function(l,d){if(l<0||7<l)throw"unused bits shall be from 0 to 7: u = "+l;var m="0"+l;this.hTLV=null,this.isModified=!0,this.hV=m+d},this.setByBinaryString=function(l){var d=8-(l=l.replace(/0+$/,"")).length%8;d==8&&(d=0);for(var m=0;m<=d;m++)l+="0";var w="";for(m=0;m<l.length-1;m+=8){var T=l.substr(m,8),O=parseInt(T,2).toString(16);O.length==1&&(O="0"+O),w+=O}this.hTLV=null,this.isModified=!0,this.hV="0"+d+w},this.setByBooleanArray=function(l){for(var d="",m=0;m<l.length;m++)l[m]==1?d+="1":d+="0";this.setByBinaryString(d)},this.newFalseArray=function(l){for(var d=new Array(l),m=0;m<l;m++)d[m]=!1;return d},this.getFreshValueHex=function(){return this.hV},a!==void 0&&(typeof a=="string"&&a.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(a):a.hex!==void 0?this.setHexValueIncludingUnusedBits(a.hex):a.bin!==void 0?this.setByBinaryString(a.bin):a.array!==void 0&&this.setByBooleanArray(a.array))},ut(R.asn1.DERBitString,R.asn1.ASN1Object),R.asn1.DEROctetString=function(a){if(a!==void 0&&a.obj!==void 0){var s=R.asn1.ASN1Util.newObject(a.obj);a.hex=s.getEncodedHex()}R.asn1.DEROctetString.superclass.constructor.call(this,a),this.hT="04"},ut(R.asn1.DEROctetString,R.asn1.DERAbstractString),R.asn1.DERNull=function(){R.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},ut(R.asn1.DERNull,R.asn1.ASN1Object),R.asn1.DERObjectIdentifier=function(a){R.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(s){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=s},this.setValueOidString=function(s){var l=function(m){var w=function(z){var J=z.toString(16);return J.length==1&&(J="0"+J),J},T=function(z){var J="",G=parseInt(z,10).toString(2),Z=7-G.length%7;Z==7&&(Z=0);for(var te="",k=0;k<Z;k++)te+="0";for(G=te+G,k=0;k<G.length-1;k+=7){var U=G.substr(k,7);k!=G.length-7&&(U="1"+U),J+=w(parseInt(U,2))}return J};try{if(!m.match(/^[0-9.]+$/))return null;var O="",N=m.split("."),D=40*parseInt(N[0],10)+parseInt(N[1],10);O+=w(D),N.splice(0,2);for(var j=0;j<N.length;j++)O+=T(N[j]);return O}catch{return null}}(s);if(l==null)throw new Error("malformed oid string: "+s);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=l},this.setValueName=function(s){var l=R.asn1.x509.OID.name2oid(s);if(l==="")throw new Error("DERObjectIdentifier oidName undefined: "+s);this.setValueOidString(l)},this.setValueNameOrOid=function(s){s.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(s):this.setValueName(s)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(s){typeof s=="string"?this.setValueNameOrOid(s):s.oid!==void 0?this.setValueNameOrOid(s.oid):s.name!==void 0?this.setValueNameOrOid(s.name):s.hex!==void 0&&this.setValueHex(s.hex)},a!==void 0&&this.setByParam(a)},ut(R.asn1.DERObjectIdentifier,R.asn1.ASN1Object),R.asn1.DEREnumerated=function(a){R.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(s){this.hTLV=null,this.isModified=!0,this.hV=R.asn1.ASN1Util.bigIntToMinTwosComplementsHex(s)},this.setByInteger=function(s){var l=new M(String(s),10);this.setByBigInteger(l)},this.setValueHex=function(s){this.hV=s},this.getFreshValueHex=function(){return this.hV},a!==void 0&&(a.int!==void 0?this.setByInteger(a.int):typeof a=="number"?this.setByInteger(a):a.hex!==void 0&&this.setValueHex(a.hex))},ut(R.asn1.DEREnumerated,R.asn1.ASN1Object),R.asn1.DERUTF8String=function(a){R.asn1.DERUTF8String.superclass.constructor.call(this,a),this.hT="0c"},ut(R.asn1.DERUTF8String,R.asn1.DERAbstractString),R.asn1.DERNumericString=function(a){R.asn1.DERNumericString.superclass.constructor.call(this,a),this.hT="12"},ut(R.asn1.DERNumericString,R.asn1.DERAbstractString),R.asn1.DERPrintableString=function(a){R.asn1.DERPrintableString.superclass.constructor.call(this,a),this.hT="13"},ut(R.asn1.DERPrintableString,R.asn1.DERAbstractString),R.asn1.DERTeletexString=function(a){R.asn1.DERTeletexString.superclass.constructor.call(this,a),this.hT="14"},ut(R.asn1.DERTeletexString,R.asn1.DERAbstractString),R.asn1.DERIA5String=function(a){R.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="16"},ut(R.asn1.DERIA5String,R.asn1.DERAbstractString),R.asn1.DERVisibleString=function(a){R.asn1.DERIA5String.superclass.constructor.call(this,a),this.hT="1a"},ut(R.asn1.DERVisibleString,R.asn1.DERAbstractString),R.asn1.DERBMPString=function(a){R.asn1.DERBMPString.superclass.constructor.call(this,a),this.hT="1e"},ut(R.asn1.DERBMPString,R.asn1.DERAbstractString),R.asn1.DERUTCTime=function(a){R.asn1.DERUTCTime.superclass.constructor.call(this,a),this.hT="17",this.setByDate=function(s){this.hTLV=null,this.isModified=!0,this.date=s,this.s=this.formatDate(this.date,"utc"),this.hV=Qr(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=Qr(this.s)),this.hV},a!==void 0&&(a.str!==void 0?this.setString(a.str):typeof a=="string"&&a.match(/^[0-9]{12}Z$/)?this.setString(a):a.hex!==void 0?this.setStringHex(a.hex):a.date!==void 0&&this.setByDate(a.date))},ut(R.asn1.DERUTCTime,R.asn1.DERAbstractTime),R.asn1.DERGeneralizedTime=function(a){R.asn1.DERGeneralizedTime.superclass.constructor.call(this,a),this.hT="18",this.withMillis=!1,this.setByDate=function(s){this.hTLV=null,this.isModified=!0,this.date=s,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Qr(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=Qr(this.s)),this.hV},a!==void 0&&(a.str!==void 0?this.setString(a.str):typeof a=="string"&&a.match(/^[0-9]{14}Z$/)?this.setString(a):a.hex!==void 0?this.setStringHex(a.hex):a.date!==void 0&&this.setByDate(a.date),a.millis===!0&&(this.withMillis=!0))},ut(R.asn1.DERGeneralizedTime,R.asn1.DERAbstractTime),R.asn1.DERSequence=function(a){R.asn1.DERSequence.superclass.constructor.call(this,a),this.hT="30",this.getFreshValueHex=function(){for(var s="",l=0;l<this.asn1Array.length;l++)s+=this.asn1Array[l].getEncodedHex();return this.hV=s,this.hV}},ut(R.asn1.DERSequence,R.asn1.DERAbstractStructured),R.asn1.DERSet=function(a){R.asn1.DERSet.superclass.constructor.call(this,a),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var s=new Array,l=0;l<this.asn1Array.length;l++){var d=this.asn1Array[l];s.push(d.getEncodedHex())}return this.sortFlag==1&&s.sort(),this.hV=s.join(""),this.hV},a!==void 0&&a.sortflag!==void 0&&a.sortflag==0&&(this.sortFlag=!1)},ut(R.asn1.DERSet,R.asn1.DERAbstractStructured),R.asn1.DERTaggedObject=function(a){R.asn1.DERTaggedObject.superclass.constructor.call(this);var s=R.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(l,d,m){this.hT=d,this.isExplicit=l,this.asn1Object=m,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=m.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,d),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(l){l.tag!=null&&(this.hT=l.tag),l.explicit!=null&&(this.isExplicit=l.explicit),l.tage!=null&&(this.hT=l.tage,this.isExplicit=!0),l.tagi!=null&&(this.hT=l.tagi,this.isExplicit=!1),l.obj!=null&&(l.obj instanceof s.ASN1Object?(this.asn1Object=l.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):_(l.obj)=="object"&&(this.asn1Object=s.ASN1Util.newObject(l.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},a!=null&&this.setByParam(a)},ut(R.asn1.DERTaggedObject,R.asn1.ASN1Object);var R,no,Fr,fe=new function(){};function Rd(a){for(var s=new Array,l=0;l<a.length;l++)s[l]=a.charCodeAt(l);return s}function Id(a){for(var s="",l=0;l<a.length;l++)s+=String.fromCharCode(a[l]);return s}function ms(a){for(var s="",l=0;l<a.length;l++){var d=a[l].toString(16);d.length==1&&(d="0"+d),s+=d}return s}function Qr(a){return ms(Rd(a))}function ys(a){return a=(a=(a=a.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function io(a){return a.length%4==2?a+="==":a.length%4==3&&(a+="="),a=(a=a.replace(/-/g,"+")).replace(/_/g,"/")}function wt(a){return a.length%2==1&&(a="0"+a),ys(A(a))}function We(a){return Q(io(a))}function Su(a){return vs(ws(a))}function St(a){return decodeURIComponent(_s(a))}function gr(a){for(var s="",l=0;l<a.length-1;l+=2)s+=String.fromCharCode(parseInt(a.substr(l,2),16));return s}function Br(a){for(var s="",l=0;l<a.length;l++)s+=("0"+a.charCodeAt(l).toString(16)).slice(-2);return s}function Nd(a){return A(a)}function Ld(a){var s=Nd(a).replace(/(.{64})/g,`$1\r
`);return s=s.replace(/\r\n$/,"")}function Dd(a){return Q(a.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Qt(a,s){return"-----BEGIN "+s+`-----\r
`+Ld(a)+`\r
-----END `+s+`-----\r
`}function Hr(a,s){if(a.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+s;return Dd(a=s!==void 0?(a=a.replace(new RegExp("^[^]*-----BEGIN "+s+"-----"),"")).replace(new RegExp("-----END "+s+"-----[^]*$"),""):(a=a.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Eu(a){var s,l,d,m,w,T,O,N,D,j,H;if(H=a.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return N=H[1],s=parseInt(N),N.length===2&&(50<=s&&s<100?s=1900+s:0<=s&&s<50&&(s=2e3+s)),l=parseInt(H[2])-1,d=parseInt(H[3]),m=parseInt(H[4]),w=parseInt(H[5]),T=parseInt(H[6]),O=0,(D=H[7])!==""&&(j=(D.substr(1)+"00").substr(0,3),O=parseInt(j)),Date.UTC(s,l,d,m,w,T,O);throw"unsupported zulu format: "+a}function Od(a){return~~(Eu(a)/1e3)}function vs(a){return a.replace(/%/g,"")}function _s(a){return a.replace(/(..)/g,"%$1")}function jd(a){var s="malformed IPv6 address";if(!a.match(/^[0-9A-Fa-f:]+$/))throw s;var l=(a=a.toLowerCase()).split(":").length-1;if(l<2)throw s;var d=":".repeat(7-l+2),m=(a=a.replace("::",d)).split(":");if(m.length!=8)throw s;for(var w=0;w<8;w++)m[w]=("0000"+m[w]).slice(-4);return m.join("")}function Ud(a){if(!a.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var s=(a=a.toLowerCase()).match(/.{1,4}/g),l=0;l<8;l++)s[l]=s[l].replace(/^0+/,""),s[l]==""&&(s[l]="0");var d=(a=":"+s.join(":")+":").match(/:(0:){2,}/g);if(d===null)return a.slice(1,-1);var m="";for(l=0;l<d.length;l++)d[l].length>m.length&&(m=d[l]);return(a=a.replace(m,"::")).slice(1,-1)}function bu(a){var s="malformed hex value";if(!a.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw s;if(a.length!=8)return a.length==32?Ud(a):a;try{return parseInt(a.substr(0,2),16)+"."+parseInt(a.substr(2,2),16)+"."+parseInt(a.substr(4,2),16)+"."+parseInt(a.substr(6,2),16)}catch{throw s}}function Md(a){return a.match(/.{4}/g).map(function(l){var d=parseInt(l.substr(0,2),16),m=parseInt(l.substr(2),16);if(d==0&m<128)return String.fromCharCode(m);if(d<8){var w=128|63&m;return St((192|(7&d)<<3|(192&m)>>6).toString(16)+w.toString(16))}w=128|(15&d)<<2|(192&m)>>6;var T=128|63&m;return St((224|(240&d)>>4).toString(16)+w.toString(16)+T.toString(16))}).join("")}function ws(a){for(var s=encodeURIComponent(a),l="",d=0;d<s.length;d++)s[d]=="%"?(l+=s.substr(d,3),d+=2):l=l+"%"+Qr(s[d]);return l}function Bd(a){return!(a.length%2!=0||!a.match(/^[0-9a-f]+$/)&&!a.match(/^[0-9A-F]+$/))}function xu(a){return a.length%2==1?"0"+a:a.substr(0,1)>"7"?"00"+a:a}fe.getLblen=function(a,s){if(a.substr(s+2,1)!="8")return 1;var l=parseInt(a.substr(s+3,1));return l==0?-1:0<l&&l<10?l+1:-2},fe.getL=function(a,s){var l=fe.getLblen(a,s);return l<1?"":a.substr(s+2,2*l)},fe.getVblen=function(a,s){var l;return(l=fe.getL(a,s))==""?-1:(l.substr(0,1)==="8"?new M(l.substr(2),16):new M(l,16)).intValue()},fe.getVidx=function(a,s){var l=fe.getLblen(a,s);return l<0?l:s+2*(l+1)},fe.getV=function(a,s){var l=fe.getVidx(a,s),d=fe.getVblen(a,s);return a.substr(l,2*d)},fe.getTLV=function(a,s){return a.substr(s,2)+fe.getL(a,s)+fe.getV(a,s)},fe.getTLVblen=function(a,s){return 2+2*fe.getLblen(a,s)+2*fe.getVblen(a,s)},fe.getNextSiblingIdx=function(a,s){return fe.getVidx(a,s)+2*fe.getVblen(a,s)},fe.getChildIdx=function(a,s){var l,d,m,w=fe,T=[];l=w.getVidx(a,s),d=2*w.getVblen(a,s),a.substr(s,2)=="03"&&(l+=2,d-=2),m=0;for(var O=l;m<=d;){var N=w.getTLVblen(a,O);if((m+=N)<=d&&T.push(O),O+=N,m>=d)break}return T},fe.getNthChildIdx=function(a,s,l){return fe.getChildIdx(a,s)[l]},fe.getIdxbyList=function(a,s,l,d){var m,w,T=fe;return l.length==0?d!==void 0&&a.substr(s,2)!==d?-1:s:(m=l.shift())>=(w=T.getChildIdx(a,s)).length?-1:T.getIdxbyList(a,w[m],l,d)},fe.getIdxbyListEx=function(a,s,l,d){var m,w,T=fe;if(l.length==0)return d!==void 0&&a.substr(s,2)!==d?-1:s;m=l.shift(),w=T.getChildIdx(a,s);for(var O=0,N=0;N<w.length;N++){var D=a.substr(w[N],2);if(typeof m=="number"&&!T.isContextTag(D)&&O==m||typeof m=="string"&&T.isContextTag(D,m))return T.getIdxbyListEx(a,w[N],l,d);T.isContextTag(D)||O++}return-1},fe.getTLVbyList=function(a,s,l,d){var m=fe,w=m.getIdxbyList(a,s,l,d);return w==-1||w>=a.length?null:m.getTLV(a,w)},fe.getTLVbyListEx=function(a,s,l,d){var m=fe,w=m.getIdxbyListEx(a,s,l,d);return w==-1?null:m.getTLV(a,w)},fe.getVbyList=function(a,s,l,d,m){var w,T,O=fe;return(w=O.getIdxbyList(a,s,l,d))==-1||w>=a.length?null:(T=O.getV(a,w),m===!0&&(T=T.substr(2)),T)},fe.getVbyListEx=function(a,s,l,d,m){var w,T,O=fe;return(w=O.getIdxbyListEx(a,s,l,d))==-1?null:(T=O.getV(a,w),a.substr(w,2)=="03"&&m!==!1&&(T=T.substr(2)),T)},fe.getInt=function(a,s,l){l==null&&(l=-1);try{var d=a.substr(s,2);if(d!="02"&&d!="03")return l;var m=fe.getV(a,s);return d=="02"?parseInt(m,16):function(T){try{var O=T.substr(0,2);if(O=="00")return parseInt(T.substr(2),16);var N=parseInt(O,16),D=T.substr(2),j=parseInt(D,16).toString(2);return j=="0"&&(j="00000000"),j=j.slice(0,0-N),parseInt(j,2)}catch{return-1}}(m)}catch{return l}},fe.getOID=function(a,s,l){l==null&&(l=null);try{return a.substr(s,2)!="06"?l:function(m){if(!Bd(m))return null;try{var w=[],T=m.substr(0,2),O=parseInt(T,16);w[0]=new String(Math.floor(O/40)),w[1]=new String(O%40);for(var N=m.substr(2),D=[],j=0;j<N.length/2;j++)D.push(parseInt(N.substr(2*j,2),16));var H=[],z="";for(j=0;j<D.length;j++)128&D[j]?z+=Hd((127&D[j]).toString(2),7):(z+=Hd((127&D[j]).toString(2),7),H.push(new String(parseInt(z,2))),z="");var J=w.join(".");return H.length>0&&(J=J+"."+H.join(".")),J}catch{return null}}(fe.getV(a,s))}catch{return l}},fe.getOIDName=function(a,s,l){l==null&&(l=null);try{var d=fe.getOID(a,s,l);if(d==l)return l;var m=R.asn1.x509.OID.oid2name(d);return m==""?d:m}catch{return l}},fe.getString=function(a,s,l){l==null&&(l=null);try{return gr(fe.getV(a,s))}catch{return l}},fe.hextooidstr=function(a){var s=function(z,J){return z.length>=J?z:new Array(J-z.length+1).join("0")+z},l=[],d=a.substr(0,2),m=parseInt(d,16);l[0]=new String(Math.floor(m/40)),l[1]=new String(m%40);for(var w=a.substr(2),T=[],O=0;O<w.length/2;O++)T.push(parseInt(w.substr(2*O,2),16));var N=[],D="";for(O=0;O<T.length;O++)128&T[O]?D+=s((127&T[O]).toString(2),7):(D+=s((127&T[O]).toString(2),7),N.push(new String(parseInt(D,2))),D="");var j=l.join(".");return N.length>0&&(j=j+"."+N.join(".")),j},fe.dump=function(a,s,l,d){var m=fe,w=m.getV,T=m.dump,O=m.getChildIdx,N=a;a instanceof R.asn1.ASN1Object&&(N=a.getEncodedHex());var D=function(se,Te){return se.length<=2*Te?se:se.substr(0,Te)+"..(total "+se.length/2+"bytes).."+se.substr(se.length-Te,Te)};s===void 0&&(s={ommit_long_octet:32}),l===void 0&&(l=0),d===void 0&&(d="");var j,H=s.ommit_long_octet;if((j=N.substr(l,2))=="01")return(z=w(N,l))=="00"?d+`BOOLEAN FALSE
`:d+`BOOLEAN TRUE
`;if(j=="02")return d+"INTEGER "+D(z=w(N,l),H)+`
`;if(j=="03"){var z=w(N,l);if(m.isASN1HEX(z.substr(2))){var J=d+`BITSTRING, encapsulates
`;return J+=T(z.substr(2),s,0,d+"  ")}return d+"BITSTRING "+D(z,H)+`
`}if(j=="04")return z=w(N,l),m.isASN1HEX(z)?(J=d+`OCTETSTRING, encapsulates
`,J+=T(z,s,0,d+"  ")):d+"OCTETSTRING "+D(z,H)+`
`;if(j=="05")return d+`NULL
`;if(j=="06"){var G=w(N,l),Z=R.asn1.ASN1Util.oidHexToInt(G),te=R.asn1.x509.OID.oid2name(Z),k=Z.replace(/\./g," ");return te!=""?d+"ObjectIdentifier "+te+" ("+k+`)
`:d+"ObjectIdentifier ("+k+`)
`}if(j=="0a")return d+"ENUMERATED "+parseInt(w(N,l))+`
`;if(j=="0c")return d+"UTF8String '"+St(w(N,l))+`'
`;if(j=="13")return d+"PrintableString '"+St(w(N,l))+`'
`;if(j=="14")return d+"TeletexString '"+St(w(N,l))+`'
`;if(j=="16")return d+"IA5String '"+St(w(N,l))+`'
`;if(j=="17")return d+"UTCTime "+St(w(N,l))+`
`;if(j=="18")return d+"GeneralizedTime "+St(w(N,l))+`
`;if(j=="1a")return d+"VisualString '"+St(w(N,l))+`'
`;if(j=="1e")return d+"BMPString '"+Md(w(N,l))+`'
`;if(j=="30"){if(N.substr(l,4)=="3000")return d+`SEQUENCE {}
`;J=d+`SEQUENCE
`;var U=s;if(((Y=O(N,l)).length==2||Y.length==3)&&N.substr(Y[0],2)=="06"&&N.substr(Y[Y.length-1],2)=="04"){te=m.oidname(w(N,Y[0]));var $=JSON.parse(JSON.stringify(s));$.x509ExtName=te,U=$}for(var V=0;V<Y.length;V++)J+=T(N,U,Y[V],d+"  ");return J}if(j=="31"){J=d+`SET
`;var Y=O(N,l);for(V=0;V<Y.length;V++)J+=T(N,s,Y[V],d+"  ");return J}if(128&(j=parseInt(j,16))){var re=31&j;if(32&j){for(J=d+"["+re+`]
`,Y=O(N,l),V=0;V<Y.length;V++)J+=T(N,s,Y[V],d+"  ");return J}if(z=w(N,l),fe.isASN1HEX(z)){var J=d+"["+re+`]
`;return J+=T(z,s,0,d+"  ")}return(z.substr(0,8)=="68747470"||s.x509ExtName==="subjectAltName"&&re==2)&&(z=St(z)),J=d+"["+re+"] "+z+`
`}return d+"UNKNOWN("+j+") "+w(N,l)+`
`},fe.isContextTag=function(a,s){var l,d;a=a.toLowerCase();try{l=parseInt(a,16)}catch{return-1}if(s===void 0)return(192&l)==128;try{return s.match(/^\[[0-9]+\]$/)!=null&&!((d=parseInt(s.substr(1,s.length-1),10))>31)&&(192&l)==128&&(31&l)==d}catch{return!1}},fe.isASN1HEX=function(a){var s=fe;if(a.length%2==1)return!1;var l=s.getVblen(a,0),d=a.substr(0,2),m=s.getL(a,0);return a.length-d.length-m.length==2*l},fe.checkStrictDER=function(a,s,l,d,m){var w=fe;if(l===void 0){if(typeof a!="string")throw new Error("not hex string");if(a=a.toLowerCase(),!R.lang.String.isHex(a))throw new Error("not hex string");l=a.length,m=(d=a.length/2)<128?1:Math.ceil(d.toString(16))+1}if(w.getL(a,s).length>2*m)throw new Error("L of TLV too long: idx="+s);var T=w.getVblen(a,s);if(T>d)throw new Error("value of L too long than hex: idx="+s);var O=w.getTLV(a,s),N=O.length-2-w.getL(a,s).length;if(N!==2*T)throw new Error("V string length and L's value not the same:"+N+"/"+2*T);if(s===0&&a.length!=O.length)throw new Error("total length and TLV length unmatch:"+a.length+"!="+O.length);var D=a.substr(s,2);if(D==="02"){var j=w.getVidx(a,s);if(a.substr(j,2)=="00"&&a.charCodeAt(j+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(D,16)){for(var H=w.getVblen(a,s),z=0,J=w.getChildIdx(a,s),G=0;G<J.length;G++)z+=w.getTLV(a,J[G]).length,w.checkStrictDER(a,J[G],l,d,m);if(2*H!=z)throw new Error("sum of children's TLV length and L unmatch: "+2*H+"!="+z)}},fe.oidname=function(a){var s=R.asn1;R.lang.String.isHex(a)&&(a=s.ASN1Util.oidHexToInt(a));var l=s.x509.OID.oid2name(a);return l===""&&(l=a),l},R!==void 0&&R||(n.KJUR=R={}),R.lang!==void 0&&R.lang||(R.lang={}),R.lang.String=function(){},typeof o=="function"?(n.utf8tob64u=no=function(s){return ys(o.from(s,"utf8").toString("base64"))},n.b64utoutf8=Fr=function(s){return o.from(io(s),"base64").toString("utf8")}):(n.utf8tob64u=no=function(s){return wt(vs(ws(s)))},n.b64utoutf8=Fr=function(s){return decodeURIComponent(_s(We(s)))}),R.lang.String.isInteger=function(a){return!!a.match(/^[0-9]+$/)||!!a.match(/^-[0-9]+$/)},R.lang.String.isHex=function(a){return Bd(a)},R.lang.String.isBase64=function(a){return!(!(a=a.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||a.length%4!=0)},R.lang.String.isBase64URL=function(a){return!a.match(/[+/=]/)&&(a=io(a),R.lang.String.isBase64(a))},R.lang.String.isIntegerArray=function(a){return!!(a=a.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},R.lang.String.isPrintable=function(a){return a.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null},R.lang.String.isIA5=function(a){return a.match(/^[\x20-\x21\x23-\x7f]*$/)!==null},R.lang.String.isMail=function(a){return a.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};var Hd=function(s,l,d){return d==null&&(d="0"),s.length>=l?s:new Array(l-s.length+1).join(d)+s};function ut(a,s){var l=function(){};l.prototype=s.prototype,a.prototype=new l,a.prototype.constructor=a,a.superclass=s.prototype,s.prototype.constructor==Object.prototype.constructor&&(s.prototype.constructor=s)}R!==void 0&&R||(n.KJUR=R={}),R.crypto!==void 0&&R.crypto||(R.crypto={}),R.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:P.algo.MD5,sha1:P.algo.SHA1,sha224:P.algo.SHA224,sha256:P.algo.SHA256,sha384:P.algo.SHA384,sha512:P.algo.SHA512,ripemd160:P.algo.RIPEMD160},this.getDigestInfoHex=function(a,s){if(this.DIGESTINFOHEAD[s]===void 0)throw"alg not supported in Util.DIGESTINFOHEAD: "+s;return this.DIGESTINFOHEAD[s]+a},this.getPaddedDigestInfoHex=function(a,s,l){var d=this.getDigestInfoHex(a,s),m=l/4;if(d.length+22>m)throw"key is too short for SigAlg: keylen="+l+","+s;for(var w="0001",T="00"+d,O="",N=m-w.length-T.length,D=0;D<N;D+=2)O+="ff";return w+O+T},this.hashString=function(a,s){return new R.crypto.MessageDigest({alg:s}).digestString(a)},this.hashHex=function(a,s){return new R.crypto.MessageDigest({alg:s}).digestHex(a)},this.sha1=function(a){return this.hashString(a,"sha1")},this.sha256=function(a){return this.hashString(a,"sha256")},this.sha256Hex=function(a){return this.hashHex(a,"sha256")},this.sha512=function(a){return this.hashString(a,"sha512")},this.sha512Hex=function(a){return this.hashHex(a,"sha512")},this.isKey=function(a){return a instanceof ve||a instanceof R.crypto.DSA||a instanceof R.crypto.ECDSA}},R.crypto.Util.md5=function(a){return new R.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(a)},R.crypto.Util.ripemd160=function(a){return new R.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(a)},R.crypto.Util.SECURERANDOMGEN=new Oe,R.crypto.Util.getRandomHexOfNbytes=function(a){var s=new Array(a);return R.crypto.Util.SECURERANDOMGEN.nextBytes(s),ms(s)},R.crypto.Util.getRandomBigIntegerOfNbytes=function(a){return new M(R.crypto.Util.getRandomHexOfNbytes(a),16)},R.crypto.Util.getRandomHexOfNbits=function(a){var s=a%8,l=new Array((a-s)/8+1);return R.crypto.Util.SECURERANDOMGEN.nextBytes(l),l[0]=(255<<s&255^255)&l[0],ms(l)},R.crypto.Util.getRandomBigIntegerOfNbits=function(a){return new M(R.crypto.Util.getRandomHexOfNbits(a),16)},R.crypto.Util.getRandomBigIntegerZeroToMax=function(a){for(var s=a.bitLength();;){var l=R.crypto.Util.getRandomBigIntegerOfNbits(s);if(a.compareTo(l)!=-1)return l}},R.crypto.Util.getRandomBigIntegerMinToMax=function(a,s){var l=a.compareTo(s);if(l==1)throw"biMin is greater than biMax";if(l==0)return a;var d=s.subtract(a);return R.crypto.Util.getRandomBigIntegerZeroToMax(d).add(a)},R.crypto.MessageDigest=function(a){this.setAlgAndProvider=function(s,l){if((s=R.crypto.MessageDigest.getCanonicalAlgName(s))!==null&&l===void 0&&(l=R.crypto.Util.DEFAULTPROVIDER[s]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(s)!=-1&&l=="cryptojs"){try{this.md=R.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[s].create()}catch(d){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+d}this.updateString=function(d){this.md.update(d)},this.updateHex=function(d){var m=P.enc.Hex.parse(d);this.md.update(m)},this.digest=function(){return this.md.finalize().toString(P.enc.Hex)},this.digestString=function(d){return this.updateString(d),this.digest()},this.digestHex=function(d){return this.updateHex(d),this.digest()}}if(":sha256:".indexOf(s)!=-1&&l=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(d){throw"setAlgAndProvider hash alg set fail alg="+s+"/"+d}this.updateString=function(d){this.md.update(d)},this.updateHex=function(d){var m=sjcl.codec.hex.toBits(d);this.md.update(m)},this.digest=function(){var d=this.md.finalize();return sjcl.codec.hex.fromBits(d)},this.digestString=function(d){return this.updateString(d),this.digest()},this.digestHex=function(d){return this.updateHex(d),this.digest()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},a!==void 0&&a.alg!==void 0&&(this.algName=a.alg,a.prov===void 0&&(this.provName=R.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},R.crypto.MessageDigest.getCanonicalAlgName=function(a){return typeof a=="string"&&(a=(a=a.toLowerCase()).replace(/-/,"")),a},R.crypto.MessageDigest.getHashLength=function(a){var s=R.crypto.MessageDigest,l=s.getCanonicalAlgName(a);if(s.HASHLENGTH[l]===void 0)throw"not supported algorithm: "+a;return s.HASHLENGTH[l]},R.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},R.crypto.Mac=function(a){this.setAlgAndProvider=function(s,l){if((s=s.toLowerCase())==null&&(s="hmacsha1"),(s=s.toLowerCase()).substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+s;l===void 0&&(l=R.crypto.Util.DEFAULTPROVIDER[s]),this.algProv=s+"/"+l;var d=s.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(d)!=-1&&l=="cryptojs"){try{var m=R.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[d];this.mac=P.algo.HMAC.create(m,this.pass)}catch(w){throw"setAlgAndProvider hash alg set fail hashAlg="+d+"/"+w}this.updateString=function(w){this.mac.update(w)},this.updateHex=function(w){var T=P.enc.Hex.parse(w);this.mac.update(T)},this.doFinal=function(){return this.mac.finalize().toString(P.enc.Hex)},this.doFinalString=function(w){return this.updateString(w),this.doFinal()},this.doFinalHex=function(w){return this.updateHex(w),this.doFinal()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(s){if(typeof s=="string"){var l=s;return s.length%2!=1&&s.match(/^[0-9A-Fa-f]+$/)||(l=Br(s)),void(this.pass=P.enc.Hex.parse(l))}if((s===void 0?"undefined":_(s))!="object")throw"KJUR.crypto.Mac unsupported password type: "+s;if(l=null,s.hex!==void 0){if(s.hex.length%2!=0||!s.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+s.hex;l=s.hex}if(s.utf8!==void 0&&(l=Su(s.utf8)),s.rstr!==void 0&&(l=Br(s.rstr)),s.b64!==void 0&&(l=Q(s.b64)),s.b64u!==void 0&&(l=We(s.b64u)),l==null)throw"KJUR.crypto.Mac unsupported password type: "+s;this.pass=P.enc.Hex.parse(l)},a!==void 0&&(a.pass!==void 0&&this.setPassword(a.pass),a.alg!==void 0&&(this.algName=a.alg,a.prov===void 0&&(this.provName=R.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},R.crypto.Signature=function(a){var s=null;if(this._setAlgNames=function(){var l=this.algName.match(/^(.+)with(.+)$/);l&&(this.mdAlgName=l[1].toLowerCase(),this.pubkeyAlgName=l[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(l,d){for(var m="",w=d/4-l.length,T=0;T<w;T++)m+="0";return m+l},this.setAlgAndProvider=function(l,d){if(this._setAlgNames(),d!="cryptojs/jsrsa")throw new Error("provider not supported: "+d);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new R.crypto.MessageDigest({alg:this.mdAlgName})}catch(m){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+m)}this.init=function(m,w){var T=null;try{T=w===void 0?yt.getKey(m):yt.getKey(m,w)}catch(O){throw"init failed:"+O}if(T.isPrivate===!0)this.prvKey=T,this.state="SIGN";else{if(T.isPublic!==!0)throw"init failed.:"+T;this.pubKey=T,this.state="VERIFY"}},this.updateString=function(m){this.md.updateString(m)},this.updateHex=function(m){this.md.updateHex(m)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&R.crypto.ECDSA!==void 0&&(this.prvKey=new R.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ve&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ve&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof R.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof R.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(m){return this.updateString(m),this.sign()},this.signHex=function(m){return this.updateHex(m),this.sign()},this.verify=function(m){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&R.crypto.ECDSA!==void 0&&(this.pubKey=new R.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ve&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,m,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ve&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,m);if(R.crypto.ECDSA!==void 0&&this.pubKey instanceof R.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,m);if(R.crypto.DSA!==void 0&&this.pubKey instanceof R.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,m);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(l,d){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(l){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(l){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(l){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(l){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(l){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=a,a!==void 0&&(a.alg!==void 0&&(this.algName=a.alg,a.prov===void 0?this.provName=R.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=a.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),a.psssaltlen!==void 0&&(this.pssSaltLen=a.psssaltlen),a.prvkeypem!==void 0)){if(a.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{s=yt.getKey(a.prvkeypem),this.init(s)}catch(l){throw"fatal error to load pem private key: "+l}}},R.crypto.Cipher=function(a){},R.crypto.Cipher.encrypt=function(a,s,l){if(s instanceof ve&&s.isPublic){var d=R.crypto.Cipher.getAlgByKeyAndName(s,l);if(d==="RSA")return s.encrypt(a);if(d==="RSAOAEP")return s.encryptOAEP(a,"sha1");var m=d.match(/^RSAOAEP(\d+)$/);if(m!==null)return s.encryptOAEP(a,"sha"+m[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+l}throw"Cipher.encrypt: unsupported key or algorithm"},R.crypto.Cipher.decrypt=function(a,s,l){if(s instanceof ve&&s.isPrivate){var d=R.crypto.Cipher.getAlgByKeyAndName(s,l);if(d==="RSA")return s.decrypt(a);if(d==="RSAOAEP")return s.decryptOAEP(a,"sha1");var m=d.match(/^RSAOAEP(\d+)$/);if(m!==null)return s.decryptOAEP(a,"sha"+m[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+l}throw"Cipher.decrypt: unsupported key or algorithm"},R.crypto.Cipher.getAlgByKeyAndName=function(a,s){if(a instanceof ve){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(s)!=-1)return s;if(s==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+s}throw"getAlgByKeyAndName: not supported algorithm name: "+s},R.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},R!==void 0&&R||(n.KJUR=R={}),R.crypto!==void 0&&R.crypto||(R.crypto={}),R.crypto.ECDSA=function(a){var s=Error,l=M,d=Ce,m=R.crypto.ECDSA,w=R.crypto.ECParameterDB,T=m.getName,O=fe,N=O.getVbyListEx,D=O.isASN1HEX,j=new Oe;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(H){return new l(H.bitLength(),j).mod(H.subtract(l.ONE)).add(l.ONE)},this.setNamedCurve=function(H){this.ecparams=w.getByName(H),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=H},this.setPrivateKeyHex=function(H){this.isPrivate=!0,this.prvKeyHex=H},this.setPublicKeyHex=function(H){this.isPublic=!0,this.pubKeyHex=H},this.getPublicKeyXYHex=function(){var H=this.pubKeyHex;if(H.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var z=this.ecparams.keylen/4;if(H.length!==2+2*z)throw"malformed public key hex length";var J={};return J.x=H.substr(2,z),J.y=H.substr(2+z),J},this.getShortNISTPCurveName=function(){var H=this.curveName;return H==="secp256r1"||H==="NIST P-256"||H==="P-256"||H==="prime256v1"?"P-256":H==="secp384r1"||H==="NIST P-384"||H==="P-384"?"P-384":null},this.generateKeyPairHex=function(){var H=this.ecparams.n,z=this.getBigRandom(H),J=this.ecparams.G.multiply(z),G=J.getX().toBigInteger(),Z=J.getY().toBigInteger(),te=this.ecparams.keylen/4,k=("0000000000"+z.toString(16)).slice(-te),U="04"+("0000000000"+G.toString(16)).slice(-te)+("0000000000"+Z.toString(16)).slice(-te);return this.setPrivateKeyHex(k),this.setPublicKeyHex(U),{ecprvhex:k,ecpubhex:U}},this.signWithMessageHash=function(H){return this.signHex(H,this.prvKeyHex)},this.signHex=function(H,z){var J=new l(z,16),G=this.ecparams.n,Z=new l(H.substring(0,this.ecparams.keylen/4),16);do var te=this.getBigRandom(G),k=this.ecparams.G.multiply(te).getX().toBigInteger().mod(G);while(k.compareTo(l.ZERO)<=0);var U=te.modInverse(G).multiply(Z.add(J.multiply(k))).mod(G);return m.biRSSigToASN1Sig(k,U)},this.sign=function(H,z){var J=z,G=this.ecparams.n,Z=l.fromByteArrayUnsigned(H);do var te=this.getBigRandom(G),k=this.ecparams.G.multiply(te).getX().toBigInteger().mod(G);while(k.compareTo(M.ZERO)<=0);var U=te.modInverse(G).multiply(Z.add(J.multiply(k))).mod(G);return this.serializeSig(k,U)},this.verifyWithMessageHash=function(H,z){return this.verifyHex(H,z,this.pubKeyHex)},this.verifyHex=function(H,z,J){try{var G,Z,te=m.parseSigHex(z);G=te.r,Z=te.s;var k=d.decodeFromHex(this.ecparams.curve,J),U=new l(H.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(U,G,Z,k)}catch{return!1}},this.verify=function(H,z,J){var G,Z,te;if(Bitcoin.Util.isArray(z)){var k=this.parseSig(z);G=k.r,Z=k.s}else{if((z===void 0?"undefined":_(z))!=="object"||!z.r||!z.s)throw"Invalid value for signature";G=z.r,Z=z.s}if(J instanceof Ce)te=J;else{if(!Bitcoin.Util.isArray(J))throw"Invalid format for pubkey value, must be byte array or ECPointFp";te=d.decodeFrom(this.ecparams.curve,J)}var U=l.fromByteArrayUnsigned(H);return this.verifyRaw(U,G,Z,te)},this.verifyRaw=function(H,z,J,G){var Z=this.ecparams.n,te=this.ecparams.G;if(z.compareTo(l.ONE)<0||z.compareTo(Z)>=0||J.compareTo(l.ONE)<0||J.compareTo(Z)>=0)return!1;var k=J.modInverse(Z),U=H.multiply(k).mod(Z),$=z.multiply(k).mod(Z);return te.multiply(U).add(G.multiply($)).getX().toBigInteger().mod(Z).equals(z)},this.serializeSig=function(H,z){var J=H.toByteArraySigned(),G=z.toByteArraySigned(),Z=[];return Z.push(2),Z.push(J.length),(Z=Z.concat(J)).push(2),Z.push(G.length),(Z=Z.concat(G)).unshift(Z.length),Z.unshift(48),Z},this.parseSig=function(H){var z;if(H[0]!=48)throw new Error("Signature not a valid DERSequence");if(H[z=2]!=2)throw new Error("First element in signature must be a DERInteger");var J=H.slice(z+2,z+2+H[z+1]);if(H[z+=2+H[z+1]]!=2)throw new Error("Second element in signature must be a DERInteger");var G=H.slice(z+2,z+2+H[z+1]);return z+=2+H[z+1],{r:l.fromByteArrayUnsigned(J),s:l.fromByteArrayUnsigned(G)}},this.parseSigCompact=function(H){if(H.length!==65)throw"Signature has the wrong length";var z=H[0]-27;if(z<0||z>7)throw"Invalid signature type";var J=this.ecparams.n;return{r:l.fromByteArrayUnsigned(H.slice(1,33)).mod(J),s:l.fromByteArrayUnsigned(H.slice(33,65)).mod(J),i:z}},this.readPKCS5PrvKeyHex=function(H){if(D(H)===!1)throw new Error("not ASN.1 hex string");var z,J,G;try{z=N(H,0,["[0]",0],"06"),J=N(H,0,[1],"04");try{G=N(H,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=T(z),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(G),this.setPrivateKeyHex(J),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(H){if(D(H)===!1)throw new s("not ASN.1 hex string");var z,J,G;try{N(H,0,[1,0],"06"),z=N(H,0,[1,1],"06"),J=N(H,0,[2,0,1],"04");try{G=N(H,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new s("malformed PKCS#8 plain ECC private key")}if(this.curveName=T(z),this.curveName===void 0)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(G),this.setPrivateKeyHex(J),this.isPublic=!1},this.readPKCS8PubKeyHex=function(H){if(D(H)===!1)throw new s("not ASN.1 hex string");var z,J;try{N(H,0,[0,0],"06"),z=N(H,0,[0,1],"06"),J=N(H,0,[1],"03")}catch{throw new s("malformed PKCS#8 ECC public key")}if(this.curveName=T(z),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(J)},this.readCertPubKeyHex=function(H,z){if(D(H)===!1)throw new s("not ASN.1 hex string");var J,G;try{J=N(H,0,[0,5,0,1],"06"),G=N(H,0,[0,5,1],"03")}catch{throw new s("malformed X.509 certificate ECC public key")}if(this.curveName=T(J),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(G)},a!==void 0&&a.curve!==void 0&&(this.curveName=a.curve),this.curveName===void 0&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),a!==void 0&&(a.prv!==void 0&&this.setPrivateKeyHex(a.prv),a.pub!==void 0&&this.setPublicKeyHex(a.pub))},R.crypto.ECDSA.parseSigHex=function(a){var s=R.crypto.ECDSA.parseSigHexInHexRS(a);return{r:new M(s.r,16),s:new M(s.s,16)}},R.crypto.ECDSA.parseSigHexInHexRS=function(a){var s=fe,l=s.getChildIdx,d=s.getV;if(s.checkStrictDER(a,0),a.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var m=l(a,0);if(m.length!=2)throw new Error("signature shall have two elements");var w=m[0],T=m[1];if(a.substr(w,2)!="02")throw new Error("1st item not ASN.1 integer");if(a.substr(T,2)!="02")throw new Error("2nd item not ASN.1 integer");return{r:d(a,w),s:d(a,T)}},R.crypto.ECDSA.asn1SigToConcatSig=function(a){var s=R.crypto.ECDSA.parseSigHexInHexRS(a),l=s.r,d=s.s;if(l.substr(0,2)=="00"&&l.length%32==2&&(l=l.substr(2)),d.substr(0,2)=="00"&&d.length%32==2&&(d=d.substr(2)),l.length%32==30&&(l="00"+l),d.length%32==30&&(d="00"+d),l.length%32!=0)throw"unknown ECDSA sig r length error";if(d.length%32!=0)throw"unknown ECDSA sig s length error";return l+d},R.crypto.ECDSA.concatSigToASN1Sig=function(a){if(a.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var s=a.substr(0,a.length/2),l=a.substr(a.length/2);return R.crypto.ECDSA.hexRSSigToASN1Sig(s,l)},R.crypto.ECDSA.hexRSSigToASN1Sig=function(a,s){var l=new M(a,16),d=new M(s,16);return R.crypto.ECDSA.biRSSigToASN1Sig(l,d)},R.crypto.ECDSA.biRSSigToASN1Sig=function(a,s){var l=R.asn1,d=new l.DERInteger({bigint:a}),m=new l.DERInteger({bigint:s});return new l.DERSequence({array:[d,m]}).getEncodedHex()},R.crypto.ECDSA.getName=function(a){return a==="2b8104001f"?"secp192k1":a==="2a8648ce3d030107"?"secp256r1":a==="2b8104000a"?"secp256k1":a==="2b81040021"?"secp224r1":a==="2b81040022"?"secp384r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(a)!==-1?"secp256r1":"|secp256k1|".indexOf(a)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(a)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(a)!==-1?"secp384r1":null},R!==void 0&&R||(n.KJUR=R={}),R.crypto!==void 0&&R.crypto||(R.crypto={}),R.crypto.ECParameterDB=new function(){var a={},s={};function l(d){return new M(d,16)}this.getByName=function(d){var m=d;if(s[m]!==void 0&&(m=s[d]),a[m]!==void 0)return a[m];throw"unregistered EC curve name: "+m},this.regist=function(d,m,w,T,O,N,D,j,H,z,J,G){a[d]={};var Z=l(w),te=l(T),k=l(O),U=l(N),$=l(D),V=new pr(Z,te,k),Y=V.decodePointHex("04"+j+H);a[d].name=d,a[d].keylen=m,a[d].curve=V,a[d].G=Y,a[d].n=U,a[d].h=$,a[d].oid=J,a[d].info=G;for(var re=0;re<z.length;re++)s[z[re]]=d}},R.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),R.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),R.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),R.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),R.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),R.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),R.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),R.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),R.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),R.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var yt=function(){var a=function(D,j,H){return s(P.AES,D,j,H)},s=function(D,j,H,z){var J=P.enc.Hex.parse(j),G=P.enc.Hex.parse(H),Z=P.enc.Hex.parse(z),te={};te.key=G,te.iv=Z,te.ciphertext=J;var k=D.decrypt(te,G,{iv:Z});return P.enc.Hex.stringify(k)},l=function(D,j,H){return d(P.AES,D,j,H)},d=function(D,j,H,z){var J=P.enc.Hex.parse(j),G=P.enc.Hex.parse(H),Z=P.enc.Hex.parse(z),te=D.encrypt(J,G,{iv:Z}),k=P.enc.Hex.parse(te.toString());return P.enc.Base64.stringify(k)},m={"AES-256-CBC":{proc:a,eproc:l,keylen:32,ivlen:16},"AES-192-CBC":{proc:a,eproc:l,keylen:24,ivlen:16},"AES-128-CBC":{proc:a,eproc:l,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(D,j,H){return s(P.TripleDES,D,j,H)},eproc:function(D,j,H){return d(P.TripleDES,D,j,H)},keylen:24,ivlen:8},"DES-CBC":{proc:function(D,j,H){return s(P.DES,D,j,H)},eproc:function(D,j,H){return d(P.DES,D,j,H)},keylen:8,ivlen:8}},w=function(D){var j={},H=D.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));H&&(j.cipher=H[1],j.ivsalt=H[2]);var z=D.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));z&&(j.type=z[1]);var J=-1,G=0;D.indexOf(`\r
\r
`)!=-1&&(J=D.indexOf(`\r
\r
`),G=2),D.indexOf(`

`)!=-1&&(J=D.indexOf(`

`),G=1);var Z=D.indexOf("-----END");if(J!=-1&&Z!=-1){var te=D.substring(J+2*G,Z-G);te=te.replace(/\s+/g,""),j.data=te}return j},T=function(D,j,H){for(var z=H.substring(0,16),J=P.enc.Hex.parse(z),G=P.enc.Utf8.parse(j),Z=m[D].keylen+m[D].ivlen,te="",k=null;;){var U=P.algo.MD5.create();if(k!=null&&U.update(k),U.update(G),U.update(J),k=U.finalize(),(te+=P.enc.Hex.stringify(k)).length>=2*Z)break}var $={};return $.keyhex=te.substr(0,2*m[D].keylen),$.ivhex=te.substr(2*m[D].keylen,2*m[D].ivlen),$},O=function(D,j,H,z){var J=P.enc.Base64.parse(D),G=P.enc.Hex.stringify(J);return(0,m[j].proc)(G,H,z)};return{version:"1.0.0",parsePKCS5PEM:function(D){return w(D)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(D,j,H){return T(D,j,H)},decryptKeyB64:function(D,j,H,z){return O(D,j,H,z)},getDecryptedKeyHex:function(D,j){var H=w(D),z=H.cipher,J=H.ivsalt,G=H.data,Z=T(z,j,J).keyhex;return O(G,z,Z,J)},getEncryptedPKCS5PEMFromPrvKeyHex:function(D,j,H,z,J){var G="";if(z!==void 0&&z!=null||(z="AES-256-CBC"),m[z]===void 0)throw new Error("KEYUTIL unsupported algorithm: "+z);J!==void 0&&J!=null||(J=function(k){var U=P.lib.WordArray.random(k);return P.enc.Hex.stringify(U)}(m[z].ivlen).toUpperCase());var Z=function(k,U,$,V){return(0,m[U].eproc)(k,$,V)}(j,z,T(z,H,J).keyhex,J);return G="-----BEGIN "+D+` PRIVATE KEY-----\r
`,G+=`Proc-Type: 4,ENCRYPTED\r
`,G+="DEK-Info: "+z+","+J+`\r
`,G+=`\r
`,G+=Z.replace(/(.{64})/g,`$1\r
`),G+=`\r
-----END `+D+` PRIVATE KEY-----\r
`},parseHexOfEncryptedPKCS8:function(D){var j=fe,H=j.getChildIdx,z=j.getV,J={},G=H(D,0);if(G.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+G.length);J.ciphertext=z(D,G[1]);var Z=H(D,G[0]);if(Z.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+Z.length);if(z(D,Z[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var te=H(D,Z[1]);if(Z.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+te.length);var k=H(D,te[1]);if(k.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+k.length);if(z(D,k[0])!="2a864886f70d0307")throw"this only supports TripleDES";J.encryptionSchemeAlg="TripleDES",J.encryptionSchemeIV=z(D,k[1]);var U=H(D,te[0]);if(U.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+U.length);if(z(D,U[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var $=H(D,U[1]);if($.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+$.length);J.pbkdf2Salt=z(D,$[0]);var V=z(D,$[1]);try{J.pbkdf2Iter=parseInt(V,16)}catch{throw new Error("malformed format pbkdf2Iter: "+V)}return J},getPBKDF2KeyHexFromParam:function(D,j){var H=P.enc.Hex.parse(D.pbkdf2Salt),z=D.pbkdf2Iter,J=P.PBKDF2(j,H,{keySize:6,iterations:z});return P.enc.Hex.stringify(J)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(D,j){var H=Hr(D,"ENCRYPTED PRIVATE KEY"),z=this.parseHexOfEncryptedPKCS8(H),J=yt.getPBKDF2KeyHexFromParam(z,j),G={};G.ciphertext=P.enc.Hex.parse(z.ciphertext);var Z=P.enc.Hex.parse(J),te=P.enc.Hex.parse(z.encryptionSchemeIV),k=P.TripleDES.decrypt(G,Z,{iv:te});return P.enc.Hex.stringify(k)},getKeyFromEncryptedPKCS8PEM:function(D,j){var H=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(D,j);return this.getKeyFromPlainPrivatePKCS8Hex(H)},parsePlainPrivatePKCS8Hex:function(D){var j=fe,H=j.getChildIdx,z=j.getV,J={algparam:null};if(D.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var G=H(D,0);if(G.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(D.substr(G[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var Z=H(D,G[1]);if(Z.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(D.substr(Z[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(J.algoid=z(D,Z[0]),D.substr(Z[1],2)=="06"&&(J.algparam=z(D,Z[1])),D.substr(G[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return J.keyidx=j.getVidx(D,G[2]),J},getKeyFromPlainPrivatePKCS8PEM:function(D){var j=Hr(D,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(j)},getKeyFromPlainPrivatePKCS8Hex:function(D){var j,H=this.parsePlainPrivatePKCS8Hex(D);if(H.algoid=="2a864886f70d010101")j=new ve;else if(H.algoid=="2a8648ce380401")j=new R.crypto.DSA;else{if(H.algoid!="2a8648ce3d0201")throw new Error("unsupported private key algorithm");j=new R.crypto.ECDSA}return j.readPKCS8PrvKeyHex(D),j},_getKeyFromPublicPKCS8Hex:function(D){var j,H=fe.getVbyList(D,0,[0,0],"06");if(H==="2a864886f70d010101")j=new ve;else if(H==="2a8648ce380401")j=new R.crypto.DSA;else{if(H!=="2a8648ce3d0201")throw new Error("unsupported PKCS#8 public key hex");j=new R.crypto.ECDSA}return j.readPKCS8PubKeyHex(D),j},parsePublicRawRSAKeyHex:function(D){var j=fe,H=j.getChildIdx,z=j.getV,J={};if(D.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var G=H(D,0);if(G.length!=2)throw new Error("malformed RSA key(code:002)");if(D.substr(G[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(J.n=z(D,G[0]),D.substr(G[1],2)!="02")throw new Error("malformed RSA key(code:004)");return J.e=z(D,G[1]),J},parsePublicPKCS8Hex:function(D){var j=fe,H=j.getChildIdx,z=j.getV,J={algparam:null},G=H(D,0);if(G.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+G.length);var Z=G[0];if(D.substr(Z,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var te=H(D,Z);if(te.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(D.substr(te[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(J.algoid=z(D,te[0]),D.substr(te[1],2)=="06"?J.algparam=z(D,te[1]):D.substr(te[1],2)=="30"&&(J.algparam={},J.algparam.p=j.getVbyList(D,te[1],[0],"02"),J.algparam.q=j.getVbyList(D,te[1],[1],"02"),J.algparam.g=j.getVbyList(D,te[1],[2],"02")),D.substr(G[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return J.key=z(D,G[1]).substr(2),J}}}();yt.getKey=function(a,s,l){var d=(te=fe).getChildIdx,m=(te.getV,te.getVbyList),w=R.crypto,T=w.ECDSA,O=w.DSA,N=ve,D=Hr,j=yt;if(N!==void 0&&a instanceof N||T!==void 0&&a instanceof T||O!==void 0&&a instanceof O)return a;if(a.curve!==void 0&&a.xy!==void 0&&a.d===void 0)return new T({pub:a.xy,curve:a.curve});if(a.curve!==void 0&&a.d!==void 0)return new T({prv:a.d,curve:a.curve});if(a.kty===void 0&&a.n!==void 0&&a.e!==void 0&&a.d===void 0)return(_e=new N).setPublic(a.n,a.e),_e;if(a.kty===void 0&&a.n!==void 0&&a.e!==void 0&&a.d!==void 0&&a.p!==void 0&&a.q!==void 0&&a.dp!==void 0&&a.dq!==void 0&&a.co!==void 0&&a.qi===void 0)return(_e=new N).setPrivateEx(a.n,a.e,a.d,a.p,a.q,a.dp,a.dq,a.co),_e;if(a.kty===void 0&&a.n!==void 0&&a.e!==void 0&&a.d!==void 0&&a.p===void 0)return(_e=new N).setPrivate(a.n,a.e,a.d),_e;if(a.p!==void 0&&a.q!==void 0&&a.g!==void 0&&a.y!==void 0&&a.x===void 0)return(_e=new O).setPublic(a.p,a.q,a.g,a.y),_e;if(a.p!==void 0&&a.q!==void 0&&a.g!==void 0&&a.y!==void 0&&a.x!==void 0)return(_e=new O).setPrivate(a.p,a.q,a.g,a.y,a.x),_e;if(a.kty==="RSA"&&a.n!==void 0&&a.e!==void 0&&a.d===void 0)return(_e=new N).setPublic(We(a.n),We(a.e)),_e;if(a.kty==="RSA"&&a.n!==void 0&&a.e!==void 0&&a.d!==void 0&&a.p!==void 0&&a.q!==void 0&&a.dp!==void 0&&a.dq!==void 0&&a.qi!==void 0)return(_e=new N).setPrivateEx(We(a.n),We(a.e),We(a.d),We(a.p),We(a.q),We(a.dp),We(a.dq),We(a.qi)),_e;if(a.kty==="RSA"&&a.n!==void 0&&a.e!==void 0&&a.d!==void 0)return(_e=new N).setPrivate(We(a.n),We(a.e),We(a.d)),_e;if(a.kty==="EC"&&a.crv!==void 0&&a.x!==void 0&&a.y!==void 0&&a.d===void 0){var H=(pe=new T({curve:a.crv})).ecparams.keylen/4,z="04"+("0000000000"+We(a.x)).slice(-H)+("0000000000"+We(a.y)).slice(-H);return pe.setPublicKeyHex(z),pe}if(a.kty==="EC"&&a.crv!==void 0&&a.x!==void 0&&a.y!==void 0&&a.d!==void 0){H=(pe=new T({curve:a.crv})).ecparams.keylen/4,z="04"+("0000000000"+We(a.x)).slice(-H)+("0000000000"+We(a.y)).slice(-H);var J=("0000000000"+We(a.d)).slice(-H);return pe.setPublicKeyHex(z),pe.setPrivateKeyHex(J),pe}if(l==="pkcs5prv"){var G,Z=a,te=fe;if((G=d(Z,0)).length===9)(_e=new N).readPKCS5PrvKeyHex(Z);else if(G.length===6)(_e=new O).readPKCS5PrvKeyHex(Z);else{if(!(G.length>2&&Z.substr(G[1],2)==="04"))throw new Error("unsupported PKCS#1/5 hexadecimal key");(_e=new T).readPKCS5PrvKeyHex(Z)}return _e}if(l==="pkcs8prv")return _e=j.getKeyFromPlainPrivatePKCS8Hex(a);if(l==="pkcs8pub")return j._getKeyFromPublicPKCS8Hex(a);if(l==="x509pub")return Et.getPublicKeyFromCertHex(a);if(a.indexOf("-END CERTIFICATE-",0)!=-1||a.indexOf("-END X509 CERTIFICATE-",0)!=-1||a.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Et.getPublicKeyFromCertPEM(a);if(a.indexOf("-END PUBLIC KEY-")!=-1){var k=Hr(a,"PUBLIC KEY");return j._getKeyFromPublicPKCS8Hex(k)}if(a.indexOf("-END RSA PRIVATE KEY-")!=-1&&a.indexOf("4,ENCRYPTED")==-1){var U=D(a,"RSA PRIVATE KEY");return j.getKey(U,null,"pkcs5prv")}if(a.indexOf("-END DSA PRIVATE KEY-")!=-1&&a.indexOf("4,ENCRYPTED")==-1){var $=m(qe=D(a,"DSA PRIVATE KEY"),0,[1],"02"),V=m(qe,0,[2],"02"),Y=m(qe,0,[3],"02"),re=m(qe,0,[4],"02"),ge=m(qe,0,[5],"02");return(_e=new O).setPrivate(new M($,16),new M(V,16),new M(Y,16),new M(re,16),new M(ge,16)),_e}if(a.indexOf("-END EC PRIVATE KEY-")!=-1&&a.indexOf("4,ENCRYPTED")==-1)return U=D(a,"EC PRIVATE KEY"),j.getKey(U,null,"pkcs5prv");if(a.indexOf("-END PRIVATE KEY-")!=-1)return j.getKeyFromPlainPrivatePKCS8PEM(a);if(a.indexOf("-END RSA PRIVATE KEY-")!=-1&&a.indexOf("4,ENCRYPTED")!=-1){var se=j.getDecryptedKeyHex(a,s),Te=new ve;return Te.readPKCS5PrvKeyHex(se),Te}if(a.indexOf("-END EC PRIVATE KEY-")!=-1&&a.indexOf("4,ENCRYPTED")!=-1){var pe,_e=m(qe=j.getDecryptedKeyHex(a,s),0,[1],"04"),Ke=m(qe,0,[2,0],"06"),Xe=m(qe,0,[3,0],"03").substr(2);if(R.crypto.OID.oidhex2name[Ke]===void 0)throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+Ke);return(pe=new T({curve:R.crypto.OID.oidhex2name[Ke]})).setPublicKeyHex(Xe),pe.setPrivateKeyHex(_e),pe.isPublic=!1,pe}if(a.indexOf("-END DSA PRIVATE KEY-")!=-1&&a.indexOf("4,ENCRYPTED")!=-1){var qe;return $=m(qe=j.getDecryptedKeyHex(a,s),0,[1],"02"),V=m(qe,0,[2],"02"),Y=m(qe,0,[3],"02"),re=m(qe,0,[4],"02"),ge=m(qe,0,[5],"02"),(_e=new O).setPrivate(new M($,16),new M(V,16),new M(Y,16),new M(re,16),new M(ge,16)),_e}if(a.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return j.getKeyFromEncryptedPKCS8PEM(a,s);throw new Error("not supported argument")},yt.generateKeypair=function(a,s){if(a=="RSA"){var l=s;(T=new ve).generate(l,"10001"),T.isPrivate=!0,T.isPublic=!0;var d=new ve,m=T.n.toString(16),w=T.e.toString(16);return d.setPublic(m,w),d.isPrivate=!1,d.isPublic=!0,(O={}).prvKeyObj=T,O.pubKeyObj=d,O}if(a=="EC"){var T,O,N=s,D=new R.crypto.ECDSA({curve:N}).generateKeyPairHex();return(T=new R.crypto.ECDSA({curve:N})).setPublicKeyHex(D.ecpubhex),T.setPrivateKeyHex(D.ecprvhex),T.isPrivate=!0,T.isPublic=!1,(d=new R.crypto.ECDSA({curve:N})).setPublicKeyHex(D.ecpubhex),d.isPrivate=!1,d.isPublic=!0,(O={}).prvKeyObj=T,O.pubKeyObj=d,O}throw new Error("unknown algorithm: "+a)},yt.getPEM=function(a,s,l,d,m,w){var T=R,O=T.asn1,N=O.DERObjectIdentifier,D=O.DERInteger,j=O.ASN1Util.newObject,H=O.x509.SubjectPublicKeyInfo,z=T.crypto,J=z.DSA,G=z.ECDSA,Z=ve;function te(pe){return j({seq:[{int:0},{int:{bigint:pe.n}},{int:pe.e},{int:{bigint:pe.d}},{int:{bigint:pe.p}},{int:{bigint:pe.q}},{int:{bigint:pe.dmp1}},{int:{bigint:pe.dmq1}},{int:{bigint:pe.coeff}}]})}function k(pe){return j({seq:[{int:1},{octstr:{hex:pe.prvKeyHex}},{tag:["a0",!0,{oid:{name:pe.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+pe.pubKeyHex}}]}]})}function U(pe){return j({seq:[{int:0},{int:{bigint:pe.p}},{int:{bigint:pe.q}},{int:{bigint:pe.g}},{int:{bigint:pe.y}},{int:{bigint:pe.x}}]})}if((Z!==void 0&&a instanceof Z||J!==void 0&&a instanceof J||G!==void 0&&a instanceof G)&&a.isPublic==1&&(s===void 0||s=="PKCS8PUB"))return Qt(re=new H(a).getEncodedHex(),"PUBLIC KEY");if(s=="PKCS1PRV"&&Z!==void 0&&a instanceof Z&&(l===void 0||l==null)&&a.isPrivate==1)return Qt(re=te(a).getEncodedHex(),"RSA PRIVATE KEY");if(s=="PKCS1PRV"&&G!==void 0&&a instanceof G&&(l===void 0||l==null)&&a.isPrivate==1){var $=new N({name:a.curveName}).getEncodedHex(),V=k(a).getEncodedHex(),Y="";return Y+=Qt($,"EC PARAMETERS"),Y+=Qt(V,"EC PRIVATE KEY")}if(s=="PKCS1PRV"&&J!==void 0&&a instanceof J&&(l===void 0||l==null)&&a.isPrivate==1)return Qt(re=U(a).getEncodedHex(),"DSA PRIVATE KEY");if(s=="PKCS5PRV"&&Z!==void 0&&a instanceof Z&&l!==void 0&&l!=null&&a.isPrivate==1){var re=te(a).getEncodedHex();return d===void 0&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",re,l,d,w)}if(s=="PKCS5PRV"&&G!==void 0&&a instanceof G&&l!==void 0&&l!=null&&a.isPrivate==1)return re=k(a).getEncodedHex(),d===void 0&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",re,l,d,w);if(s=="PKCS5PRV"&&J!==void 0&&a instanceof J&&l!==void 0&&l!=null&&a.isPrivate==1)return re=U(a).getEncodedHex(),d===void 0&&(d="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",re,l,d,w);var ge=function(_e,Ke){var Xe=se(_e,Ke);return new j({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Xe.pbkdf2Salt}},{int:Xe.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Xe.encryptionSchemeIV}}]}]}]},{octstr:{hex:Xe.ciphertext}}]}).getEncodedHex()},se=function(_e,Ke){var Xe=P.lib.WordArray.random(8),qe=P.lib.WordArray.random(8),Yt=P.PBKDF2(Ke,Xe,{keySize:6,iterations:100}),jt=P.enc.Hex.parse(_e),Kt=P.TripleDES.encrypt(jt,Yt,{iv:qe})+"",pt={};return pt.ciphertext=Kt,pt.pbkdf2Salt=P.enc.Hex.stringify(Xe),pt.pbkdf2Iter=100,pt.encryptionSchemeAlg="DES-EDE3-CBC",pt.encryptionSchemeIV=P.enc.Hex.stringify(qe),pt};if(s=="PKCS8PRV"&&Z!=null&&a instanceof Z&&a.isPrivate==1){var Te=te(a).getEncodedHex();return re=j({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Te}}]}).getEncodedHex(),l===void 0||l==null?Qt(re,"PRIVATE KEY"):Qt(V=ge(re,l),"ENCRYPTED PRIVATE KEY")}if(s=="PKCS8PRV"&&G!==void 0&&a instanceof G&&a.isPrivate==1)return Te=new j({seq:[{int:1},{octstr:{hex:a.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+a.pubKeyHex}}]}]}).getEncodedHex(),re=j({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:a.curveName}}]},{octstr:{hex:Te}}]}).getEncodedHex(),l===void 0||l==null?Qt(re,"PRIVATE KEY"):Qt(V=ge(re,l),"ENCRYPTED PRIVATE KEY");if(s=="PKCS8PRV"&&J!==void 0&&a instanceof J&&a.isPrivate==1)return Te=new D({bigint:a.x}).getEncodedHex(),re=j({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:a.p}},{int:{bigint:a.q}},{int:{bigint:a.g}}]}]},{octstr:{hex:Te}}]}).getEncodedHex(),l===void 0||l==null?Qt(re,"PRIVATE KEY"):Qt(V=ge(re,l),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},yt.getKeyFromCSRPEM=function(a){var s=Hr(a,"CERTIFICATE REQUEST");return yt.getKeyFromCSRHex(s)},yt.getKeyFromCSRHex=function(a){var s=yt.parseCSRHex(a);return yt.getKey(s.p8pubkeyhex,null,"pkcs8pub")},yt.parseCSRHex=function(a){var s=fe,l=s.getChildIdx,d=s.getTLV,m={},w=a;if(w.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var T=l(w,0);if(T.length<1)throw new Error("malformed CSR(code:002)");if(w.substr(T[0],2)!="30")throw new Error("malformed CSR(code:003)");var O=l(w,T[0]);if(O.length<3)throw new Error("malformed CSR(code:004)");return m.p8pubkeyhex=d(w,O[2]),m},yt.getKeyID=function(a){var s=yt,l=fe;typeof a=="string"&&a.indexOf("BEGIN ")!=-1&&(a=s.getKey(a));var d=Hr(s.getPEM(a)),m=l.getIdxbyList(d,0,[1]),w=l.getV(d,m).substring(2);return R.crypto.Util.hashHex(w,"sha1")},yt.getJWKFromKey=function(a){var s={};if(a instanceof ve&&a.isPrivate)return s.kty="RSA",s.n=wt(a.n.toString(16)),s.e=wt(a.e.toString(16)),s.d=wt(a.d.toString(16)),s.p=wt(a.p.toString(16)),s.q=wt(a.q.toString(16)),s.dp=wt(a.dmp1.toString(16)),s.dq=wt(a.dmq1.toString(16)),s.qi=wt(a.coeff.toString(16)),s;if(a instanceof ve&&a.isPublic)return s.kty="RSA",s.n=wt(a.n.toString(16)),s.e=wt(a.e.toString(16)),s;if(a instanceof R.crypto.ECDSA&&a.isPrivate){if((d=a.getShortNISTPCurveName())!=="P-256"&&d!=="P-384")throw new Error("unsupported curve name for JWT: "+d);var l=a.getPublicKeyXYHex();return s.kty="EC",s.crv=d,s.x=wt(l.x),s.y=wt(l.y),s.d=wt(a.prvKeyHex),s}if(a instanceof R.crypto.ECDSA&&a.isPublic){var d;if((d=a.getShortNISTPCurveName())!=="P-256"&&d!=="P-384")throw new Error("unsupported curve name for JWT: "+d);return l=a.getPublicKeyXYHex(),s.kty="EC",s.crv=d,s.x=wt(l.x),s.y=wt(l.y),s}throw new Error("not supported key object")},ve.getPosArrayOfChildrenFromHex=function(a){return fe.getChildIdx(a,0)},ve.getHexValueArrayOfChildrenFromHex=function(a){var s,l=fe.getV,d=l(a,(s=ve.getPosArrayOfChildrenFromHex(a))[0]),m=l(a,s[1]),w=l(a,s[2]),T=l(a,s[3]),O=l(a,s[4]),N=l(a,s[5]),D=l(a,s[6]),j=l(a,s[7]),H=l(a,s[8]);return(s=new Array).push(d,m,w,T,O,N,D,j,H),s},ve.prototype.readPrivateKeyFromPEMString=function(a){var s=Hr(a),l=ve.getHexValueArrayOfChildrenFromHex(s);this.setPrivateEx(l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8])},ve.prototype.readPKCS5PrvKeyHex=function(a){var s=ve.getHexValueArrayOfChildrenFromHex(a);this.setPrivateEx(s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8])},ve.prototype.readPKCS8PrvKeyHex=function(a){var s,l,d,m,w,T,O,N,D=fe,j=D.getVbyListEx;if(D.isASN1HEX(a)===!1)throw new Error("not ASN.1 hex string");try{s=j(a,0,[2,0,1],"02"),l=j(a,0,[2,0,2],"02"),d=j(a,0,[2,0,3],"02"),m=j(a,0,[2,0,4],"02"),w=j(a,0,[2,0,5],"02"),T=j(a,0,[2,0,6],"02"),O=j(a,0,[2,0,7],"02"),N=j(a,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(s,l,d,m,w,T,O,N)},ve.prototype.readPKCS5PubKeyHex=function(a){var s=fe,l=s.getV;if(s.isASN1HEX(a)===!1)throw new Error("keyHex is not ASN.1 hex string");var d=s.getChildIdx(a,0);if(d.length!==2||a.substr(d[0],2)!=="02"||a.substr(d[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var m=l(a,d[0]),w=l(a,d[1]);this.setPublic(m,w)},ve.prototype.readPKCS8PubKeyHex=function(a){var s=fe;if(s.isASN1HEX(a)===!1)throw new Error("not ASN.1 hex string");if(s.getTLVbyListEx(a,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var l=s.getTLVbyListEx(a,0,[1,0]);this.readPKCS5PubKeyHex(l)},ve.prototype.readCertPubKeyHex=function(a,s){var l,d;(l=new Et).readCertHex(a),d=l.getPublicKeyHex(),this.readPKCS8PubKeyHex(d)};function $d(a,s){for(var l="",d=s/4-a.length,m=0;m<d;m++)l+="0";return l+a}function Kd(a,s,l){for(var d="",m=0;d.length<s;)d+=gr(l(Br(a+String.fromCharCode.apply(String,[(4278190080&m)>>24,(16711680&m)>>16,(65280&m)>>8,255&m])))),m+=1;return d}function Vd(a){for(var s in R.crypto.Util.DIGESTINFOHEAD){var l=R.crypto.Util.DIGESTINFOHEAD[s],d=l.length;if(a.substring(0,d)==l)return[s,a.substring(d)]}return[]}function Et(a){var s,l=fe,d=l.getChildIdx,m=l.getV,w=l.getTLV,T=l.getVbyList,O=l.getVbyListEx,N=l.getTLVbyList,D=l.getTLVbyListEx,j=l.getIdxbyList,H=l.getIdxbyListEx,z=l.getVidx,J=l.getInt,G=l.oidname,Z=l.hextooidstr,te=Hr;try{s=R.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var k=N(this.hex,0,[0,0]);if(k.substr(0,2)=="a0"){var U=N(k,0,[0]),$=J(U,0);if($<0||2<$)throw new Error("malformed version field");return this.version=$+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return O(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var k=D(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(k)},this.getAlgorithmIdentifierName=function(k){for(var U in s)if(k===s[U])return U;return G(O(k,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return N(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return N(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var k=T(this.hex,0,[0,4+this.foffset,0]);return k=k.replace(/(..)/g,"%$1"),k=decodeURIComponent(k)},this.getNotAfter=function(){var k=T(this.hex,0,[0,4+this.foffset,1]);return k=k.replace(/(..)/g,"%$1"),k=decodeURIComponent(k)},this.getPublicKeyHex=function(){return l.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return j(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var k=this.getPublicKeyIdx();return j(this.hex,k,[1,0],"30")},this.getPublicKey=function(){return yt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var k=N(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(k)},this.getSignatureValueHex=function(){return T(this.hex,0,[2],"03",!0)},this.verifySignature=function(k){var U=this.getSignatureAlgorithmField(),$=this.getSignatureValueHex(),V=N(this.hex,0,[0],"30"),Y=new R.crypto.Signature({alg:U});return Y.init(k),Y.updateHex(V),Y.verify($)},this.parseExt=function(k){var U,$,V;if(k===void 0){if(V=this.hex,this.version!==3)return-1;U=j(V,0,[0,7,0],"30"),$=d(V,U)}else{V=Hr(k);var Y=j(V,0,[0,3,0,0],"06");if(m(V,Y)!="2a864886f70d01090e")return void(this.aExtInfo=new Array);U=j(V,0,[0,3,0,1,0],"30"),$=d(V,U),this.hex=V}this.aExtInfo=new Array;for(var re=0;re<$.length;re++){var ge={critical:!1},se=0;d(V,$[re]).length===3&&(ge.critical=!0,se=1),ge.oid=l.hextooidstr(T(V,$[re],[0],"06"));var Te=j(V,$[re],[1+se]);ge.vidx=z(V,Te),this.aExtInfo.push(ge)}},this.getExtInfo=function(k){var U=this.aExtInfo,$=k;if(k.match(/^[0-9.]+$/)||($=R.asn1.x509.OID.name2oid(k)),$!==""){for(var V=0;V<U.length;V++)if(U[V].oid===$)return U[V]}},this.getExtBasicConstraints=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("basicConstraints");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"basicConstraints"};if(U&&(V.critical=!0),k==="3000")return V;if(k==="30030101ff")return V.cA=!0,V;if(k.substr(0,12)==="30060101ff02"){var Y=m(k,10),re=parseInt(Y,16);return V.cA=!0,V.pathLen=re,V}throw new Error("hExtV parse error: "+k)},this.getExtKeyUsage=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("keyUsage");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"keyUsage"};return U&&(V.critical=!0),V.names=this.getExtKeyUsageString(k).split(","),V},this.getExtKeyUsageBin=function(k){if(k===void 0){var U=this.getExtInfo("keyUsage");if(U===void 0)return"";k=w(this.hex,U.vidx)}if(k.length!=8&&k.length!=10)throw new Error("malformed key usage value: "+k);var $="000000000000000"+parseInt(k.substr(6),16).toString(2);return k.length==8&&($=$.slice(-8)),k.length==10&&($=$.slice(-16)),($=$.replace(/0+$/,""))==""&&($="0"),$},this.getExtKeyUsageString=function(k){for(var U=this.getExtKeyUsageBin(k),$=new Array,V=0;V<U.length;V++)U.substr(V,1)=="1"&&$.push(Et.KEYUSAGE_NAME[V]);return $.join(",")},this.getExtSubjectKeyIdentifier=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("subjectKeyIdentifier");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"subjectKeyIdentifier"};U&&(V.critical=!0);var Y=m(k,0);return V.kid={hex:Y},V},this.getExtAuthorityKeyIdentifier=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("authorityKeyIdentifier");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"authorityKeyIdentifier"};U&&(V.critical=!0);for(var Y=d(k,0),re=0;re<Y.length;re++){var ge=k.substr(Y[re],2);if(ge==="80"&&(V.kid={hex:m(k,Y[re])}),ge==="a1"){var se=w(k,Y[re]),Te=this.getGeneralNames(se);V.issuer=Te[0].dn}ge==="82"&&(V.sn={hex:m(k,Y[re])})}return V},this.getExtExtKeyUsage=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("extKeyUsage");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"extKeyUsage",array:[]};U&&(V.critical=!0);for(var Y=d(k,0),re=0;re<Y.length;re++)V.array.push(G(m(k,Y[re])));return V},this.getExtExtKeyUsageName=function(){var k=this.getExtInfo("extKeyUsage");if(k===void 0)return k;var U=new Array,$=w(this.hex,k.vidx);if($==="")return U;for(var V=d($,0),Y=0;Y<V.length;Y++)U.push(G(m($,V[Y])));return U},this.getExtSubjectAltName=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("subjectAltName");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"subjectAltName",array:[]};return U&&(V.critical=!0),V.array=this.getGeneralNames(k),V},this.getExtIssuerAltName=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("issuerAltName");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"issuerAltName",array:[]};return U&&(V.critical=!0),V.array=this.getGeneralNames(k),V},this.getGeneralNames=function(k){for(var U=d(k,0),$=[],V=0;V<U.length;V++){var Y=this.getGeneralName(w(k,U[V]));Y!==void 0&&$.push(Y)}return $},this.getGeneralName=function(k){var U=k.substr(0,2),$=m(k,0),V=gr($);return U=="81"?{rfc822:V}:U=="82"?{dns:V}:U=="86"?{uri:V}:U=="87"?{ip:bu($)}:U=="a4"?{dn:this.getX500Name($)}:void 0},this.getExtSubjectAltName2=function(){var k,U,$,V=this.getExtInfo("subjectAltName");if(V===void 0)return V;for(var Y=new Array,re=w(this.hex,V.vidx),ge=d(re,0),se=0;se<ge.length;se++)$=re.substr(ge[se],2),k=m(re,ge[se]),$==="81"&&(U=St(k),Y.push(["MAIL",U])),$==="82"&&(U=St(k),Y.push(["DNS",U])),$==="84"&&(U=Et.hex2dn(k,0),Y.push(["DN",U])),$==="86"&&(U=St(k),Y.push(["URI",U])),$==="87"&&(U=bu(k),Y.push(["IP",U]));return Y},this.getExtCRLDistributionPoints=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("cRLDistributionPoints");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"cRLDistributionPoints",array:[]};U&&(V.critical=!0);for(var Y=d(k,0),re=0;re<Y.length;re++){var ge=w(k,Y[re]);V.array.push(this.getDistributionPoint(ge))}return V},this.getDistributionPoint=function(k){for(var U={},$=d(k,0),V=0;V<$.length;V++){var Y=k.substr($[V],2),re=w(k,$[V]);Y=="a0"&&(U.dpname=this.getDistributionPointName(re))}return U},this.getDistributionPointName=function(k){for(var U={},$=d(k,0),V=0;V<$.length;V++){var Y=k.substr($[V],2),re=w(k,$[V]);Y=="a0"&&(U.full=this.getGeneralNames(re))}return U},this.getExtCRLDistributionPointsURI=function(){var k=this.getExtInfo("cRLDistributionPoints");if(k===void 0)return k;for(var U=new Array,$=d(this.hex,k.vidx),V=0;V<$.length;V++)try{var Y=St(T(this.hex,$[V],[0,0,0],"86"));U.push(Y)}catch{}return U},this.getExtAIAInfo=function(){var k=this.getExtInfo("authorityInfoAccess");if(k===void 0)return k;for(var U={ocsp:[],caissuer:[]},$=d(this.hex,k.vidx),V=0;V<$.length;V++){var Y=T(this.hex,$[V],[0],"06"),re=T(this.hex,$[V],[1],"86");Y==="2b06010505073001"&&U.ocsp.push(St(re)),Y==="2b06010505073002"&&U.caissuer.push(St(re))}return U},this.getExtAuthorityInfoAccess=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("authorityInfoAccess");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"authorityInfoAccess",array:[]};U&&(V.critical=!0);for(var Y=d(k,0),re=0;re<Y.length;re++){var ge=O(k,Y[re],[0],"06"),se=St(T(k,Y[re],[1],"86"));if(ge=="2b06010505073001")V.array.push({ocsp:se});else{if(ge!="2b06010505073002")throw new Error("unknown method: "+ge);V.array.push({caissuer:se})}}return V},this.getExtCertificatePolicies=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("certificatePolicies");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"certificatePolicies",array:[]};U&&(V.critical=!0);for(var Y=d(k,0),re=0;re<Y.length;re++){var ge=w(k,Y[re]),se=this.getPolicyInformation(ge);V.array.push(se)}return V},this.getPolicyInformation=function(k){var U={},$=T(k,0,[0],"06");U.policyoid=G($);var V=H(k,0,[1],"30");if(V!=-1){U.array=[];for(var Y=d(k,V),re=0;re<Y.length;re++){var ge=w(k,Y[re]),se=this.getPolicyQualifierInfo(ge);U.array.push(se)}}return U},this.getPolicyQualifierInfo=function(k){var U={},$=T(k,0,[0],"06");if($==="2b06010505070201"){var V=O(k,0,[1],"16");U.cps=gr(V)}else if($==="2b06010505070202"){var Y=N(k,0,[1],"30");U.unotice=this.getUserNotice(Y)}return U},this.getUserNotice=function(k){for(var U={},$=d(k,0),V=0;V<$.length;V++){var Y=w(k,$[V]);Y.substr(0,2)!="30"&&(U.exptext=this.getDisplayText(Y))}return U},this.getDisplayText=function(k){var U={};return U.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[k.substr(0,2)],U.str=gr(m(k,0)),U},this.getExtCRLNumber=function(k,U){var $={extname:"cRLNumber"};if(U&&($.critical=!0),k.substr(0,2)=="02")return $.num={hex:m(k,0)},$;throw new Error("hExtV parse error: "+k)},this.getExtCRLReason=function(k,U){var $={extname:"cRLReason"};if(U&&($.critical=!0),k.substr(0,2)=="0a")return $.code=parseInt(m(k,0),16),$;throw new Error("hExtV parse error: "+k)},this.getExtOcspNonce=function(k,U){var $={extname:"ocspNonce"};U&&($.critical=!0);var V=m(k,0);return $.hex=V,$},this.getExtOcspNoCheck=function(k,U){var $={extname:"ocspNoCheck"};return U&&($.critical=!0),$},this.getExtAdobeTimeStamp=function(k,U){if(k===void 0&&U===void 0){var $=this.getExtInfo("adobeTimeStamp");if($===void 0)return;k=w(this.hex,$.vidx),U=$.critical}var V={extname:"adobeTimeStamp"};U&&(V.critical=!0);var Y=d(k,0);if(Y.length>1){var re=w(k,Y[1]),ge=this.getGeneralName(re);ge.uri!=null&&(V.uri=ge.uri)}if(Y.length>2){var se=w(k,Y[2]);se=="0101ff"&&(V.reqauth=!0),se=="010100"&&(V.reqauth=!1)}return V},this.getX500NameRule=function(k){for(var U=null,$=[],V=0;V<k.length;V++)for(var Y=k[V],re=0;re<Y.length;re++)$.push(Y[re]);for(V=0;V<$.length;V++){var ge=$[V],se=ge.ds,Te=ge.value,pe=ge.type;if(se!="prn"&&se!="utf8"&&se!="ia5")return"mixed";if(se=="ia5"){if(pe!="CN")return"mixed";if(R.lang.String.isMail(Te))continue;return"mixed"}if(pe=="C"){if(se=="prn")continue;return"mixed"}if(U==null)U=se;else if(U!==se)return"mixed"}return U??"prn"},this.getX500Name=function(k){var U=this.getX500NameArray(k);return{array:U,str:this.dnarraytostr(U)}},this.getX500NameArray=function(k){for(var U=[],$=d(k,0),V=0;V<$.length;V++)U.push(this.getRDN(w(k,$[V])));return U},this.getRDN=function(k){for(var U=[],$=d(k,0),V=0;V<$.length;V++)U.push(this.getAttrTypeAndValue(w(k,$[V])));return U},this.getAttrTypeAndValue=function(k){var U={type:null,value:null,ds:null},$=d(k,0),V=T(k,$[0],[],"06"),Y=T(k,$[1],[]),re=R.asn1.ASN1Util.oidHexToInt(V);return U.type=R.asn1.x509.OID.oid2atype(re),U.ds=this.HEX2STAG[k.substr($[1],2)],U.ds!="bmp"?U.value=St(Y):U.value=Md(Y),U},this.readCertPEM=function(k){this.readCertHex(te(k))},this.readCertHex=function(k){this.hex=k,this.getVersion();try{j(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var k={};return k.version=this.getVersion(),k.serial={hex:this.getSerialNumberHex()},k.sigalg=this.getSignatureAlgorithmField(),k.issuer=this.getIssuer(),k.notbefore=this.getNotBefore(),k.notafter=this.getNotAfter(),k.subject=this.getSubject(),k.sbjpubkey=Qt(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(k.ext=this.getExtParamArray()),k.sighex=this.getSignatureValueHex(),k},this.getExtParamArray=function(k){k==null&&H(this.hex,0,[0,"[3]"])!=-1&&(k=D(this.hex,0,[0,"[3]",0],"30"));for(var U=[],$=d(k,0),V=0;V<$.length;V++){var Y=w(k,$[V]),re=this.getExtParam(Y);re!=null&&U.push(re)}return U},this.getExtParam=function(k){var U=d(k,0).length;if(U!=2&&U!=3)throw new Error("wrong number elements in Extension: "+U+" "+k);var $=Z(T(k,0,[0],"06")),V=!1;U==3&&N(k,0,[1])=="0101ff"&&(V=!0);var Y=N(k,0,[U-1,0]),re=void 0;if($=="2.5.29.14"?re=this.getExtSubjectKeyIdentifier(Y,V):$=="2.5.29.15"?re=this.getExtKeyUsage(Y,V):$=="2.5.29.17"?re=this.getExtSubjectAltName(Y,V):$=="2.5.29.18"?re=this.getExtIssuerAltName(Y,V):$=="2.5.29.19"?re=this.getExtBasicConstraints(Y,V):$=="2.5.29.31"?re=this.getExtCRLDistributionPoints(Y,V):$=="2.5.29.32"?re=this.getExtCertificatePolicies(Y,V):$=="2.5.29.35"?re=this.getExtAuthorityKeyIdentifier(Y,V):$=="2.5.29.37"?re=this.getExtExtKeyUsage(Y,V):$=="1.3.6.1.5.5.7.1.1"?re=this.getExtAuthorityInfoAccess(Y,V):$=="2.5.29.20"?re=this.getExtCRLNumber(Y,V):$=="2.5.29.21"?re=this.getExtCRLReason(Y,V):$=="1.3.6.1.5.5.7.48.1.2"?re=this.getExtOcspNonce(Y,V):$=="1.3.6.1.5.5.7.48.1.5"?re=this.getExtOcspNoCheck(Y,V):$=="1.2.840.113583.1.1.9.1"&&(re=this.getExtAdobeTimeStamp(Y,V)),re!=null)return re;var ge={extname:$,extn:Y};return V&&(ge.critical=!0),ge},this.findExt=function(k,U){for(var $=0;$<k.length;$++)if(k[$].extname==U)return k[$];return null},this.updateExtCDPFullURI=function(k,U){var $=this.findExt(k,"cRLDistributionPoints");if($!=null&&$.array!=null){for(var V=$.array,Y=0;Y<V.length;Y++)if(V[Y].dpname!=null&&V[Y].dpname.full!=null)for(var re=V[Y].dpname.full,ge=0;ge<re.length;ge++){var se=re[Y];se.uri!=null&&(se.uri=U)}}},this.updateExtAIAOCSP=function(k,U){var $=this.findExt(k,"authorityInfoAccess");if($!=null&&$.array!=null)for(var V=$.array,Y=0;Y<V.length;Y++)V[Y].ocsp!=null&&(V[Y].ocsp=U)},this.updateExtAIACAIssuer=function(k,U){var $=this.findExt(k,"authorityInfoAccess");if($!=null&&$.array!=null)for(var V=$.array,Y=0;Y<V.length;Y++)V[Y].caissuer!=null&&(V[Y].caissuer=U)},this.dnarraytostr=function(k){return"/"+k.map(function(U){return function(V){return V.map(function(Y){return function(ge){return ge.type+"="+ge.value}(Y).replace(/\+/,"\\+")}).join("+")}(U).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var k,U,$,V=function(Yt){return JSON.stringify(Yt.array).replace(/[\[\]\{\}\"]/g,"")},Y=function(Yt){for(var jt="",Kt=Yt.array,pt=0;pt<Kt.length;pt++){var bt=Kt[pt];if(jt+="    policy oid: "+bt.policyoid+`
`,bt.array!==void 0)for(var Rt=0;Rt<bt.array.length;Rt++){var Vt=bt.array[Rt];Vt.cps!==void 0&&(jt+="    cps: "+Vt.cps+`
`)}}return jt},re=function(Yt){for(var jt="",Kt=Yt.array,pt=0;pt<Kt.length;pt++){var bt=Kt[pt];try{bt.dpname.full[0].uri!==void 0&&(jt+="    "+bt.dpname.full[0].uri+`
`)}catch{}try{bt.dname.full[0].dn.hex!==void 0&&(jt+="    "+Et.hex2dn(bt.dpname.full[0].dn.hex)+`
`)}catch{}}return jt},ge=function(Yt){for(var jt="",Kt=Yt.array,pt=0;pt<Kt.length;pt++){var bt=Kt[pt];bt.caissuer!==void 0&&(jt+="    caissuer: "+bt.caissuer+`
`),bt.ocsp!==void 0&&(jt+="    ocsp: "+bt.ocsp+`
`)}return jt};if(k=`Basic Fields
`,k+="  serial number: "+this.getSerialNumberHex()+`
`,k+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,k+="  issuer: "+this.getIssuerString()+`
`,k+="  notBefore: "+this.getNotBefore()+`
`,k+="  notAfter: "+this.getNotAfter()+`
`,k+="  subject: "+this.getSubjectString()+`
`,k+=`  subject public key info: 
`,k+="    key algorithm: "+(U=this.getPublicKey()).type+`
`,U.type==="RSA"&&(k+="    n="+xu(U.n.toString(16)).substr(0,16)+`...
`,k+="    e="+xu(U.e.toString(16))+`
`),($=this.aExtInfo)!=null){k+=`X509v3 Extensions:
`;for(var se=0;se<$.length;se++){var Te=$[se],pe=R.asn1.x509.OID.oid2name(Te.oid);pe===""&&(pe=Te.oid);var _e="";if(Te.critical===!0&&(_e="CRITICAL"),k+="  "+pe+" "+_e+`:
`,pe==="basicConstraints"){var Ke=this.getExtBasicConstraints();Ke.cA===void 0?k+=`    {}
`:(k+="    cA=true",Ke.pathLen!==void 0&&(k+=", pathLen="+Ke.pathLen),k+=`
`)}else if(pe==="keyUsage")k+="    "+this.getExtKeyUsageString()+`
`;else if(pe==="subjectKeyIdentifier")k+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(pe==="authorityKeyIdentifier"){var Xe=this.getExtAuthorityKeyIdentifier();Xe.kid!==void 0&&(k+="    kid="+Xe.kid.hex+`
`)}else pe==="extKeyUsage"?k+="    "+this.getExtExtKeyUsage().array.join(", ")+`
`:pe==="subjectAltName"?k+="    "+V(this.getExtSubjectAltName())+`
`:pe==="cRLDistributionPoints"?k+=re(this.getExtCRLDistributionPoints()):pe==="authorityInfoAccess"?k+=ge(this.getExtAuthorityInfoAccess()):pe==="certificatePolicies"&&(k+=Y(this.getExtCertificatePolicies()))}}return k+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,k+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`},typeof a=="string"&&(a.indexOf("-----BEGIN")!=-1?this.readCertPEM(a):R.lang.String.isHex(a)&&this.readCertHex(a))}ve.prototype.sign=function(a,s){var l=function(m){return R.crypto.Util.hashString(m,s)}(a);return this.signWithMessageHash(l,s)},ve.prototype.signWithMessageHash=function(a,s){var l=Gt(R.crypto.Util.getPaddedDigestInfoHex(a,s,this.n.bitLength()),16);return $d(this.doPrivate(l).toString(16),this.n.bitLength())},ve.prototype.signPSS=function(a,s,l){var d=function(w){return R.crypto.Util.hashHex(w,s)}(Br(a));return l===void 0&&(l=-1),this.signWithMessageHashPSS(d,s,l)},ve.prototype.signWithMessageHashPSS=function(a,s,l){var d,m=gr(a),w=m.length,T=this.n.bitLength()-1,O=Math.ceil(T/8),N=function(k){return R.crypto.Util.hashHex(k,s)};if(l===-1||l===void 0)l=w;else if(l===-2)l=O-w-2;else if(l<-2)throw new Error("invalid salt length");if(O<w+l+2)throw new Error("data too long");var D="";l>0&&(D=new Array(l),new Oe().nextBytes(D),D=String.fromCharCode.apply(String,D));var j=gr(N(Br("\0\0\0\0\0\0\0\0"+m+D))),H=[];for(d=0;d<O-l-w-2;d+=1)H[d]=0;var z=String.fromCharCode.apply(String,H)+""+D,J=Kd(j,z.length,N),G=[];for(d=0;d<z.length;d+=1)G[d]=z.charCodeAt(d)^J.charCodeAt(d);var Z=65280>>8*O-T&255;for(G[0]&=~Z,d=0;d<w;d++)G.push(j.charCodeAt(d));return G.push(188),$d(this.doPrivate(new M(G)).toString(16),this.n.bitLength())},ve.prototype.verify=function(a,s){if((s=s.toLowerCase()).match(/^[0-9a-f]+$/)==null)return!1;var l=Gt(s,16),d=this.n.bitLength();if(l.bitLength()>d)return!1;var m=this.doPublic(l).toString(16);if(m.length+3!=d/4)return!1;var w=Vd(m.replace(/^1f+00/,""));if(w.length==0)return!1;var T=w[0];return w[1]==function(N){return R.crypto.Util.hashString(N,T)}(a)},ve.prototype.verifyWithMessageHash=function(a,s){if(s.length!=Math.ceil(this.n.bitLength()/4))return!1;var l=Gt(s,16);if(l.bitLength()>this.n.bitLength())return 0;var d=Vd(this.doPublic(l).toString(16).replace(/^1f+00/,""));return d.length==0?!1:(d[0],d[1]==a)},ve.prototype.verifyPSS=function(a,s,l,d){var m=function(T){return R.crypto.Util.hashHex(T,l)}(Br(a));return d===void 0&&(d=-1),this.verifyWithMessageHashPSS(m,s,l,d)},ve.prototype.verifyWithMessageHashPSS=function(a,s,l,d){if(s.length!=Math.ceil(this.n.bitLength()/4))return!1;var m,w=new M(s,16),T=function($){return R.crypto.Util.hashHex($,l)},O=gr(a),N=O.length,D=this.n.bitLength()-1,j=Math.ceil(D/8);if(d===-1||d===void 0)d=N;else if(d===-2)d=j-N-2;else if(d<-2)throw new Error("invalid salt length");if(j<N+d+2)throw new Error("data too long");var H=this.doPublic(w).toByteArray();for(m=0;m<H.length;m+=1)H[m]&=255;for(;H.length<j;)H.unshift(0);if(H[j-1]!==188)throw new Error("encoded message does not end in 0xbc");var z=(H=String.fromCharCode.apply(String,H)).substr(0,j-N-1),J=H.substr(z.length,N),G=65280>>8*j-D&255;if(z.charCodeAt(0)&G)throw new Error("bits beyond keysize not zero");var Z=Kd(J,z.length,T),te=[];for(m=0;m<z.length;m+=1)te[m]=z.charCodeAt(m)^Z.charCodeAt(m);te[0]&=~G;var k=j-N-d-2;for(m=0;m<k;m+=1)if(te[m]!==0)throw new Error("leftmost octets not zero");if(te[k]!==1)throw new Error("0x01 marker not found");return J===gr(T(Br("\0\0\0\0\0\0\0\0"+O+String.fromCharCode.apply(String,te.slice(-d)))))},ve.SALT_LEN_HLEN=-1,ve.SALT_LEN_MAX=-2,ve.SALT_LEN_RECOVER=-2,Et.hex2dn=function(a,s){s===void 0&&(s=0);var l=new Et;return fe.getTLV(a,s),l.getX500Name(a).str},Et.hex2rdn=function(a,s){if(s===void 0&&(s=0),a.substr(s,2)!=="31")throw new Error("malformed RDN");for(var l=new Array,d=fe.getChildIdx(a,s),m=0;m<d.length;m++)l.push(Et.hex2attrTypeValue(a,d[m]));return(l=l.map(function(w){return w.replace("+","\\+")})).join("+")},Et.hex2attrTypeValue=function(a,s){var l=fe,d=l.getV;if(s===void 0&&(s=0),a.substr(s,2)!=="30")throw new Error("malformed attribute type and value");var m=l.getChildIdx(a,s);m.length!==2||a.substr(m[0],2);var w=d(a,m[0]),T=R.asn1.ASN1Util.oidHexToInt(w);return R.asn1.x509.OID.oid2atype(T)+"="+gr(d(a,m[1]))},Et.getPublicKeyFromCertHex=function(a){var s=new Et;return s.readCertHex(a),s.getPublicKey()},Et.getPublicKeyFromCertPEM=function(a){var s=new Et;return s.readCertPEM(a),s.getPublicKey()},Et.getPublicKeyInfoPropOfCertPEM=function(a){var s,l,d=fe.getVbyList,m={};return m.algparam=null,(s=new Et).readCertPEM(a),l=s.getPublicKeyHex(),m.keyhex=d(l,0,[1],"03").substr(2),m.algoid=d(l,0,[0,0],"06"),m.algoid==="2a8648ce3d0201"&&(m.algparam=d(l,0,[0,1],"06")),m},Et.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],R!==void 0&&R||(n.KJUR=R={}),R.jws!==void 0&&R.jws||(R.jws={}),R.jws.JWS=function(){var a=R.jws.JWS.isSafeJSONString;this.parseJWS=function(s,l){if(this.parsedJWS===void 0||!l&&this.parsedJWS.sigvalH===void 0){var d=s.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(d==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var m=d[1],w=d[2],T=d[3],O=m+"."+w;if(this.parsedJWS={},this.parsedJWS.headB64U=m,this.parsedJWS.payloadB64U=w,this.parsedJWS.sigvalB64U=T,this.parsedJWS.si=O,!l){var N=We(T),D=Gt(N,16);this.parsedJWS.sigvalH=N,this.parsedJWS.sigvalBI=D}var j=Fr(m),H=Fr(w);if(this.parsedJWS.headS=j,this.parsedJWS.payloadS=H,!a(j,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+j}}},R.jws.JWS.sign=function(a,s,l,d,m){var w,T,O,N=R,D=N.jws.JWS,j=D.readSafeJSONString,H=D.isSafeJSONString,z=N.crypto,J=(z.ECDSA,z.Mac),G=z.Signature,Z=JSON;if(typeof s!="string"&&(s===void 0?"undefined":_(s))!="object")throw"spHeader must be JSON string or object: "+s;if((s===void 0?"undefined":_(s))=="object"&&(T=s,w=Z.stringify(T)),typeof s=="string"){if(!H(w=s))throw"JWS Head is not safe JSON string: "+w;T=j(w)}if(O=l,(l===void 0?"undefined":_(l))=="object"&&(O=Z.stringify(l)),a!=""&&a!=null||T.alg===void 0||(a=T.alg),a!=""&&a!=null&&T.alg===void 0&&(T.alg=a,w=Z.stringify(T)),a!==T.alg)throw"alg and sHeader.alg doesn't match: "+a+"!="+T.alg;var te=null;if(D.jwsalg2sigalg[a]===void 0)throw"unsupported alg name: "+a;te=D.jwsalg2sigalg[a];var k=no(w)+"."+no(O),U="";if(te.substr(0,4)=="Hmac"){if(d===void 0)throw"mac key shall be specified for HS* alg";var $=new J({alg:te,prov:"cryptojs",pass:d});$.updateString(k),U=$.doFinal()}else if(te.indexOf("withECDSA")!=-1){(Y=new G({alg:te})).init(d,m),Y.updateString(k);var V=Y.sign();U=R.crypto.ECDSA.asn1SigToConcatSig(V)}else{var Y;te!="none"&&((Y=new G({alg:te})).init(d,m),Y.updateString(k),U=Y.sign())}return k+"."+wt(U)},R.jws.JWS.verify=function(a,s,l){var d,m=R,w=m.jws.JWS,T=w.readSafeJSONString,O=m.crypto,N=O.ECDSA,D=O.Mac,j=O.Signature;_(ve)!==void 0&&(d=ve);var H=a.split(".");if(H.length!==3)return!1;var z=H[0]+"."+H[1],J=We(H[2]),G=T(Fr(H[0])),Z=null,te=null;if(G.alg===void 0)throw"algorithm not specified in header";if(te=(Z=G.alg).substr(0,2),l!=null&&Object.prototype.toString.call(l)==="[object Array]"&&l.length>0&&(":"+l.join(":")+":").indexOf(":"+Z+":")==-1)throw"algorithm '"+Z+"' not accepted in the list";if(Z!="none"&&s===null)throw"key shall be specified to verify.";if(typeof s=="string"&&s.indexOf("-----BEGIN ")!=-1&&(s=yt.getKey(s)),!(te!="RS"&&te!="PS"||s instanceof d))throw"key shall be a RSAKey obj for RS* and PS* algs";if(te=="ES"&&!(s instanceof N))throw"key shall be a ECDSA obj for ES* algs";var k=null;if(w.jwsalg2sigalg[G.alg]===void 0)throw"unsupported alg name: "+Z;if((k=w.jwsalg2sigalg[Z])=="none")throw"not supported";if(k.substr(0,4)=="Hmac"){if(s===void 0)throw"hexadecimal key shall be specified for HMAC";var U=new D({alg:k,pass:s});return U.updateString(z),J==U.doFinal()}if(k.indexOf("withECDSA")!=-1){var $,V=null;try{V=N.concatSigToASN1Sig(J)}catch{return!1}return($=new j({alg:k})).init(s),$.updateString(z),$.verify(V)}return($=new j({alg:k})).init(s),$.updateString(z),$.verify(J)},R.jws.JWS.parse=function(a){var s,l,d,m=a.split("."),w={};if(m.length!=2&&m.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return s=m[0],l=m[1],m.length==3&&(d=m[2]),w.headerObj=R.jws.JWS.readSafeJSONString(Fr(s)),w.payloadObj=R.jws.JWS.readSafeJSONString(Fr(l)),w.headerPP=JSON.stringify(w.headerObj,null,"  "),w.payloadObj==null?w.payloadPP=Fr(l):w.payloadPP=JSON.stringify(w.payloadObj,null,"  "),d!==void 0&&(w.sigHex=We(d)),w},R.jws.JWS.verifyJWT=function(a,s,l){var d=R.jws,m=d.JWS,w=m.readSafeJSONString,T=m.inArray,O=m.includedArray,N=a.split("."),D=N[0],j=N[1],H=(We(N[2]),w(Fr(D))),z=w(Fr(j));if(H.alg===void 0)return!1;if(l.alg===void 0)throw"acceptField.alg shall be specified";if(!T(H.alg,l.alg)||z.iss!==void 0&&_(l.iss)==="object"&&!T(z.iss,l.iss)||z.sub!==void 0&&_(l.sub)==="object"&&!T(z.sub,l.sub))return!1;if(z.aud!==void 0&&_(l.aud)==="object"){if(typeof z.aud=="string"){if(!T(z.aud,l.aud))return!1}else if(_(z.aud)=="object"&&!O(z.aud,l.aud))return!1}var J=d.IntDate.getNow();return l.verifyAt!==void 0&&typeof l.verifyAt=="number"&&(J=l.verifyAt),l.gracePeriod!==void 0&&typeof l.gracePeriod=="number"||(l.gracePeriod=0),!(z.exp!==void 0&&typeof z.exp=="number"&&z.exp+l.gracePeriod<J)&&!(z.nbf!==void 0&&typeof z.nbf=="number"&&J<z.nbf-l.gracePeriod)&&!(z.iat!==void 0&&typeof z.iat=="number"&&J<z.iat-l.gracePeriod)&&(z.jti===void 0||l.jti===void 0||z.jti===l.jti)&&!!m.verify(a,s,l.alg)},R.jws.JWS.includedArray=function(a,s){var l=R.jws.JWS.inArray;if(a===null||(a===void 0?"undefined":_(a))!=="object"||typeof a.length!="number")return!1;for(var d=0;d<a.length;d++)if(!l(a[d],s))return!1;return!0},R.jws.JWS.inArray=function(a,s){if(s===null||(s===void 0?"undefined":_(s))!=="object"||typeof s.length!="number")return!1;for(var l=0;l<s.length;l++)if(s[l]==a)return!0;return!1},R.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},R.jws.JWS.isSafeJSONString=function(a,s,l){var d=null;try{return((d=Ad(a))===void 0?"undefined":_(d))!="object"||d.constructor===Array?0:(s&&(s[l]=d),1)}catch{return 0}},R.jws.JWS.readSafeJSONString=function(a){var s=null;try{return((s=Ad(a))===void 0?"undefined":_(s))!="object"||s.constructor===Array?null:s}catch{return null}},R.jws.JWS.getEncodedSignatureValueFromJWS=function(a){var s=a.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(s==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return s[1]},R.jws.JWS.getJWKthumbprint=function(a){if(a.kty!=="RSA"&&a.kty!=="EC"&&a.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var s="{";if(a.kty==="RSA"){if(typeof a.n!="string"||typeof a.e!="string")throw"wrong n and e value for RSA key";s+='"e":"'+a.e+'",',s+='"kty":"'+a.kty+'",',s+='"n":"'+a.n+'"}'}else if(a.kty==="EC"){if(typeof a.crv!="string"||typeof a.x!="string"||typeof a.y!="string")throw"wrong crv, x and y value for EC key";s+='"crv":"'+a.crv+'",',s+='"kty":"'+a.kty+'",',s+='"x":"'+a.x+'",',s+='"y":"'+a.y+'"}'}else if(a.kty==="oct"){if(typeof a.k!="string")throw"wrong k value for oct(symmetric) key";s+='"kty":"'+a.kty+'",',s+='"k":"'+a.k+'"}'}var l=Br(s);return wt(R.crypto.Util.hashHex(l,"sha256"))},R.jws.IntDate={},R.jws.IntDate.get=function(a){var s=R.jws.IntDate,l=s.getNow,d=s.getZulu;if(a=="now")return l();if(a=="now + 1hour")return l()+3600;if(a=="now + 1day")return l()+86400;if(a=="now + 1month")return l()+2592e3;if(a=="now + 1year")return l()+31536e3;if(a.match(/Z$/))return d(a);if(a.match(/^[0-9]+$/))return parseInt(a);throw"unsupported format: "+a},R.jws.IntDate.getZulu=function(a){return Od(a)},R.jws.IntDate.getNow=function(){return~~(new Date/1e3)},R.jws.IntDate.intDate2UTCString=function(a){return new Date(1e3*a).toUTCString()},R.jws.IntDate.intDate2Zulu=function(a){var s=new Date(1e3*a);return("0000"+s.getUTCFullYear()).slice(-4)+("00"+(s.getUTCMonth()+1)).slice(-2)+("00"+s.getUTCDate()).slice(-2)+("00"+s.getUTCHours()).slice(-2)+("00"+s.getUTCMinutes()).slice(-2)+("00"+s.getUTCSeconds()).slice(-2)+"Z"},n.SecureRandom=Oe,n.rng_seed_time=X,n.BigInteger=M,n.RSAKey=ve;var Vm=R.crypto.EDSA;n.EDSA=Vm;var zm=R.crypto.DSA;n.DSA=zm;var Wm=R.crypto.Signature;n.Signature=Wm;var qm=R.crypto.MessageDigest;n.MessageDigest=qm;var Jm=R.crypto.Mac;n.Mac=Jm;var Gm=R.crypto.Cipher;n.Cipher=Gm,n.KEYUTIL=yt,n.ASN1HEX=fe,n.X509=Et,n.CryptoJS=P,n.b64tohex=Q,n.b64toBA=ie,n.stoBA=Rd,n.BAtos=Id,n.BAtohex=ms,n.stohex=Qr,n.stob64=function(s){return A(Qr(s))},n.stob64u=function(s){return ys(A(Qr(s)))},n.b64utos=function(s){return Id(ie(io(s)))},n.b64tob64u=ys,n.b64utob64=io,n.hex2b64=A,n.hextob64u=wt,n.b64utohex=We,n.utf8tob64u=no,n.b64utoutf8=Fr,n.utf8tob64=function(s){return A(vs(ws(s)))},n.b64toutf8=function(s){return decodeURIComponent(_s(Q(s)))},n.utf8tohex=Su,n.hextoutf8=St,n.hextorstr=gr,n.rstrtohex=Br,n.hextob64=Nd,n.hextob64nl=Ld,n.b64nltohex=Dd,n.hextopem=Qt,n.pemtohex=Hr,n.hextoArrayBuffer=function(s){if(s.length%2!=0)throw"input is not even length";if(s.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var l=new ArrayBuffer(s.length/2),d=new DataView(l),m=0;m<s.length/2;m++)d.setUint8(m,parseInt(s.substr(2*m,2),16));return l},n.ArrayBuffertohex=function(s){for(var l="",d=new DataView(s),m=0;m<s.byteLength;m++)l+=("00"+d.getUint8(m).toString(16)).slice(-2);return l},n.zulutomsec=Eu,n.zulutosec=Od,n.zulutodate=function(s){return new Date(Eu(s))},n.datetozulu=function(s,l,d){var m,w=s.getUTCFullYear();if(l){if(w<1950||2049<w)throw"not proper year for UTCTime: "+w;m=(""+w).slice(-2)}else m=("000"+w).slice(-4);if(m+=("0"+(s.getUTCMonth()+1)).slice(-2),m+=("0"+s.getUTCDate()).slice(-2),m+=("0"+s.getUTCHours()).slice(-2),m+=("0"+s.getUTCMinutes()).slice(-2),m+=("0"+s.getUTCSeconds()).slice(-2),d){var T=s.getUTCMilliseconds();T!==0&&(m+="."+(T=(T=("00"+T).slice(-3)).replace(/0+$/g,"")))}return m+="Z"},n.uricmptohex=vs,n.hextouricmp=_s,n.ipv6tohex=jd,n.hextoipv6=Ud,n.hextoip=bu,n.iptohex=function(s){var l="malformed IP address";if(!(s=s.toLowerCase(s)).match(/^[0-9.]+$/)){if(s.match(/^[0-9a-f:]+$/)&&s.indexOf(":")!==-1)return jd(s);throw l}var d=s.split(".");if(d.length!==4)throw l;var m="";try{for(var w=0;w<4;w++)m+=("0"+parseInt(d[w]).toString(16)).slice(-2);return m}catch{throw l}},n.encodeURIComponentAll=ws,n.newline_toUnix=function(s){return s=s.replace(/\r\n/gm,`
`)},n.newline_toDos=function(s){return s=(s=s.replace(/\r\n/gm,`
`)).replace(/\n/gm,`\r
`)},n.hextoposhex=xu,n.intarystrtohex=function(s){s=(s=(s=s.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return s.split(/,/).map(function(l,d,m){var w=parseInt(l);if(w<0||255<w)throw"integer not in range 0-255";return("00"+w.toString(16)).slice(-2)}).join("")}catch(l){throw"malformed integer array string: "+l}},n.strdiffidx=function(s,l){var d=s.length;s.length>l.length&&(d=l.length);for(var m=0;m<d;m++)if(s.charCodeAt(m)!=l.charCodeAt(m))return m;return s.length!=l.length?d:-1},n.KJUR=R;var Qm=R.crypto;n.crypto=Qm;var Ym=R.asn1;n.asn1=Ym;var Xm=R.jws;n.jws=Xm;var Zm=R.lang;n.lang=Zm}).call(this,i(28).Buffer)},function(r,n,i){(function(o){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var u=i(30),c=i(31),h=i(32);function f(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(W,S){if(f()<S)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(W=new Uint8Array(S)).__proto__=p.prototype:(W===null&&(W=new p(S)),W.length=S),W}function p(W,S,x){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(W,S,x);if(typeof W=="number"){if(typeof S=="string")throw new Error("If encoding is specified then the first argument must be a string");return E(this,W)}return y(this,W,S,x)}function y(W,S,x,K){if(typeof S=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&S instanceof ArrayBuffer?function(X,ne,ye,Ee){if(ne.byteLength,ye<0||ne.byteLength<ye)throw new RangeError("'offset' is out of bounds");if(ne.byteLength<ye+(Ee||0))throw new RangeError("'length' is out of bounds");return ne=ye===void 0&&Ee===void 0?new Uint8Array(ne):Ee===void 0?new Uint8Array(ne,ye):new Uint8Array(ne,ye,Ee),p.TYPED_ARRAY_SUPPORT?(X=ne).__proto__=p.prototype:X=C(X,ne),X}(W,S,x,K):typeof S=="string"?function(X,ne,ye){if(typeof ye=="string"&&ye!==""||(ye="utf8"),!p.isEncoding(ye))throw new TypeError('"encoding" must be a valid string encoding');var Ee=0|_(ne,ye),Ie=(X=g(X,Ee)).write(ne,ye);return Ie!==Ee&&(X=X.slice(0,Ie)),X}(W,S,x):function(X,ne){if(p.isBuffer(ne)){var ye=0|I(ne.length);return(X=g(X,ye)).length===0||ne.copy(X,0,0,ye),X}if(ne){if(typeof ArrayBuffer<"u"&&ne.buffer instanceof ArrayBuffer||"length"in ne)return typeof ne.length!="number"||function(Ie){return Ie!=Ie}(ne.length)?g(X,0):C(X,ne);if(ne.type==="Buffer"&&h(ne.data))return C(X,ne.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(W,S)}function F(W){if(typeof W!="number")throw new TypeError('"size" argument must be a number');if(W<0)throw new RangeError('"size" argument must not be negative')}function E(W,S){if(F(S),W=g(W,S<0?0:0|I(S)),!p.TYPED_ARRAY_SUPPORT)for(var x=0;x<S;++x)W[x]=0;return W}function C(W,S){var x=S.length<0?0:0|I(S.length);W=g(W,x);for(var K=0;K<x;K+=1)W[K]=255&S[K];return W}function I(W){if(W>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|W}function _(W,S){if(p.isBuffer(W))return W.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(W)||W instanceof ArrayBuffer))return W.byteLength;typeof W!="string"&&(W=""+W);var x=W.length;if(x===0)return 0;for(var K=!1;;)switch(S){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":case void 0:return mt(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return $e(W).length;default:if(K)return mt(W).length;S=(""+S).toLowerCase(),K=!0}}function v(W,S,x){var K=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0)<=(S>>>=0))return"";for(W||(W="utf8");;)switch(W){case"hex":return Me(this,S,x);case"utf8":case"utf-8":return Fe(this,S,x);case"ascii":return ze(this,S,x);case"latin1":case"binary":return st(this,S,x);case"base64":return ke(this,S,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,S,x);default:if(K)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),K=!0}}function b(W,S,x){var K=W[S];W[S]=W[x],W[x]=K}function P(W,S,x,K,q){if(W.length===0)return-1;if(typeof x=="string"?(K=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,isNaN(x)&&(x=q?0:W.length-1),x<0&&(x=W.length+x),x>=W.length){if(q)return-1;x=W.length-1}else if(x<0){if(!q)return-1;x=0}if(typeof S=="string"&&(S=p.from(S,K)),p.isBuffer(S))return S.length===0?-1:B(W,S,x,K,q);if(typeof S=="number")return S&=255,p.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(W,S,x):Uint8Array.prototype.lastIndexOf.call(W,S,x):B(W,[S],x,K,q);throw new TypeError("val must be string, number or Buffer")}function B(W,S,x,K,q){var X,ne=1,ye=W.length,Ee=S.length;if(K!==void 0&&((K=String(K).toLowerCase())==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(W.length<2||S.length<2)return-1;ne=2,ye/=2,Ee/=2,x/=2}function Ie(xr,ve){return ne===1?xr[ve]:xr.readUInt16BE(ve*ne)}if(q){var Ae=-1;for(X=x;X<ye;X++)if(Ie(W,X)===Ie(S,Ae===-1?0:X-Ae)){if(Ae===-1&&(Ae=X),X-Ae+1===Ee)return Ae*ne}else Ae!==-1&&(X-=X-Ae),Ae=-1}else for(x+Ee>ye&&(x=ye-Ee),X=x;X>=0;X--){for(var Oe=!0,Gt=0;Gt<Ee;Gt++)if(Ie(W,X+Gt)!==Ie(S,Gt)){Oe=!1;break}if(Oe)return X}return-1}function L(W,S,x,K){x=Number(x)||0;var q=W.length-x;K?(K=Number(K))>q&&(K=q):K=q;var X=S.length;if(X%2!=0)throw new TypeError("Invalid hex string");K>X/2&&(K=X/2);for(var ne=0;ne<K;++ne){var ye=parseInt(S.substr(2*ne,2),16);if(isNaN(ye))return ne;W[x+ne]=ye}return ne}function A(W,S,x,K){return De(mt(S,W.length-x),W,x,K)}function Q(W,S,x,K){return De(function(X){for(var ne=[],ye=0;ye<X.length;++ye)ne.push(255&X.charCodeAt(ye));return ne}(S),W,x,K)}function ie(W,S,x,K){return Q(W,S,x,K)}function M(W,S,x,K){return De($e(S),W,x,K)}function oe(W,S,x,K){return De(function(X,ne){for(var ye,Ee,Ie,Ae=[],Oe=0;Oe<X.length&&!((ne-=2)<0);++Oe)Ee=(ye=X.charCodeAt(Oe))>>8,Ie=ye%256,Ae.push(Ie),Ae.push(Ee);return Ae}(S,W.length-x),W,x,K)}function ke(W,S,x){return S===0&&x===W.length?u.fromByteArray(W):u.fromByteArray(W.slice(S,x))}function Fe(W,S,x){x=Math.min(W.length,x);for(var K=[],q=S;q<x;){var X,ne,ye,Ee,Ie=W[q],Ae=null,Oe=Ie>239?4:Ie>223?3:Ie>191?2:1;if(q+Oe<=x)switch(Oe){case 1:Ie<128&&(Ae=Ie);break;case 2:(192&(X=W[q+1]))==128&&(Ee=(31&Ie)<<6|63&X)>127&&(Ae=Ee);break;case 3:X=W[q+1],ne=W[q+2],(192&X)==128&&(192&ne)==128&&(Ee=(15&Ie)<<12|(63&X)<<6|63&ne)>2047&&(Ee<55296||Ee>57343)&&(Ae=Ee);break;case 4:X=W[q+1],ne=W[q+2],ye=W[q+3],(192&X)==128&&(192&ne)==128&&(192&ye)==128&&(Ee=(15&Ie)<<18|(63&X)<<12|(63&ne)<<6|63&ye)>65535&&Ee<1114112&&(Ae=Ee)}Ae===null?(Ae=65533,Oe=1):Ae>65535&&(Ae-=65536,K.push(Ae>>>10&1023|55296),Ae=56320|1023&Ae),K.push(Ae),q+=Oe}return function(xr){var ve=xr.length;if(ve<=ft)return String.fromCharCode.apply(String,xr);for(var rt="",Ce=0;Ce<ve;)rt+=String.fromCharCode.apply(String,xr.slice(Ce,Ce+=ft));return rt}(K)}n.Buffer=p,n.SlowBuffer=function(S){return+S!=S&&(S=0),p.alloc(+S)},n.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=o.TYPED_ARRAY_SUPPORT!==void 0?o.TYPED_ARRAY_SUPPORT:function(){try{var S=new Uint8Array(1);return S.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},S.foo()===42&&typeof S.subarray=="function"&&S.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=f(),p.poolSize=8192,p._augment=function(W){return W.__proto__=p.prototype,W},p.from=function(W,S,x){return y(null,W,S,x)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(W,S,x){return function(q,X,ne,ye){return F(X),X<=0?g(q,X):ne!==void 0?typeof ye=="string"?g(q,X).fill(ne,ye):g(q,X).fill(ne):g(q,X)}(null,W,S,x)},p.allocUnsafe=function(W){return E(null,W)},p.allocUnsafeSlow=function(W){return E(null,W)},p.isBuffer=function(S){return!(S==null||!S._isBuffer)},p.compare=function(S,x){if(!p.isBuffer(S)||!p.isBuffer(x))throw new TypeError("Arguments must be Buffers");if(S===x)return 0;for(var K=S.length,q=x.length,X=0,ne=Math.min(K,q);X<ne;++X)if(S[X]!==x[X]){K=S[X],q=x[X];break}return K<q?-1:q<K?1:0},p.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(S,x){if(!h(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return p.alloc(0);var K;if(x===void 0)for(x=0,K=0;K<S.length;++K)x+=S[K].length;var q=p.allocUnsafe(x),X=0;for(K=0;K<S.length;++K){var ne=S[K];if(!p.isBuffer(ne))throw new TypeError('"list" argument must be an Array of Buffers');ne.copy(q,X),X+=ne.length}return q},p.byteLength=_,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var S=this.length;if(S%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var x=0;x<S;x+=2)b(this,x,x+1);return this},p.prototype.swap32=function(){var S=this.length;if(S%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var x=0;x<S;x+=4)b(this,x,x+3),b(this,x+1,x+2);return this},p.prototype.swap64=function(){var S=this.length;if(S%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var x=0;x<S;x+=8)b(this,x,x+7),b(this,x+1,x+6),b(this,x+2,x+5),b(this,x+3,x+4);return this},p.prototype.toString=function(){var S=0|this.length;return S===0?"":arguments.length===0?Fe(this,0,S):v.apply(this,arguments)},p.prototype.equals=function(S){if(!p.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S||p.compare(this,S)===0},p.prototype.inspect=function(){var S="",x=n.INSPECT_MAX_BYTES;return this.length>0&&(S=this.toString("hex",0,x).match(/.{2}/g).join(" "),this.length>x&&(S+=" ... ")),"<Buffer "+S+">"},p.prototype.compare=function(S,x,K,q,X){if(!p.isBuffer(S))throw new TypeError("Argument must be a Buffer");if(x===void 0&&(x=0),K===void 0&&(K=S?S.length:0),q===void 0&&(q=0),X===void 0&&(X=this.length),x<0||K>S.length||q<0||X>this.length)throw new RangeError("out of range index");if(q>=X&&x>=K)return 0;if(q>=X)return-1;if(x>=K)return 1;if(this===S)return 0;for(var ne=(X>>>=0)-(q>>>=0),ye=(K>>>=0)-(x>>>=0),Ee=Math.min(ne,ye),Ie=this.slice(q,X),Ae=S.slice(x,K),Oe=0;Oe<Ee;++Oe)if(Ie[Oe]!==Ae[Oe]){ne=Ie[Oe],ye=Ae[Oe];break}return ne<ye?-1:ye<ne?1:0},p.prototype.includes=function(S,x,K){return this.indexOf(S,x,K)!==-1},p.prototype.indexOf=function(S,x,K){return P(this,S,x,K,!0)},p.prototype.lastIndexOf=function(S,x,K){return P(this,S,x,K,!1)},p.prototype.write=function(S,x,K,q){if(x===void 0)q="utf8",K=this.length,x=0;else if(K===void 0&&typeof x=="string")q=x,K=this.length,x=0;else{if(!isFinite(x))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");x|=0,isFinite(K)?(K|=0,q===void 0&&(q="utf8")):(q=K,K=void 0)}var X=this.length-x;if((K===void 0||K>X)&&(K=X),S.length>0&&(K<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");for(var ne=!1;;)switch(q){case"hex":return L(this,S,x,K);case"utf8":case"utf-8":return A(this,S,x,K);case"ascii":return Q(this,S,x,K);case"latin1":case"binary":return ie(this,S,x,K);case"base64":return M(this,S,x,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,S,x,K);default:if(ne)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),ne=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ft=4096;function ze(W,S,x){var K="";x=Math.min(W.length,x);for(var q=S;q<x;++q)K+=String.fromCharCode(127&W[q]);return K}function st(W,S,x){var K="";x=Math.min(W.length,x);for(var q=S;q<x;++q)K+=String.fromCharCode(W[q]);return K}function Me(W,S,x){var K=W.length;(!S||S<0)&&(S=0),(!x||x<0||x>K)&&(x=K);for(var q="",X=S;X<x;++X)q+=He(W[X]);return q}function le(W,S,x){for(var K=W.slice(S,x),q="",X=0;X<K.length;X+=2)q+=String.fromCharCode(K[X]+256*K[X+1]);return q}function ue(W,S,x){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+S>x)throw new RangeError("Trying to access beyond buffer length")}function ce(W,S,x,K,q,X){if(!p.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>q||S<X)throw new RangeError('"value" argument is out of bounds');if(x+K>W.length)throw new RangeError("Index out of range")}function Se(W,S,x,K){S<0&&(S=65535+S+1);for(var q=0,X=Math.min(W.length-x,2);q<X;++q)W[x+q]=(S&255<<8*(K?q:1-q))>>>8*(K?q:1-q)}function be(W,S,x,K){S<0&&(S=4294967295+S+1);for(var q=0,X=Math.min(W.length-x,4);q<X;++q)W[x+q]=S>>>8*(K?q:3-q)&255}function at(W,S,x,K,q,X){if(x+K>W.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function Be(W,S,x,K,q){return q||at(W,0,x,4),c.write(W,S,x,K,23,4),x+4}function ht(W,S,x,K,q){return q||at(W,0,x,8),c.write(W,S,x,K,52,8),x+8}p.prototype.slice=function(S,x){var K,q=this.length;if((S=~~S)<0?(S+=q)<0&&(S=0):S>q&&(S=q),(x=x===void 0?q:~~x)<0?(x+=q)<0&&(x=0):x>q&&(x=q),x<S&&(x=S),p.TYPED_ARRAY_SUPPORT)(K=this.subarray(S,x)).__proto__=p.prototype;else{var X=x-S;K=new p(X,void 0);for(var ne=0;ne<X;++ne)K[ne]=this[ne+S]}return K},p.prototype.readUIntLE=function(S,x,K){S|=0,x|=0,K||ue(S,x,this.length);for(var q=this[S],X=1,ne=0;++ne<x&&(X*=256);)q+=this[S+ne]*X;return q},p.prototype.readUIntBE=function(S,x,K){S|=0,x|=0,K||ue(S,x,this.length);for(var q=this[S+--x],X=1;x>0&&(X*=256);)q+=this[S+--x]*X;return q},p.prototype.readUInt8=function(S,x){return x||ue(S,1,this.length),this[S]},p.prototype.readUInt16LE=function(S,x){return x||ue(S,2,this.length),this[S]|this[S+1]<<8},p.prototype.readUInt16BE=function(S,x){return x||ue(S,2,this.length),this[S]<<8|this[S+1]},p.prototype.readUInt32LE=function(S,x){return x||ue(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+16777216*this[S+3]},p.prototype.readUInt32BE=function(S,x){return x||ue(S,4,this.length),16777216*this[S]+(this[S+1]<<16|this[S+2]<<8|this[S+3])},p.prototype.readIntLE=function(S,x,K){S|=0,x|=0,K||ue(S,x,this.length);for(var q=this[S],X=1,ne=0;++ne<x&&(X*=256);)q+=this[S+ne]*X;return q>=(X*=128)&&(q-=Math.pow(2,8*x)),q},p.prototype.readIntBE=function(S,x,K){S|=0,x|=0,K||ue(S,x,this.length);for(var q=x,X=1,ne=this[S+--q];q>0&&(X*=256);)ne+=this[S+--q]*X;return ne>=(X*=128)&&(ne-=Math.pow(2,8*x)),ne},p.prototype.readInt8=function(S,x){return x||ue(S,1,this.length),128&this[S]?-1*(255-this[S]+1):this[S]},p.prototype.readInt16LE=function(S,x){x||ue(S,2,this.length);var K=this[S]|this[S+1]<<8;return 32768&K?4294901760|K:K},p.prototype.readInt16BE=function(S,x){x||ue(S,2,this.length);var K=this[S+1]|this[S]<<8;return 32768&K?4294901760|K:K},p.prototype.readInt32LE=function(S,x){return x||ue(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},p.prototype.readInt32BE=function(S,x){return x||ue(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},p.prototype.readFloatLE=function(S,x){return x||ue(S,4,this.length),c.read(this,S,!0,23,4)},p.prototype.readFloatBE=function(S,x){return x||ue(S,4,this.length),c.read(this,S,!1,23,4)},p.prototype.readDoubleLE=function(S,x){return x||ue(S,8,this.length),c.read(this,S,!0,52,8)},p.prototype.readDoubleBE=function(S,x){return x||ue(S,8,this.length),c.read(this,S,!1,52,8)},p.prototype.writeUIntLE=function(S,x,K,q){S=+S,x|=0,K|=0,q||ce(this,S,x,K,Math.pow(2,8*K)-1,0);var X=1,ne=0;for(this[x]=255&S;++ne<K&&(X*=256);)this[x+ne]=S/X&255;return x+K},p.prototype.writeUIntBE=function(S,x,K,q){S=+S,x|=0,K|=0,q||ce(this,S,x,K,Math.pow(2,8*K)-1,0);var X=K-1,ne=1;for(this[x+X]=255&S;--X>=0&&(ne*=256);)this[x+X]=S/ne&255;return x+K},p.prototype.writeUInt8=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,1,255,0),p.TYPED_ARRAY_SUPPORT||(S=Math.floor(S)),this[x]=255&S,x+1},p.prototype.writeUInt16LE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[x]=255&S,this[x+1]=S>>>8):Se(this,S,x,!0),x+2},p.prototype.writeUInt16BE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[x]=S>>>8,this[x+1]=255&S):Se(this,S,x,!1),x+2},p.prototype.writeUInt32LE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[x+3]=S>>>24,this[x+2]=S>>>16,this[x+1]=S>>>8,this[x]=255&S):be(this,S,x,!0),x+4},p.prototype.writeUInt32BE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[x]=S>>>24,this[x+1]=S>>>16,this[x+2]=S>>>8,this[x+3]=255&S):be(this,S,x,!1),x+4},p.prototype.writeIntLE=function(S,x,K,q){if(S=+S,x|=0,!q){var X=Math.pow(2,8*K-1);ce(this,S,x,K,X-1,-X)}var ne=0,ye=1,Ee=0;for(this[x]=255&S;++ne<K&&(ye*=256);)S<0&&Ee===0&&this[x+ne-1]!==0&&(Ee=1),this[x+ne]=(S/ye>>0)-Ee&255;return x+K},p.prototype.writeIntBE=function(S,x,K,q){if(S=+S,x|=0,!q){var X=Math.pow(2,8*K-1);ce(this,S,x,K,X-1,-X)}var ne=K-1,ye=1,Ee=0;for(this[x+ne]=255&S;--ne>=0&&(ye*=256);)S<0&&Ee===0&&this[x+ne+1]!==0&&(Ee=1),this[x+ne]=(S/ye>>0)-Ee&255;return x+K},p.prototype.writeInt8=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,1,127,-128),p.TYPED_ARRAY_SUPPORT||(S=Math.floor(S)),S<0&&(S=255+S+1),this[x]=255&S,x+1},p.prototype.writeInt16LE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[x]=255&S,this[x+1]=S>>>8):Se(this,S,x,!0),x+2},p.prototype.writeInt16BE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[x]=S>>>8,this[x+1]=255&S):Se(this,S,x,!1),x+2},p.prototype.writeInt32LE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[x]=255&S,this[x+1]=S>>>8,this[x+2]=S>>>16,this[x+3]=S>>>24):be(this,S,x,!0),x+4},p.prototype.writeInt32BE=function(S,x,K){return S=+S,x|=0,K||ce(this,S,x,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),p.TYPED_ARRAY_SUPPORT?(this[x]=S>>>24,this[x+1]=S>>>16,this[x+2]=S>>>8,this[x+3]=255&S):be(this,S,x,!1),x+4},p.prototype.writeFloatLE=function(S,x,K){return Be(this,S,x,!0,K)},p.prototype.writeFloatBE=function(S,x,K){return Be(this,S,x,!1,K)},p.prototype.writeDoubleLE=function(S,x,K){return ht(this,S,x,!0,K)},p.prototype.writeDoubleBE=function(S,x,K){return ht(this,S,x,!1,K)},p.prototype.copy=function(S,x,K,q){if(K||(K=0),q||q===0||(q=this.length),x>=S.length&&(x=S.length),x||(x=0),q>0&&q<K&&(q=K),q===K||S.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("sourceStart out of bounds");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),S.length-x<q-K&&(q=S.length-x+K);var X,ne=q-K;if(this===S&&K<x&&x<q)for(X=ne-1;X>=0;--X)S[X+x]=this[X+K];else if(ne<1e3||!p.TYPED_ARRAY_SUPPORT)for(X=0;X<ne;++X)S[X+x]=this[X+K];else Uint8Array.prototype.set.call(S,this.subarray(K,K+ne),x);return ne},p.prototype.fill=function(S,x,K,q){if(typeof S=="string"){if(typeof x=="string"?(q=x,x=0,K=this.length):typeof K=="string"&&(q=K,K=this.length),S.length===1){var X=S.charCodeAt(0);X<256&&(S=X)}if(q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!p.isEncoding(q))throw new TypeError("Unknown encoding: "+q)}else typeof S=="number"&&(S&=255);if(x<0||this.length<x||this.length<K)throw new RangeError("Out of range index");if(K<=x)return this;var ne;if(x>>>=0,K=K===void 0?this.length:K>>>0,S||(S=0),typeof S=="number")for(ne=x;ne<K;++ne)this[ne]=S;else{var ye=p.isBuffer(S)?S:mt(new p(S,q).toString()),Ee=ye.length;for(ne=0;ne<K-x;++ne)this[ne+x]=ye[ne%Ee]}return this};var tt=/[^+\/0-9A-Za-z-_]/g;function He(W){return W<16?"0"+W.toString(16):W.toString(16)}function mt(W,S){var x;S=S||1/0;for(var K=W.length,q=null,X=[],ne=0;ne<K;++ne){if((x=W.charCodeAt(ne))>55295&&x<57344){if(!q){if(x>56319){(S-=3)>-1&&X.push(239,191,189);continue}if(ne+1===K){(S-=3)>-1&&X.push(239,191,189);continue}q=x;continue}if(x<56320){(S-=3)>-1&&X.push(239,191,189),q=x;continue}x=65536+(q-55296<<10|x-56320)}else q&&(S-=3)>-1&&X.push(239,191,189);if(q=null,x<128){if((S-=1)<0)break;X.push(x)}else if(x<2048){if((S-=2)<0)break;X.push(x>>6|192,63&x|128)}else if(x<65536){if((S-=3)<0)break;X.push(x>>12|224,x>>6&63|128,63&x|128)}else{if(!(x<1114112))throw new Error("Invalid code point");if((S-=4)<0)break;X.push(x>>18|240,x>>12&63|128,x>>6&63|128,63&x|128)}}return X}function $e(W){return u.toByteArray(function(x){if((x=function(q){return q.trim?q.trim():q.replace(/^\s+|\s+$/g,"")}(x).replace(tt,"")).length<2)return"";for(;x.length%4!=0;)x+="=";return x}(W))}function De(W,S,x,K){for(var q=0;q<K&&!(q+x>=S.length||q>=W.length);++q)S[q+x]=W[q];return q}}).call(this,i(29))},function(r,n){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}r.exports=i},function(r,n,i){n.byteLength=function(E){var C=p(E),I=C[0],_=C[1];return 3*(I+_)/4-_},n.toByteArray=function(E){var C,I,_=p(E),v=_[0],b=_[1],P=new c(function(Q,ie,M){return 3*(ie+M)/4-M}(0,v,b)),B=0,L=b>0?v-4:v;for(I=0;I<L;I+=4)C=u[E.charCodeAt(I)]<<18|u[E.charCodeAt(I+1)]<<12|u[E.charCodeAt(I+2)]<<6|u[E.charCodeAt(I+3)],P[B++]=C>>16&255,P[B++]=C>>8&255,P[B++]=255&C;return b===2&&(C=u[E.charCodeAt(I)]<<2|u[E.charCodeAt(I+1)]>>4,P[B++]=255&C),b===1&&(C=u[E.charCodeAt(I)]<<10|u[E.charCodeAt(I+1)]<<4|u[E.charCodeAt(I+2)]>>2,P[B++]=C>>8&255,P[B++]=255&C),P},n.fromByteArray=function(E){for(var C,I=E.length,_=I%3,v=[],b=16383,P=0,B=I-_;P<B;P+=b)v.push(y(E,P,P+b>B?B:P+b));return _===1?(C=E[I-1],v.push(o[C>>2]+o[C<<4&63]+"==")):_===2&&(C=(E[I-2]<<8)+E[I-1],v.push(o[C>>10]+o[C>>4&63]+o[C<<2&63]+"=")),v.join("")};for(var o=[],u=[],c=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,g=h.length;f<g;++f)o[f]=h[f],u[h.charCodeAt(f)]=f;function p(F){var E=F.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=F.indexOf("=");return C===-1&&(C=E),[C,C===E?0:4-C%4]}function y(F,E,C){for(var I,_,v=[],b=E;b<C;b+=3)I=(F[b]<<16&16711680)+(F[b+1]<<8&65280)+(255&F[b+2]),v.push(o[(_=I)>>18&63]+o[_>>12&63]+o[_>>6&63]+o[63&_]);return v.join("")}u[45]=62,u[95]=63},function(r,n){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */n.read=function(i,o,u,c,h){var f,g,p=8*h-c-1,y=(1<<p)-1,F=y>>1,E=-7,C=u?h-1:0,I=u?-1:1,_=i[o+C];for(C+=I,f=_&(1<<-E)-1,_>>=-E,E+=p;E>0;f=256*f+i[o+C],C+=I,E-=8);for(g=f&(1<<-E)-1,f>>=-E,E+=c;E>0;g=256*g+i[o+C],C+=I,E-=8);if(f===0)f=1-F;else{if(f===y)return g?NaN:1/0*(_?-1:1);g+=Math.pow(2,c),f-=F}return(_?-1:1)*g*Math.pow(2,f-c)},n.write=function(i,o,u,c,h,f){var g,p,y,F=8*f-h-1,E=(1<<F)-1,C=E>>1,I=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=c?0:f-1,v=c?1:-1,b=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(p=isNaN(o)?1:0,g=E):(g=Math.floor(Math.log(o)/Math.LN2),o*(y=Math.pow(2,-g))<1&&(g--,y*=2),(o+=g+C>=1?I/y:I*Math.pow(2,1-C))*y>=2&&(g++,y/=2),g+C>=E?(p=0,g=E):g+C>=1?(p=(o*y-1)*Math.pow(2,h),g+=C):(p=o*Math.pow(2,C-1)*Math.pow(2,h),g=0));h>=8;i[u+_]=255&p,_+=v,p/=256,h-=8);for(g=g<<h|p,F+=h;F>0;i[u+_]=255&g,_+=v,g/=256,F-=8);i[u+_-v]|=128*b}},function(r,n){var i={}.toString;r.exports=Array.isArray||function(o){return i.call(o)=="[object Array]"}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c){var h=c.jws,f=c.KeyUtil,g=c.X509,p=c.crypto,y=c.hextob64u,F=c.b64tohex,E=c.AllowedSigningAlgs;return function(){function C(){(function(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")})(this,C)}return C.parseJwt=function(_){o.Log.debug("JoseUtil.parseJwt");try{var v=h.JWS.parse(_);return{header:v.headerObj,payload:v.payloadObj}}catch(b){o.Log.error(b)}},C.validateJwt=function(_,v,b,P,B,L,A){o.Log.debug("JoseUtil.validateJwt");try{if(v.kty==="RSA")if(v.e&&v.n)v=f.getKey(v);else{if(!v.x5c||!v.x5c.length)return o.Log.error("JoseUtil.validateJwt: RSA key missing key material",v),Promise.reject(new Error("RSA key missing key material"));var Q=F(v.x5c[0]);v=g.getPublicKeyFromCertHex(Q)}else{if(v.kty!=="EC")return o.Log.error("JoseUtil.validateJwt: Unsupported key type",v&&v.kty),Promise.reject(new Error(v.kty));if(!(v.crv&&v.x&&v.y))return o.Log.error("JoseUtil.validateJwt: EC key missing key material",v),Promise.reject(new Error("EC key missing key material"));v=f.getKey(v)}return C._validateJwt(_,v,b,P,B,L,A)}catch(ie){return o.Log.error(ie&&ie.message||ie),Promise.reject("JWT validation failed")}},C.validateJwtAttributes=function(_,v,b,P,B,L){P||(P=0),B||(B=parseInt(Date.now()/1e3));var A=C.parseJwt(_).payload;if(!A.iss)return o.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(A.iss!==v)return o.Log.error("JoseUtil._validateJwt: Invalid issuer in token",A.iss),Promise.reject(new Error("Invalid issuer in token: "+A.iss));if(!A.aud)return o.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(A.aud===b||Array.isArray(A.aud)&&A.aud.indexOf(b)>=0))return o.Log.error("JoseUtil._validateJwt: Invalid audience in token",A.aud),Promise.reject(new Error("Invalid audience in token: "+A.aud));if(A.azp&&A.azp!==b)return o.Log.error("JoseUtil._validateJwt: Invalid azp in token",A.azp),Promise.reject(new Error("Invalid azp in token: "+A.azp));if(!L){var Q=B+P,ie=B-P;if(!A.iat)return o.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(Q<A.iat)return o.Log.error("JoseUtil._validateJwt: iat is in the future",A.iat),Promise.reject(new Error("iat is in the future: "+A.iat));if(A.nbf&&Q<A.nbf)return o.Log.error("JoseUtil._validateJwt: nbf is in the future",A.nbf),Promise.reject(new Error("nbf is in the future: "+A.nbf));if(!A.exp)return o.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(A.exp<ie)return o.Log.error("JoseUtil._validateJwt: exp is in the past",A.exp),Promise.reject(new Error("exp is in the past:"+A.exp))}return Promise.resolve(A)},C._validateJwt=function(_,v,b,P,B,L,A){return C.validateJwtAttributes(_,b,P,B,L,A).then(function(Q){try{return h.JWS.verify(_,v,E)?Q:(o.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(ie){return o.Log.error(ie&&ie.message||ie),Promise.reject(new Error("signature validation failed"))}})},C.hashString=function(_,v){try{return p.Util.hashString(_,v)}catch(b){o.Log.error(b)}},C.hexToBase64Url=function(_){try{return y(_)}catch(v){o.Log.error(v)}},C}()};var o=i(0);r.exports=n.default},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SigninResponse=void 0;var o=function(){function h(f,g){for(var p=0;p<g.length;p++){var y=g[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,g,p){return g&&h(f.prototype,g),p&&h(f,p),f}}(),u=i(3);function c(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}n.SigninResponse=function(){function h(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";c(this,h);var p=u.UrlUtility.parseUrlFragment(f,g);this.error=p.error,this.error_description=p.error_description,this.error_uri=p.error_uri,this.code=p.code,this.state=p.state,this.id_token=p.id_token,this.session_state=p.session_state,this.access_token=p.access_token,this.token_type=p.token_type,this.scope=p.scope,this.profile=void 0,this.expires_in=p.expires_in}return o(h,[{key:"expires_in",get:function(){if(this.expires_at){var g=parseInt(Date.now()/1e3);return this.expires_at-g}},set:function(g){var p=parseInt(g);if(typeof p=="number"&&p>0){var y=parseInt(Date.now()/1e3);this.expires_at=y+p}}},{key:"expired",get:function(){var g=this.expires_in;if(g!==void 0)return g<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),h}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutRequest=void 0;var o=i(0),u=i(3),c=i(9);n.SignoutRequest=function h(f){var g=f.url,p=f.id_token_hint,y=f.post_logout_redirect_uri,F=f.data,E=f.extraQueryParams,C=f.request_type;if(function(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}(this,h),!g)throw o.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var I in p&&(g=u.UrlUtility.addQueryParam(g,"id_token_hint",p)),y&&(g=u.UrlUtility.addQueryParam(g,"post_logout_redirect_uri",y),F&&(this.state=new c.State({data:F,request_type:C}),g=u.UrlUtility.addQueryParam(g,"state",this.state.id))),E)g=u.UrlUtility.addQueryParam(g,I,E[I]);this.url=g}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SignoutResponse=void 0;var o=i(3);n.SignoutResponse=function u(c){(function(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u);var h=o.UrlUtility.parseUrlFragment(c,"?");this.error=h.error,this.error_description=h.error_description,this.error_uri=h.error_uri,this.state=h.state}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.InMemoryWebStorage=void 0;var o=function(){function c(h,f){for(var g=0;g<f.length;g++){var p=f[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,f,g){return f&&c(h.prototype,f),g&&c(h,g),h}}(),u=i(0);n.InMemoryWebStorage=function(){function c(){(function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c),this._data={}}return c.prototype.getItem=function(f){return u.Log.debug("InMemoryWebStorage.getItem",f),this._data[f]},c.prototype.setItem=function(f,g){u.Log.debug("InMemoryWebStorage.setItem",f),this._data[f]=g},c.prototype.removeItem=function(f){u.Log.debug("InMemoryWebStorage.removeItem",f),delete this._data[f]},c.prototype.key=function(f){return Object.getOwnPropertyNames(this._data)[f]},o(c,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManager=void 0;var o=function(){function b(P,B){for(var L=0;L<B.length;L++){var A=B[L];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(P,A.key,A)}}return function(P,B,L){return B&&b(P.prototype,B),L&&b(P,L),P}}(),u=i(0),c=i(10),h=i(39),f=i(15),g=i(45),p=i(47),y=i(18),F=i(8),E=i(20),C=i(11),I=i(4);function _(b,P){if(!(b instanceof P))throw new TypeError("Cannot call a class as a function")}function v(b,P){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?b:P}n.UserManager=function(b){function P(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.SilentRenewService,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.SessionMonitor,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E.TokenRevocationClient,ie=arguments.length>4&&arguments[4]!==void 0?arguments[4]:C.TokenClient,M=arguments.length>5&&arguments[5]!==void 0?arguments[5]:I.JoseUtil;_(this,P),B instanceof h.UserManagerSettings||(B=new h.UserManagerSettings(B));var oe=v(this,b.call(this,B));return oe._events=new g.UserManagerEvents(B),oe._silentRenewService=new L(oe),oe.settings.automaticSilentRenew&&(u.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),oe.startSilentRenew()),oe.settings.monitorSession&&(u.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),oe._sessionMonitor=new A(oe)),oe._tokenRevocationClient=new Q(oe._settings),oe._tokenClient=new ie(oe._settings),oe._joseUtil=M,oe}return function(L,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);L.prototype=Object.create(A&&A.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(L,A):L.__proto__=A)}(P,b),P.prototype.getUser=function(){var L=this;return this._loadUser().then(function(A){return A?(u.Log.info("UserManager.getUser: user loaded"),L._events.load(A,!1),A):(u.Log.info("UserManager.getUser: user not found in storage"),null)})},P.prototype.removeUser=function(){var L=this;return this.storeUser(null).then(function(){u.Log.info("UserManager.removeUser: user removed from storage"),L._events.unload()})},P.prototype.signinRedirect=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(L=Object.assign({},L)).request_type="si:r";var A={useReplaceToNavigate:L.useReplaceToNavigate};return this._signinStart(L,this._redirectNavigator,A).then(function(){u.Log.info("UserManager.signinRedirect: successful")})},P.prototype.signinRedirectCallback=function(L){return this._signinEnd(L||this._redirectNavigator.url).then(function(A){return A.profile&&A.profile.sub?u.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",A.profile.sub):u.Log.info("UserManager.signinRedirectCallback: no sub"),A})},P.prototype.signinPopup=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(L=Object.assign({},L)).request_type="si:p";var A=L.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return A?(L.redirect_uri=A,L.display="popup",this._signin(L,this._popupNavigator,{startUrl:A,popupWindowFeatures:L.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:L.popupWindowTarget||this.settings.popupWindowTarget}).then(function(Q){return Q&&(Q.profile&&Q.profile.sub?u.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",Q.profile.sub):u.Log.info("UserManager.signinPopup: no sub")),Q})):(u.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},P.prototype.signinPopupCallback=function(L){return this._signinCallback(L,this._popupNavigator).then(function(A){return A&&(A.profile&&A.profile.sub?u.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",A.profile.sub):u.Log.info("UserManager.signinPopupCallback: no sub")),A}).catch(function(A){u.Log.error(A.message)})},P.prototype.signinSilent=function(){var L=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return A=Object.assign({},A),this._loadUser().then(function(Q){return Q&&Q.refresh_token?(A.refresh_token=Q.refresh_token,L._useRefreshToken(A)):(A.request_type="si:s",A.id_token_hint=A.id_token_hint||L.settings.includeIdTokenInSilentRenew&&Q&&Q.id_token,Q&&L._settings.validateSubOnSilentRenew&&(u.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",Q.profile.sub),A.current_sub=Q.profile.sub),L._signinSilentIframe(A))})},P.prototype._useRefreshToken=function(){var L=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(A).then(function(Q){return Q?Q.access_token?L._loadUser().then(function(ie){if(ie){var M=Promise.resolve();return Q.id_token&&(M=L._validateIdTokenFromTokenRefreshToken(ie.profile,Q.id_token)),M.then(function(){return u.Log.debug("UserManager._useRefreshToken: refresh token response success"),ie.id_token=Q.id_token||ie.id_token,ie.access_token=Q.access_token,ie.refresh_token=Q.refresh_token||ie.refresh_token,ie.expires_in=Q.expires_in,L.storeUser(ie).then(function(){return L._events.load(ie),ie})})}return null}):(u.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(u.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},P.prototype._validateIdTokenFromTokenRefreshToken=function(L,A){var Q=this;return this._metadataService.getIssuer().then(function(ie){return Q.settings.getEpochTime().then(function(M){return Q._joseUtil.validateJwtAttributes(A,ie,Q._settings.client_id,Q._settings.clockSkew,M).then(function(oe){return oe?oe.sub!==L.sub?(u.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):oe.auth_time&&oe.auth_time!==L.auth_time?(u.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):oe.azp&&oe.azp!==L.azp?(u.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!oe.azp&&L.azp?(u.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(u.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},P.prototype._signinSilentIframe=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=L.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return A?(L.redirect_uri=A,L.prompt=L.prompt||"none",this._signin(L,this._iframeNavigator,{startUrl:A,silentRequestTimeout:L.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(Q){return Q&&(Q.profile&&Q.profile.sub?u.Log.info("UserManager.signinSilent: successful, signed in sub: ",Q.profile.sub):u.Log.info("UserManager.signinSilent: no sub")),Q})):(u.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},P.prototype.signinSilentCallback=function(L){return this._signinCallback(L,this._iframeNavigator).then(function(A){return A&&(A.profile&&A.profile.sub?u.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",A.profile.sub):u.Log.info("UserManager.signinSilentCallback: no sub")),A})},P.prototype.signinCallback=function(L){var A=this;return this.readSigninResponseState(L).then(function(Q){var ie=Q.state;return Q.response,ie.request_type==="si:r"?A.signinRedirectCallback(L):ie.request_type==="si:p"?A.signinPopupCallback(L):ie.request_type==="si:s"?A.signinSilentCallback(L):Promise.reject(new Error("invalid response_type in state"))})},P.prototype.signoutCallback=function(L,A){var Q=this;return this.readSignoutResponseState(L).then(function(ie){var M=ie.state,oe=ie.response;return M?M.request_type==="so:r"?Q.signoutRedirectCallback(L):M.request_type==="so:p"?Q.signoutPopupCallback(L,A):Promise.reject(new Error("invalid response_type in state")):oe})},P.prototype.querySessionStatus=function(){var L=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(A=Object.assign({},A)).request_type="si:s";var Q=A.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return Q?(A.redirect_uri=Q,A.prompt="none",A.response_type=A.response_type||this.settings.query_status_response_type,A.scope=A.scope||"openid",A.skipUserInfo=!0,this._signinStart(A,this._iframeNavigator,{startUrl:Q,silentRequestTimeout:A.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ie){return L.processSigninResponse(ie.url).then(function(M){if(u.Log.debug("UserManager.querySessionStatus: got signin response"),M.session_state&&M.profile.sub)return u.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",M.profile.sub),{session_state:M.session_state,sub:M.profile.sub,sid:M.profile.sid};u.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(M){if(M.session_state&&L.settings.monitorAnonymousSession&&(M.message=="login_required"||M.message=="consent_required"||M.message=="interaction_required"||M.message=="account_selection_required"))return u.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:M.session_state};throw M})})):(u.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},P.prototype._signin=function(L,A){var Q=this,ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signinStart(L,A,ie).then(function(M){return Q._signinEnd(M.url,L)})},P.prototype._signinStart=function(L,A){var Q=this,ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return A.prepare(ie).then(function(M){return u.Log.debug("UserManager._signinStart: got navigator window handle"),Q.createSigninRequest(L).then(function(oe){return u.Log.debug("UserManager._signinStart: got signin request"),ie.url=oe.url,ie.id=oe.state.id,M.navigate(ie)}).catch(function(oe){throw M.close&&(u.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),M.close()),oe})})},P.prototype._signinEnd=function(L){var A=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.processSigninResponse(L).then(function(ie){u.Log.debug("UserManager._signinEnd: got signin response");var M=new f.User(ie);if(Q.current_sub){if(Q.current_sub!==M.profile.sub)return u.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",M.profile.sub),Promise.reject(new Error("login_required"));u.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return A.storeUser(M).then(function(){return u.Log.debug("UserManager._signinEnd: user stored"),A._events.load(M),M})})},P.prototype._signinCallback=function(L,A){u.Log.debug("UserManager._signinCallback");var Q=this._settings.response_mode==="query"||!this._settings.response_mode&&F.SigninRequest.isCode(this._settings.response_type)?"?":"#";return A.callback(L,void 0,Q)},P.prototype.signoutRedirect=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(L=Object.assign({},L)).request_type="so:r";var A=L.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;A&&(L.post_logout_redirect_uri=A);var Q={useReplaceToNavigate:L.useReplaceToNavigate};return this._signoutStart(L,this._redirectNavigator,Q).then(function(){u.Log.info("UserManager.signoutRedirect: successful")})},P.prototype.signoutRedirectCallback=function(L){return this._signoutEnd(L||this._redirectNavigator.url).then(function(A){return u.Log.info("UserManager.signoutRedirectCallback: successful"),A})},P.prototype.signoutPopup=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(L=Object.assign({},L)).request_type="so:p";var A=L.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return L.post_logout_redirect_uri=A,L.display="popup",L.post_logout_redirect_uri&&(L.state=L.state||{}),this._signout(L,this._popupNavigator,{startUrl:A,popupWindowFeatures:L.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:L.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){u.Log.info("UserManager.signoutPopup: successful")})},P.prototype.signoutPopupCallback=function(L,A){return A===void 0&&typeof L=="boolean"&&(A=L,L=null),this._popupNavigator.callback(L,A,"?").then(function(){u.Log.info("UserManager.signoutPopupCallback: successful")})},P.prototype._signout=function(L,A){var Q=this,ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._signoutStart(L,A,ie).then(function(M){return Q._signoutEnd(M.url)})},P.prototype._signoutStart=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=this,Q=arguments[1],ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Q.prepare(ie).then(function(M){return u.Log.debug("UserManager._signoutStart: got navigator window handle"),A._loadUser().then(function(oe){return u.Log.debug("UserManager._signoutStart: loaded current user from storage"),(A._settings.revokeAccessTokenOnSignout?A._revokeInternal(oe):Promise.resolve()).then(function(){var ke=L.id_token_hint||oe&&oe.id_token;return ke&&(u.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),L.id_token_hint=ke),A.removeUser().then(function(){return u.Log.debug("UserManager._signoutStart: user removed, creating signout request"),A.createSignoutRequest(L).then(function(Fe){return u.Log.debug("UserManager._signoutStart: got signout request"),ie.url=Fe.url,Fe.state&&(ie.id=Fe.state.id),M.navigate(ie)})})})}).catch(function(oe){throw M.close&&(u.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),M.close()),oe})})},P.prototype._signoutEnd=function(L){return this.processSignoutResponse(L).then(function(A){return u.Log.debug("UserManager._signoutEnd: got signout response"),A})},P.prototype.revokeAccessToken=function(){var L=this;return this._loadUser().then(function(A){return L._revokeInternal(A,!0).then(function(Q){if(Q)return u.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),A.access_token=null,A.refresh_token=null,A.expires_at=null,A.token_type=null,L.storeUser(A).then(function(){u.Log.debug("UserManager.revokeAccessToken: user stored"),L._events.load(A)})})}).then(function(){u.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},P.prototype._revokeInternal=function(L,A){var Q=this;if(L){var ie=L.access_token,M=L.refresh_token;return this._revokeAccessTokenInternal(ie,A).then(function(oe){return Q._revokeRefreshTokenInternal(M,A).then(function(ke){return oe||ke||u.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),oe||ke})})}return Promise.resolve(!1)},P.prototype._revokeAccessTokenInternal=function(L,A){return!L||L.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(L,A).then(function(){return!0})},P.prototype._revokeRefreshTokenInternal=function(L,A){return L?this._tokenRevocationClient.revoke(L,A,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},P.prototype.startSilentRenew=function(){this._silentRenewService.start()},P.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},P.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(L){return L?(u.Log.debug("UserManager._loadUser: user storageString loaded"),f.User.fromStorageString(L)):(u.Log.debug("UserManager._loadUser: no user storageString"),null)})},P.prototype.storeUser=function(L){if(L){u.Log.debug("UserManager.storeUser: storing user");var A=L.toStorageString();return this._userStore.set(this._userStoreKey,A)}return u.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},o(P,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),P}(c.OidcClient)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerSettings=void 0;var o=function(){function C(I,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(I,b.key,b)}}return function(I,_,v){return _&&C(I.prototype,_),v&&C(I,v),I}}(),u=(i(0),i(5)),c=i(40),h=i(41),f=i(43),g=i(6),p=i(1),y=i(8);function F(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")}function E(C,I){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||typeof I!="object"&&typeof I!="function"?C:I}n.UserManagerSettings=function(C){function I(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=_.popup_redirect_uri,b=_.popup_post_logout_redirect_uri,P=_.popupWindowFeatures,B=_.popupWindowTarget,L=_.silent_redirect_uri,A=_.silentRequestTimeout,Q=_.automaticSilentRenew,ie=Q!==void 0&&Q,M=_.validateSubOnSilentRenew,oe=M!==void 0&&M,ke=_.includeIdTokenInSilentRenew,Fe=ke===void 0||ke,ft=_.monitorSession,ze=ft===void 0||ft,st=_.monitorAnonymousSession,Me=st!==void 0&&st,le=_.checkSessionInterval,ue=le===void 0?2e3:le,ce=_.stopCheckSessionOnError,Se=ce===void 0||ce,be=_.query_status_response_type,at=_.revokeAccessTokenOnSignout,Be=at!==void 0&&at,ht=_.accessTokenExpiringNotificationTime,tt=ht===void 0?60:ht,He=_.redirectNavigator,mt=He===void 0?new c.RedirectNavigator:He,$e=_.popupNavigator,De=$e===void 0?new h.PopupNavigator:$e,W=_.iframeNavigator,S=W===void 0?new f.IFrameNavigator:W,x=_.userStore,K=x===void 0?new g.WebStorageStateStore({store:p.Global.sessionStorage}):x;F(this,I);var q=E(this,C.call(this,arguments[0]));return q._popup_redirect_uri=v,q._popup_post_logout_redirect_uri=b,q._popupWindowFeatures=P,q._popupWindowTarget=B,q._silent_redirect_uri=L,q._silentRequestTimeout=A,q._automaticSilentRenew=ie,q._validateSubOnSilentRenew=oe,q._includeIdTokenInSilentRenew=Fe,q._accessTokenExpiringNotificationTime=tt,q._monitorSession=ze,q._monitorAnonymousSession=Me,q._checkSessionInterval=ue,q._stopCheckSessionOnError=Se,be?q._query_status_response_type=be:arguments[0]&&arguments[0].response_type?q._query_status_response_type=y.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":q._query_status_response_type="id_token",q._revokeAccessTokenOnSignout=Be,q._redirectNavigator=mt,q._popupNavigator=De,q._iframeNavigator=S,q._userStore=K,q}return function(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}(I,C),o(I,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),I}(u.OidcClientSettings)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.RedirectNavigator=void 0;var o=function(){function c(h,f){for(var g=0;g<f.length;g++){var p=f[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,f,g){return f&&c(h.prototype,f),g&&c(h,g),h}}(),u=i(0);n.RedirectNavigator=function(){function c(){(function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.prototype.prepare=function(){return Promise.resolve(this)},c.prototype.navigate=function(f){return f&&f.url?(f.useReplaceToNavigate?window.location.replace(f.url):window.location=f.url,Promise.resolve()):(u.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},o(c,[{key:"url",get:function(){return window.location.href}}]),c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupNavigator=void 0;var o=i(0),u=i(42);n.PopupNavigator=function(){function c(){(function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.prototype.prepare=function(f){var g=new u.PopupWindow(f);return Promise.resolve(g)},c.prototype.callback=function(f,g,p){o.Log.debug("PopupNavigator.callback");try{return u.PopupWindow.notifyOpener(f,g,p),Promise.resolve()}catch(y){return Promise.reject(y)}},c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.PopupWindow=void 0;var o=function(){function h(f,g){for(var p=0;p<g.length;p++){var y=g[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return function(f,g,p){return g&&h(f.prototype,g),p&&h(f,p),f}}(),u=i(0),c=i(3);n.PopupWindow=function(){function h(f){var g=this;(function(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")})(this,h),this._promise=new Promise(function(F,E){g._resolve=F,g._reject=E});var p=f.popupWindowTarget||"_blank",y=f.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",p,y),this._popup&&(u.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return h.prototype.navigate=function(g){return this._popup?g&&g.url?(u.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=g.id,this._id&&(window["popupCallback_"+g.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=g.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},h.prototype._success=function(g){u.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(g)},h.prototype._error=function(g){u.Log.error("PopupWindow.error: ",g),this._cleanup(),this._reject(new Error(g))},h.prototype.close=function(){this._cleanup(!1)},h.prototype._cleanup=function(g){u.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!g&&this._popup.close(),this._popup=null},h.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},h.prototype._callback=function(g,p){this._cleanup(p),g?(u.Log.debug("PopupWindow.callback success"),this._success({url:g})):(u.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},h.notifyOpener=function(g,p,y){if(window.opener){if(g=g||window.location.href){var F=c.UrlUtility.parseUrlFragment(g,y);if(F.state){var E="popupCallback_"+F.state,C=window.opener[E];C?(u.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),C(g,p)):u.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else u.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else u.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},o(h,[{key:"promise",get:function(){return this._promise}}]),h}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameNavigator=void 0;var o=i(0),u=i(44);n.IFrameNavigator=function(){function c(){(function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")})(this,c)}return c.prototype.prepare=function(f){var g=new u.IFrameWindow(f);return Promise.resolve(g)},c.prototype.callback=function(f){o.Log.debug("IFrameNavigator.callback");try{return u.IFrameWindow.notifyParent(f),Promise.resolve()}catch(g){return Promise.reject(g)}},c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.IFrameWindow=void 0;var o=function(){function c(h,f){for(var g=0;g<f.length;g++){var p=f[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,f,g){return f&&c(h.prototype,f),g&&c(h,g),h}}(),u=i(0);n.IFrameWindow=function(){function c(h){var f=this;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,c),this._promise=new Promise(function(g,p){f._resolve=g,f._reject=p}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return c.prototype.navigate=function(f){if(f&&f.url){var g=f.silentRequestTimeout||1e4;u.Log.debug("IFrameWindow.navigate: Using timeout of:",g),this._timer=window.setTimeout(this._timeout.bind(this),g),this._frame.src=f.url}else this._error("No url provided");return this.promise},c.prototype._success=function(f){this._cleanup(),u.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(f)},c.prototype._error=function(f){this._cleanup(),u.Log.error(f),this._reject(new Error(f))},c.prototype.close=function(){this._cleanup()},c.prototype._cleanup=function(){this._frame&&(u.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},c.prototype._timeout=function(){u.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},c.prototype._message=function(f){if(u.Log.debug("IFrameWindow.message"),this._timer&&f.origin===this._origin&&f.source===this._frame.contentWindow&&typeof f.data=="string"&&(f.data.startsWith("http://")||f.data.startsWith("https://"))){var g=f.data;g?this._success({url:g}):this._error("Invalid response from frame")}},c.notifyParent=function(f){u.Log.debug("IFrameWindow.notifyParent"),(f=f||window.location.href)&&(u.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(f,location.protocol+"//"+location.host))},o(c,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),c}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.UserManagerEvents=void 0;var o=i(0),u=i(16),c=i(17);n.UserManagerEvents=function(h){function f(g){(function(F,E){if(!(F instanceof E))throw new TypeError("Cannot call a class as a function")})(this,f);var p=function(F,E){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||typeof E!="object"&&typeof E!="function"?F:E}(this,h.call(this,g));return p._userLoaded=new c.Event("User loaded"),p._userUnloaded=new c.Event("User unloaded"),p._silentRenewError=new c.Event("Silent renew error"),p._userSignedIn=new c.Event("User signed in"),p._userSignedOut=new c.Event("User signed out"),p._userSessionChanged=new c.Event("User session changed"),p}return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}(f,h),f.prototype.load=function(p){var y=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];o.Log.debug("UserManagerEvents.load"),h.prototype.load.call(this,p),y&&this._userLoaded.raise(p)},f.prototype.unload=function(){o.Log.debug("UserManagerEvents.unload"),h.prototype.unload.call(this),this._userUnloaded.raise()},f.prototype.addUserLoaded=function(p){this._userLoaded.addHandler(p)},f.prototype.removeUserLoaded=function(p){this._userLoaded.removeHandler(p)},f.prototype.addUserUnloaded=function(p){this._userUnloaded.addHandler(p)},f.prototype.removeUserUnloaded=function(p){this._userUnloaded.removeHandler(p)},f.prototype.addSilentRenewError=function(p){this._silentRenewError.addHandler(p)},f.prototype.removeSilentRenewError=function(p){this._silentRenewError.removeHandler(p)},f.prototype._raiseSilentRenewError=function(p){o.Log.debug("UserManagerEvents._raiseSilentRenewError",p.message),this._silentRenewError.raise(p)},f.prototype.addUserSignedIn=function(p){this._userSignedIn.addHandler(p)},f.prototype.removeUserSignedIn=function(p){this._userSignedIn.removeHandler(p)},f.prototype._raiseUserSignedIn=function(){o.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},f.prototype.addUserSignedOut=function(p){this._userSignedOut.addHandler(p)},f.prototype.removeUserSignedOut=function(p){this._userSignedOut.removeHandler(p)},f.prototype._raiseUserSignedOut=function(){o.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},f.prototype.addUserSessionChanged=function(p){this._userSessionChanged.addHandler(p)},f.prototype.removeUserSessionChanged=function(p){this._userSessionChanged.removeHandler(p)},f.prototype._raiseUserSessionChanged=function(){o.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},f}(u.AccessTokenEvents)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;var o=function(){function p(y,F){for(var E=0;E<F.length;E++){var C=F[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(y,C.key,C)}}return function(y,F,E){return F&&p(y.prototype,F),E&&p(y,E),y}}(),u=i(0),c=i(1),h=i(17);function f(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function g(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?p:y}n.Timer=function(p){function y(F){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.Global.timer,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;f(this,y);var I=g(this,p.call(this,F));return I._timer=E,I._nowFunc=C||function(){return Date.now()/1e3},I}return function(E,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);E.prototype=Object.create(C&&C.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(E,C):E.__proto__=C)}(y,p),y.prototype.init=function(E){E<=0&&(E=1),E=parseInt(E);var C=this.now+E;if(this.expiration===C&&this._timerHandle)u.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),u.Log.debug("Timer.init timer "+this._name+" for duration:",E),this._expiration=C;var I=5;E<I&&(I=E),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*I)}},y.prototype.cancel=function(){this._timerHandle&&(u.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},y.prototype._callback=function(){var E=this._expiration-this.now;u.Log.debug("Timer.callback; "+this._name+" timer expires in:",E),this._expiration<=this.now&&(this.cancel(),p.prototype.raise.call(this))},o(y,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),y}(h.Event)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.SilentRenewService=void 0;var o=i(0);n.SilentRenewService=function(){function u(c){(function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")})(this,u),this._userManager=c}return u.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(h){}).catch(function(h){o.Log.error("SilentRenewService.start: Error from getUser:",h.message)}))},u.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},u.prototype._tokenExpiring=function(){var h=this;this._userManager.signinSilent().then(function(f){o.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(f){o.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",f.message),h._userManager.events._raiseSilentRenewError(f)})},u}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaPopupNavigator=void 0;var o=i(21);n.CordovaPopupNavigator=function(){function u(){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(h){var f=new o.CordovaPopupWindow(h);return Promise.resolve(f)},u}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.CordovaIFrameNavigator=void 0;var o=i(21);n.CordovaIFrameNavigator=function(){function u(){(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,u)}return u.prototype.prepare=function(h){h.popupWindowFeatures="hidden=yes";var f=new o.CordovaPopupWindow(h);return Promise.resolve(f)},u}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.Version="1.11.6"}])})})(vm);var mc=vm.exports;function uS(e,t){var r,n,i,o;throw e.error==="invalid_redirect_uri"?new Error(`Dynamic client registration failed: the provided redirect uri [${(r=t.redirectUrl)===null||r===void 0?void 0:r.toString()}] is invalid - ${(n=e.error_description)!==null&&n!==void 0?n:""}`):e.error==="invalid_client_metadata"?new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${(i=e.error_description)!==null&&i!==void 0?i:""}`):new Error(`Dynamic client registration failed: ${e.error} - ${(o=e.error_description)!==null&&o!==void 0?o:""}`)}function lS(e,t){if(e.client_id===void 0)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&(e.redirect_uris===void 0||e.redirect_uris[0]!==t.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}async function cS(e,t){var r;if(!t.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const n=Mw(t.idTokenSigningAlgValuesSupported,Ha),i={client_name:e.clientName,application_type:"web",redirect_uris:[(r=e.redirectUrl)===null||r===void 0?void 0:r.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:n,grant_types:["authorization_code","refresh_token"]},o={"Content-Type":"application/json"},u=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:o,body:JSON.stringify(i)});if(u.ok){const c=await u.json();return lS(c,e),{clientId:c.client_id,clientSecret:c.client_secret,idTokenSignedResponseAlg:c.id_token_signed_response_alg,clientType:"dynamic"}}throw u.status===400&&uS(await u.json(),e),new Error(`Dynamic client registration failed: the server returned ${u.status} ${u.statusText} - ${await u.text()}`)}function dS(e){return e.error!==void 0&&typeof e.error=="string"}function Fh(e){return e.error_description!==void 0&&typeof e.error_description=="string"}function fS(e){return e.error_uri!==void 0&&typeof e.error_uri=="string"}function hS(e){return e.access_token!==void 0&&typeof e.access_token=="string"}function pS(e){return e.id_token!==void 0&&typeof e.id_token=="string"}function gS(e){return e.refresh_token!==void 0&&typeof e.refresh_token=="string"}function mS(e){return e.token_type!==void 0&&typeof e.token_type=="string"}function yS(e){return e.expires_in===void 0||typeof e.expires_in=="number"}function vS(e,t){if(t.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(t.grantType)))throw new Error(`The issuer [${e.issuer}] does not support the [${t.grantType}] grant`);if(!e.tokenEndpoint)throw new Error(`This issuer [${e.issuer}] does not have a token endpoint`)}function _m(e,t){if(dS(e))throw new um(`Token endpoint returned error [${e.error}]${Fh(e)?`: ${e.error_description}`:""}${fS(e)?` (see ${e.error_uri})`:""}`,e.error,Fh(e)?e.error_description:void 0);if(!hS(e))throw new Ao(["access_token"]);if(!pS(e))throw new Ao(["id_token"]);if(!mS(e))throw new Ao(["token_type"]);if(!yS(e))throw new Ao(["expires_in"]);if(!t&&e.token_type.toLowerCase()!=="bearer")throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function _S(e,t,r,n){vS(e,r);const i={"content-type":"application/x-www-form-urlencoded"};let o;n&&(o=await Jw(),i.DPoP=await xd(e.tokenEndpoint,"POST",o)),t.clientSecret&&(i.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);const u={grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId},c={method:"POST",headers:i,body:new URLSearchParams(u).toString()},f=await(await fetch(e.tokenEndpoint,c)).json(),g=_m(f,n),p=await tm(g.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:g.access_token,idToken:g.id_token,refreshToken:gS(g)?g.refresh_token:void 0,webId:p,dpopKey:o,expiresIn:g.expires_in}}const wS=e=>{try{return new URL(e),!0}catch{return!1}};async function SS(e,t,r,n){if(r.clientId===void 0)throw new Error("No client ID available when trying to refresh the access token.");const i={grant_type:"refresh_token",refresh_token:e,scope:em};let o={};n!==void 0&&(o={DPoP:await xd(t.tokenEndpoint,"POST",n)});let u={};r.clientSecret!==void 0?u={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`}:wS(r.clientId)&&(i.client_id=r.clientId);const c=await fetch(t.tokenEndpoint,{method:"POST",body:new URLSearchParams(i).toString(),headers:{...o,...u,"Content-Type":"application/x-www-form-urlencoded"}});let h;try{h=await c.json()}catch{throw new Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}const f=_m(h,n!==void 0),g=await tm(f.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:f.access_token,idToken:f.id_token,refreshToken:typeof f.refresh_token=="string"?f.refresh_token:void 0,webId:g,dpopKey:n,expiresIn:f.expires_in}}function ES(e){const t=nm(e);return t.hash="",e.includes(`${t.origin}/`)?t.href:`${t.origin}${t.href.substring(t.origin.length+1)}`}async function bS(){await new mc.OidcClient({response_mode:"query"}).clearStaleState(new mc.WebStorageStateStore({}));const t=window.localStorage,r=[];for(let n=0;n<=t.length;n+=1){const i=t.key(n);i&&(i.match(/^oidc\..+$/)||i.match(/^solidClientAuthenticationUser:.+$/))&&r.push(i)}r.forEach(n=>t.removeItem(n))}class xS extends zw{constructor(t,r){super(t,r)}}class FS extends Vw{constructor(){super(...arguments),this.login=async(t,r)=>{var n,i;await this.sessionInfoManager.clear(t.sessionId);const o=(n=t.redirectUrl)!==null&&n!==void 0?n:ES(window.location.href);if(!rm(o))throw new Error(`${o} is not a valid redirect URL, it is either a malformed IRI, includes a hash fragment, or reserved query parameters ('code' or 'state').`);await this.loginHandler.handle({...t,redirectUrl:o,clientName:(i=t.clientName)!==null&&i!==void 0?i:t.clientId,eventEmitter:r})},this.validateCurrentSession=async t=>{const r=await this.sessionInfoManager.get(t);return r===void 0||r.clientAppId===void 0||r.issuer===void 0?null:r},this.handleIncomingRedirect=async(t,r)=>{try{const n=await this.redirectHandler.handle(t,r,void 0);return this.fetch=n.fetch.bind(window),this.boundLogout=n.getLogoutUrl,await this.cleanUrlAfterRedirect(t),{isLoggedIn:n.isLoggedIn,webId:n.webId,sessionId:n.sessionId,expirationDate:n.expirationDate}}catch(n){await this.cleanUrlAfterRedirect(t),r.emit(kt.ERROR,"redirect",n);return}}}async cleanUrlAfterRedirect(t){const r=nm(t).href;for(window.history.replaceState(null,"",r);window.location.href!==r;)await new Promise(n=>{setTimeout(()=>n(),1)})}}function kh(e){return typeof e.oidcIssuer=="string"}function Th(e){return typeof e.redirectUrl=="string"}class kS{constructor(t,r,n,i){this.storageUtility=t,this.oidcHandler=r,this.issuerConfigFetcher=n,this.clientRegistrar=i,this.storageUtility=t,this.oidcHandler=r,this.issuerConfigFetcher=n,this.clientRegistrar=i}async canHandle(t){return kh(t)&&Th(t)}async handle(t){if(!kh(t))throw new gc(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(t)}`);if(!Th(t))throw new gc(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(t)}`);const r=await this.issuerConfigFetcher.fetchConfig(t.oidcIssuer),n=await Kw(t,r,this.storageUtility,this.clientRegistrar),i={issuer:r.issuer,dpop:t.tokenType.toLowerCase()==="dpop",...t,issuerConfiguration:r,client:n};return this.oidcHandler.handle(i)}}class TS extends Rw{async handle(t){var r;const n={authority:t.issuer.toString(),client_id:t.client.clientId,client_secret:t.client.clientSecret,redirect_uri:t.redirectUrl,response_type:"code",scope:em,filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:(r=t.prompt)!==null&&r!==void 0?r:"consent"},i=new mc.OidcClient(n);try{const o=await i.createSigninRequest();return await this.handleRedirect({oidcLoginOptions:t,state:o.state._id,codeVerifier:o.state._code_verifier,targetUrl:o.url.toString()})}catch(o){console.error(o)}}}const CS=".well-known/openid-configuration",Ch={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},end_session_endpoint:{toKey:"endSessionEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};function PS(e){const t={};return Object.keys(e).forEach(r=>{Ch[r]&&(t[Ch[r].toKey]=e[r])}),Array.isArray(t.scopesSupported)||(t.scopesSupported=["openid"]),t}class kd{constructor(t){this.storageUtility=t,this.storageUtility=t}static getLocalStorageKey(t){return`issuerConfig:${t}`}async fetchConfig(t){let r;const n=new URL(CS,t.endsWith("/")?t:`${t}/`).href,i=await fetch(n);try{r=PS(await i.json())}catch(o){throw new gc(`[${t.toString()}] has an invalid configuration: ${o.message}`)}return await this.storageUtility.set(kd.getLocalStorageKey(t),JSON.stringify(r)),r}}async function AS(e,t){await om(e,t),await bS()}class RS extends Dw{async get(t){const[r,n,i,o,u,c,h,f]=await Promise.all([this.storageUtility.getForUser(t,"isLoggedIn",{secure:!0}),this.storageUtility.getForUser(t,"webId",{secure:!0}),this.storageUtility.getForUser(t,"clientId",{secure:!1}),this.storageUtility.getForUser(t,"clientSecret",{secure:!1}),this.storageUtility.getForUser(t,"redirectUrl",{secure:!1}),this.storageUtility.getForUser(t,"refreshToken",{secure:!0}),this.storageUtility.getForUser(t,"issuer",{secure:!1}),this.storageUtility.getForUser(t,"tokenType",{secure:!1})]);if(typeof u=="string"&&!rm(u)){await Promise.all([this.storageUtility.deleteAllUserData(t,{secure:!1}),this.storageUtility.deleteAllUserData(t,{secure:!0})]);return}if(f!==void 0&&!Uw(f))throw new Error(`Tokens of type [${f}] are not supported.`);if(!(i===void 0&&r===void 0&&n===void 0&&c===void 0))return{sessionId:t,webId:n,isLoggedIn:r==="true",redirectUrl:u,refreshToken:c,issuer:h,clientAppId:i,clientAppSecret:o,tokenType:f??"DPoP"}}async clear(t){return AS(t,this.storageUtility)}}class IS{async canHandle(t){try{return new URL(t),!0}catch(r){throw new Error(`[${t}] is not a valid URL, and cannot be used as a redirect URL: ${r}`)}}async handle(t){return im()}}class NS{constructor(t,r,n,i,o){this.storageUtility=t,this.sessionInfoManager=r,this.issuerConfigFetcher=n,this.clientRegistrar=i,this.tokerRefresher=o,this.storageUtility=t,this.sessionInfoManager=r,this.issuerConfigFetcher=n,this.clientRegistrar=i,this.tokerRefresher=o}async canHandle(t){try{const r=new URL(t);return r.searchParams.get("code")!==null&&r.searchParams.get("state")!==null}catch(r){throw new Error(`[${t}] is not a valid URL, and cannot be used as a redirect URL: ${r}`)}}async handle(t,r){if(!await this.canHandle(t))throw new Error(`AuthCodeRedirectHandler cannot handle [${t}]: it is missing one of [code, state].`);const n=new URL(t),i=n.searchParams.get("state"),o=await this.storageUtility.getForUser(i,"sessionId",{errorIfNull:!0}),{issuerConfig:u,codeVerifier:c,redirectUrl:h,dpop:f}=await am(o,this.storageUtility,this.issuerConfigFetcher),g=n.searchParams.get("iss");if(typeof g=="string"&&g!==u.issuer)throw new Error(`The value of the iss parameter (${g}) does not match the issuer identifier of the authorization server (${u.issuer}). See [rfc9207](https://www.rfc-editor.org/rfc/rfc9207.html#section-2.3-3.1.1)`);if(c===void 0)throw new Error(`The code verifier for session ${o} is missing from storage.`);if(h===void 0)throw new Error(`The redirect URL for session ${o} is missing from storage.`);const p=await this.clientRegistrar.getClient({sessionId:o},u),y=Date.now(),F=await _S(u,p,{grantType:"authorization_code",code:n.searchParams.get("code"),codeVerifier:c,redirectUrl:h},f);window.localStorage.removeItem(`oidc.${i}`);let E;F.refreshToken!==void 0&&(E={sessionId:o,refreshToken:F.refreshToken,tokenRefresher:this.tokerRefresher});const C=await Zw(F.accessToken,{dpopKey:F.dpopKey,refreshOptions:E,eventEmitter:r,expiresIn:F.expiresIn});await this.storageUtility.setForUser(o,{webId:F.webId,isLoggedIn:"true"},{secure:!0});const I=await this.sessionInfoManager.get(o);if(!I)throw new Error(`Could not retrieve session: [${o}].`);return Object.assign(I,{fetch:C,getLogoutUrl:jw({idTokenHint:F.idToken,endSessionEndpoint:u.endSessionEndpoint}),expirationDate:typeof F.expiresIn=="number"?y+F.expiresIn*1e3:void 0})}}class LS extends Pw{constructor(t){super(t)}}class DS{get storage(){return window.localStorage}async get(t){return this.storage.getItem(t)||void 0}async set(t,r){this.storage.setItem(t,r)}async delete(t){this.storage.removeItem(t)}}class OS{redirect(t,r){r&&r.handleRedirect?r.handleRedirect(t):r&&r.redirectByReplacingState?window.history.replaceState({},"",t):window.location.href=t}}class jS{constructor(t){this.storageUtility=t,this.storageUtility=t}async getClient(t,r){const[n,i,o,u]=await Promise.all([this.storageUtility.getForUser(t.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(t.sessionId,"clientSecret",{secure:!1}),this.storageUtility.getForUser(t.sessionId,"clientName",{secure:!1}),this.storageUtility.getForUser(t.sessionId,"clientType",{secure:!1})]);if(n&&$w(u))return{clientId:n,clientSecret:i,clientName:o,clientType:u};try{const c=await cS(t,r),h={clientId:c.clientId,clientType:"dynamic"};return c.clientSecret&&(h.clientSecret=c.clientSecret),c.idTokenSignedResponseAlg&&(h.idTokenSignedResponseAlg=c.idTokenSignedResponseAlg),await this.storageUtility.setForUser(t.sessionId,h,{secure:!1}),c}catch(c){throw new Error(`Client registration failed: [${c}]`)}}}class US{async canHandle(t){try{return new URL(t).searchParams.has("error")}catch(r){throw new Error(`[${t}] is not a valid URL, and cannot be used as a redirect URL: ${r}`)}}async handle(t,r){if(r!==void 0){const n=new URL(t),i=n.searchParams.get("error"),o=n.searchParams.get("error_description");r.emit(kt.ERROR,i,o)}return im()}}class MS{constructor(t,r,n){this.storageUtility=t,this.issuerConfigFetcher=r,this.clientRegistrar=n,this.storageUtility=t,this.issuerConfigFetcher=r,this.clientRegistrar=n}async refresh(t,r,n,i){const o=await am(t,this.storageUtility,this.issuerConfigFetcher),u=await this.clientRegistrar.getClient({sessionId:t},o.issuerConfig);if(r===void 0)throw new Error(`Session [${t}] has no refresh token to allow it to refresh its access token.`);if(o.dpop&&n===void 0)throw new Error(`For session [${t}], the key bound to the DPoP access token must be provided to refresh said access token.`);const c=await SS(r,o.issuerConfig,u,n);return c.refreshToken!==void 0&&(i==null||i.emit(kt.NEW_REFRESH_TOKEN,c.refreshToken),await this.storageUtility.setForUser(t,{refreshToken:c.refreshToken})),c}}function Ph(e){const t=new Ww,r=e.secureStorage||t,n=e.insecureStorage||new DS,i=new xS(r,n),o=new kd(i),u=new jS(i),c=new RS(i),h=new MS(i,o,u),f=new OS,g=new kS(i,new TS(i,f),o,u),p=new LS([new US,new NS(i,c,o,u,h),new IS]);return new FS(g,p,new Lw(c,f),c,o)}const al=`${Z0}currentSession`,yc=`${Z0}currentUrl`;async function BS(e,t,r){var n;const i=await t.validateCurrentSession(e);return i!==null?(window.localStorage.setItem(yc,window.location.href),await t.login({sessionId:e,prompt:"none",oidcIssuer:i.issuer,redirectUrl:i.redirectUrl,clientId:i.clientAppId,clientSecret:i.clientAppSecret,tokenType:(n=i.tokenType)!==null&&n!==void 0?n:"DPoP"},r.events),!0):!1}function HS(e){return!!(e!=null&&e.isLoggedIn)}class $S{constructor(t={},r=void 0){this.tokenRequestInProgress=!1,this.login=async n=>{var i;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...n,tokenType:(i=n.tokenType)!==null&&i!==void 0?i:"DPoP"},this.events),new Promise(()=>{})},this.fetch=(n,i)=>this.clientAuthentication.fetch(n,i),this.internalLogout=async(n,i)=>{window.localStorage.removeItem(al),await this.clientAuthentication.logout(this.info.sessionId,i),this.info.isLoggedIn=!1,n&&this.events.emit(kt.LOGOUT)},this.logout=async n=>this.internalLogout(!0,n),this.handleIncomingRedirect=async(n={})=>{var i;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const o=typeof n=="string"?{url:n}:n,u=(i=o.url)!==null&&i!==void 0?i:window.location.href;this.tokenRequestInProgress=!0;const c=await this.clientAuthentication.handleIncomingRedirect(u,this.events);if(HS(c)){this.setSessionInfo(c);const h=window.localStorage.getItem(yc);h===null?this.events.emit(kt.LOGIN):(window.localStorage.removeItem(yc),this.events.emit(kt.SESSION_RESTORED,h))}else if(o.restorePreviousSession===!0){const h=window.localStorage.getItem(al);if(h!==null&&await BS(h,this.clientAuthentication,this))return new Promise(()=>{})}return this.tokenRequestInProgress=!1,c},this.events=new aS,t.clientAuthentication?this.clientAuthentication=t.clientAuthentication:t.secureStorage&&t.insecureStorage?this.clientAuthentication=Ph({secureStorage:t.secureStorage,insecureStorage:t.insecureStorage}):this.clientAuthentication=Ph({}),t.sessionInfo?this.info={sessionId:t.sessionInfo.sessionId,isLoggedIn:!1,webId:t.sessionInfo.webId}:this.info={sessionId:r??hu(),isLoggedIn:!1},this.events.on(kt.LOGIN,()=>window.localStorage.setItem(al,this.info.sessionId)),this.events.on(kt.SESSION_EXPIRED,()=>this.internalLogout(!1)),this.events.on(kt.ERROR,()=>this.internalLogout(!1))}setSessionInfo(t){this.info.isLoggedIn=t.isLoggedIn,this.info.webId=t.webId,this.info.sessionId=t.sessionId,this.info.expirationDate=t.expirationDate,this.events.on(kt.SESSION_EXTENDED,r=>{this.info.expirationDate=Date.now()+r*1e3})}}let ul;function Td(){return typeof ul>"u"&&(ul=new $S),ul}const KS=(...e)=>Td().login(...e),VS=(...e)=>Td().handleIncomingRedirect(...e);var zS=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,WS=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,qS=/\s|\uFEFF|\xA0/,JS=/\r?\n[\x20\x09]+/g,GS=/[;,"]/,QS=/[;,"]|\s/,YS=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,en={IDLE:1,URI:2,ATTR:4};function Ah(e){return e.replace(WS,"")}function ha(e){return qS.test(e)}function XS(e,t){for(;ha(e[t]);)t++;return t}function Rh(e){return QS.test(e)||!YS.test(e)}function ZS(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>r in t&&e[r]===t[r])}class Qe{constructor(t){this.refs=[],t&&this.parse(t)}rel(t){for(var r=[],n=t.toLowerCase(),i=0;i<this.refs.length;i++)typeof this.refs[i].rel=="string"&&this.refs[i].rel.toLowerCase()===n&&r.push(this.refs[i]);return r}get(t,r){t=t.toLowerCase(),r=r.toLowerCase();for(var n=[],i=0;i<this.refs.length;i++)typeof this.refs[i][t]=="string"&&this.refs[i][t].toLowerCase()===r&&n.push(this.refs[i]);return n}set(t){return this.refs.push(t),this}setUnique(t){return this.refs.some(r=>ZS(r,t))||this.refs.push(t),this}has(t,r){t=t.toLowerCase(),r=r.toLowerCase();for(var n=0;n<this.refs.length;n++)if(typeof this.refs[n][t]=="string"&&this.refs[n][t].toLowerCase()===r)return!0;return!1}parse(t,o){o=o||0,t=o?t.slice(o):t,t=Ah(t).replace(JS,"");for(var n=en.IDLE,i=t.length,o=0,u=null;o<i;)if(n===en.IDLE){if(ha(t[o])){o++;continue}else if(t[o]==="<"){u!=null&&(u.rel!=null?this.refs.push(...Qe.expandRelations(u)):this.refs.push(u));var c=t.indexOf(">",o);if(c===-1)throw new Error("Expected end of URI delimiter at offset "+o);u={uri:t.slice(o+1,c)},o=c,n=en.URI}else throw new Error('Unexpected character "'+t[o]+'" at offset '+o);o++}else if(n===en.URI)if(ha(t[o])){o++;continue}else if(t[o]===";")n=en.ATTR,o++;else if(t[o]===",")n=en.IDLE,o++;else throw new Error('Unexpected character "'+t[o]+'" at offset '+o);else if(n===en.ATTR){if(t[o]===";"||ha(t[o])){o++;continue}var c=t.indexOf("=",o);c===-1&&(c=t.indexOf(";",o)),c===-1&&(c=t.length);var h=Ah(t.slice(o,c)).toLowerCase(),f="";if(o=c+1,o=XS(t,o),t[o]==='"')for(o++;o<i;){if(t[o]==='"'){o++;break}t[o]==="\\"&&o++,f+=t[o],o++}else{for(var c=o+1;!GS.test(t[c])&&c<i;)c++;f=t.slice(o,c),o=c}switch(u[h]&&Qe.isSingleOccurenceAttr(h)||(h[h.length-1]==="*"?u[h]=Qe.parseExtendedValue(f):(f=h==="type"?f.toLowerCase():f,u[h]!=null?Array.isArray(u[h])?u[h].push(f):u[h]=[u[h],f]:u[h]=f)),t[o]){case",":n=en.IDLE;break;case";":n=en.ATTR;break}o++}else throw new Error('Unknown parser state "'+n+'"');return u!=null&&(u.rel!=null?this.refs.push(...Qe.expandRelations(u)):this.refs.push(u)),u=null,this}toString(){for(var t=[],r="",n=null,i=0;i<this.refs.length;i++)n=this.refs[i],r=Object.keys(this.refs[i]).reduce(function(o,u){return u==="uri"?o:o+"; "+Qe.formatAttribute(u,n[u])},"<"+n.uri+">"),t.push(r);return t.join(", ")}}Qe.isCompatibleEncoding=function(e){return zS.test(e)};Qe.parse=function(e,t){return new Qe().parse(e,t)};Qe.isSingleOccurenceAttr=function(e){return e==="rel"||e==="type"||e==="media"||e==="title"||e==="title*"};Qe.isTokenAttr=function(e){return e==="rel"||e==="type"||e==="anchor"};Qe.escapeQuotes=function(e){return e.replace(/"/g,'\\"')};Qe.expandRelations=function(e){var t=e.rel.split(" ");return t.map(function(r){var n=Object.assign({},e);return n.rel=r,n})};Qe.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:Qe.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:Qe.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}};Qe.formatExtendedAttribute=function(e,t){var r=(t.encoding||"utf-8").toUpperCase(),n=t.language||"en",i="";return Buffer.isBuffer(t.value)&&Qe.isCompatibleEncoding(r)?i=t.value.toString(r):Buffer.isBuffer(t.value)?i=t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):i=encodeURIComponent(t.value),e+"="+r+"'"+n+"'"+i};Qe.formatAttribute=function(e,t){return Array.isArray(t)?t.map(r=>Qe.formatAttribute(e,r)).join("; "):e[e.length-1]==="*"||typeof t!="string"?Qe.formatExtendedAttribute(e,t):(Qe.isTokenAttr(e)?t=Rh(t)?'"'+Qe.escapeQuotes(t)+'"':Qe.escapeQuotes(t):Rh(t)&&(t=encodeURIComponent(t),t=t.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),t='"'+t+'"'),e+"="+t)};var eE=Qe;const tE=Va(eE);function gu(e){const t=e;return typeof t=="object"&&typeof t.internal_resourceInfo=="object"}function wm(e){const t=e;return typeof t=="object"&&typeof t.internal_resourceInfo=="object"&&typeof t.internal_resourceInfo.linkedResources=="object"}function ro(e){const t=e;return typeof t.internal_changeLog=="object"&&Array.isArray(t.internal_changeLog.additions)&&Array.isArray(t.internal_changeLog.deletions)}class mu extends Error{}function Ht(e){return typeof e=="string"?e:e.value}function Sm(e,t={}){const r=new URL(e);return r.pathname=r.pathname.replace(/\/\/+/g,"/"),t.trailingSlash===!1&&r.pathname.slice(-1)==="/"&&(r.pathname=r.pathname.slice(0,r.pathname.length-1)),t.trailingSlash===!0&&r.pathname.slice(-1)!=="/"&&(r.pathname=`${r.pathname}/`),r.href}function Em(e){var t,r,n,i,o;const u=(r=(t=e.headers.get("Content-Type"))===null||t===void 0?void 0:t.split(";"))!==null&&r!==void 0?r:[],c=u.length>0&&["text/turtle","application/ld+json"].includes(u[0]),h={sourceIri:e.url,isRawData:!c,contentLocation:(n=e.headers.get("Content-Location"))!==null&&n!==void 0?n:void 0,contentType:(i=e.headers.get("Content-Type"))!==null&&i!==void 0?i:void 0,linkedResources:{},location:(o=e.headers.get("Location"))!==null&&o!==void 0?o:void 0},f=e.headers.get("Link");if(f){const p=tE.parse(f),y=p.get("rel","acl");y.length===1&&(h.aclUrl=new URL(y[0].uri,h.sourceIri).href),h.linkedResources=p.refs.reduce((F,E)=>{var C,I;return(C=F[I=E.rel])!==null&&C!==void 0||(F[I]=[]),F[E.rel].push(new URL(E.uri,h.sourceIri).href),F},h.linkedResources)}const g=e.headers.get("WAC-Allow");return g&&(h.permissions=rE(g)),h}function rE(e){function t(n){const i=n.split(" ");return i.includes("write")?{read:i.includes("read"),append:!0,write:!0,control:i.includes("control")}:{read:i.includes("read"),append:i.includes("append"),write:!1,control:i.includes("control")}}function r(n,i){const o=n.split(",").map(c=>c.split("=")).filter(c=>c.length===2&&c[0].trim()===i);if(o.length!==1)return"";const u=o[0][1].trim();return u.charAt(0)!=='"'||u.charAt(u.length-1)!=='"'?"":u.substring(1,u.length-1)}return{user:t(r(e,"user")),public:t(r(e,"public"))}}function yu(e){return!e.ok}function nE(e){return e.status===401||e.status===403}const iE={BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",Container:"http://www.w3.org/ns/ldp#Container",Resource:"http://www.w3.org/ns/ldp#Resource",contains:"http://www.w3.org/ns/ldp#contains"},oE={storage:"http://www.w3.org/ns/pim/space#storage"};function sE(e,t={ignoreAuthenticationErrors:!1}){if(yu(e)&&(!nE(e)||!t.ignoreAuthenticationErrors))throw new vu(`Fetching the metadata of the Resource at [${e.url}] failed: [${e.status}] [${e.statusText}].`,e);return{internal_resourceInfo:Em(e)}}function aE(e){var t;return(t=e.internal_resourceInfo.contentType)!==null&&t!==void 0?t:null}function lr(e){return gu(e)?e.internal_resourceInfo.sourceIri:null}class vu extends mu{get statusCode(){return this.response.status}get statusText(){return this.response.statusText}constructor(t,r){super(t),this.response=r}}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Ih;var uE=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Zh):e=>(Ih||(Ih=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));const lE=Va(uE),wo="http://www.w3.org/1999/02/22-rdf-syntax-ns#",So="http://www.w3.org/2001/XMLSchema#",ll="http://www.w3.org/2000/10/swap/",Ar={xsd:{decimal:`${So}decimal`,boolean:`${So}boolean`,double:`${So}double`,integer:`${So}integer`,string:`${So}string`},rdf:{type:`${wo}type`,nil:`${wo}nil`,first:`${wo}first`,rest:`${wo}rest`,langString:`${wo}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${ll}reify#forSome`,forAll:`${ll}reify#forAll`},log:{implies:`${ll}log#implies`}},{xsd:Vs}=Ar,cE=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Nh={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},dE=/[\x00-\x20<>\\"\{\}\|\^\`]/,fE={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},hE=/$0^/;class pE{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode){this._n3Mode=!1;for(const r in this)!(r in fE)&&this[r]instanceof RegExp&&(this[r]=hE)}else this._n3Mode=t.n3!==!1;this._comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,r){let n=this._input,i=n.length;for(;;){let c,h;for(;c=this._newline.exec(n);)this._comments&&(h=this._comment.exec(c[0]))&&o("comment",h[1],"",this._line,c[0].length),n=n.substr(c[0].length,n.length),i=n.length,this._line++;if(!c&&(c=this._whitespace.exec(n))&&(n=n.substr(c[0].length,n.length)),this._endOfFile.test(n))return r&&(this._comments&&(h=this._comment.exec(n))&&o("comment",h[1],"",this._line,n.length),n=null,o("eof","","",this._line,0)),this._input=n;const f=this._line,g=n[0];let p="",y="",F="",E=null,C=0,I=!1;switch(g){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){I=!0;break}}else{this._n3Mode&&(C=1,p="^");break}case"<":if(E=this._unescapedIri.exec(n))p="IRI",y=E[1];else if(E=this._iri.exec(n)){if(y=this._unescape(E[1]),y===null||dE.test(y))return u(this);p="IRI"}else n.length>1&&n[1]==="<"?(p="<<",C=2):this._n3Mode&&n.length>1&&n[1]==="="&&(p="inverse",C=2,y=">");break;case">":n.length>1&&n[1]===">"&&(p=">>",C=2);break;case"_":((E=this._blank.exec(n))||r&&(E=this._blank.exec(`${n} `)))&&(p="blank",F="_",y=E[1]);break;case'"':if(E=this._simpleQuotedString.exec(n))y=E[1];else if({value:y,matchLength:C}=this._parseLiteral(n),y===null)return u(this);(E!==null||C!==0)&&(p="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(E=this._simpleApostropheString.exec(n))y=E[1];else if({value:y,matchLength:C}=this._parseLiteral(n),y===null)return u(this);(E!==null||C!==0)&&(p="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(E=this._variable.exec(n))&&(p="var",y=E[0]);break;case"@":this._previousMarker==="literal"&&(E=this._langcode.exec(n))?(p="langcode",y=E[1]):(E=this._keyword.exec(n))&&(p=E[0]);break;case".":if(n.length===1?r:n[1]<"0"||n[1]>"9"){p=".",C=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(E=this._number.exec(n)||r&&(E=this._number.exec(`${n} `)))&&(p="literal",y=E[0],F=typeof E[1]=="string"?Vs.double:typeof E[2]=="string"?Vs.decimal:Vs.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(E=this._sparqlKeyword.exec(n))?p=E[0].toUpperCase():I=!0;break;case"f":case"t":(E=this._boolean.exec(n))?(p="literal",y=E[0],F=Vs.boolean):I=!0;break;case"a":(E=this._shortPredicates.exec(n))?(p="abbreviation",y="a"):I=!0;break;case"=":this._n3Mode&&n.length>1&&(p="abbreviation",n[1]!==">"?(C=1,y="="):(C=2,y=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(C=1,p=g);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(p="{|",C=2):(p=g,C=1));break;case"|":n.length>=2&&n[1]==="}"&&(p="|}",C=2);break;default:I=!0}if(I&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(E=this._prefix.exec(n))?(p="prefix",y=E[1]||""):((E=this._prefixed.exec(n))||r&&(E=this._prefixed.exec(`${n} `)))&&(p="prefixed",F=E[1]||"",y=this._unescape(E[2]))),this._previousMarker==="^^")switch(p){case"prefixed":p="type";break;case"IRI":p="typeIRI";break;default:p=""}if(!p)return r||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?u(this):this._input=n;const _=C||E[0].length,v=o(p,y,F,f,_);this.previousToken=v,this._previousMarker=p,n=n.substr(_,n.length)}function o(c,h,f,g,p){const y=n?i-n.length:i,F=y+p,E={type:c,value:h,prefix:f,line:g,start:y,end:F};return t(null,E),E}function u(c){t(c._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(t){let r=!1;const n=t.replace(cE,(i,o,u,c)=>{if(typeof o=="string")return String.fromCharCode(Number.parseInt(o,16));if(typeof u=="string"){let h=Number.parseInt(u,16);return h<=65535?String.fromCharCode(Number.parseInt(u,16)):String.fromCharCode(55296+((h-=65536)>>10),56320+(h&1023))}return c in Nh?Nh[c]:(r=!0,"")});return r?null:n}_parseLiteral(t){if(t.length>=3){const r=t.match(/^(?:"""|"|'''|'|)/)[0],n=r.length;let i=Math.max(this._literalClosingPos,n);for(;(i=t.indexOf(r,i))>0;){let o=0;for(;t[i-o-1]==="\\";)o++;if(o%2===0){const u=t.substring(n,i),c=u.split(/\r\n|\r|\n/).length-1,h=i+n;if(n===1&&c!==0||n===3&&this._lineMode)break;return this._line+=c,{value:this._unescape(u),matchLength:h}}i++}this._literalClosingPos=t.length-n+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const r=new Error(`Unexpected "${t}" on line ${this._line}.`);return r.context={token:void 0,line:this._line,previousToken:this.previousToken},r}_readStartingBom(t){return t.startsWith("\uFEFF")?t.substr(1):t}tokenize(t,r){if(this._line=1,typeof t=="string")if(this._input=this._readStartingBom(t),typeof r=="function")lE(()=>this._tokenizeToEnd(r,!0));else{const n=[];let i;if(this._tokenizeToEnd((o,u)=>o?i=o:n.push(u),!0),i)throw i;return n}else this._pendingBuffer=null,typeof t.setEncoding=="function"&&t.setEncoding("utf8"),t.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(r,!1)))}),t.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(r,!0)}),t.on("error",r)}}const{rdf:gE,xsd:gi}=Ar;let _u,mE=0;const Dt={namedNode:SE,blankNode:EE,variable:xE,literal:bE,defaultGraph:FE,quad:Lh,triple:Lh};class mn{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof mn?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class bm extends mn{get termType(){return"NamedNode"}}class Ko extends mn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let r=t.lastIndexOf('"')+1;return r<t.length&&t[r++]==="@"?t.substr(r).toLowerCase():""}get datatype(){return new bm(this.datatypeString)}get datatypeString(){const t=this.id,r=t.lastIndexOf('"')+1,n=r<t.length?t[r]:"";return n==="^"?t.substr(r+2):n!=="@"?gi.string:gE.langString}equals(t){return t instanceof Ko?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class yE extends mn{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class vE extends mn{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class _E extends mn{constructor(){return super(""),_u||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}}_u=new _E;class wE extends mn{constructor(t,r,n,i){super(""),this._subject=t,this._predicate=r,this._object=n,this._graph=i||_u}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}}function SE(e){return new bm(e)}function EE(e){return new yE(e||`n3-${mE++}`)}function bE(e,t){if(typeof t=="string")return new Ko(`"${e}"@${t.toLowerCase()}`);let r=t?t.value:"";return r===""&&(typeof e=="boolean"?r=gi.boolean:typeof e=="number"&&(Number.isFinite(e)?r=Number.isInteger(e)?gi.integer:gi.double:(r=gi.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),r===""||r===gi.string?new Ko(`"${e}"`):new Ko(`"${e}"^^${r}`)}function xE(e){return new vE(e)}function FE(){return _u}function Lh(e,t,r,n){return new wE(e,t,r,n)}let Dh=0;class xm{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&Fm(this,t.factory);const r=typeof t.format=="string"?t.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(r),i=/trig/.test(r),o=/triple/.test(r),u=/quad/.test(r),c=this._n3Mode=/n3/.test(r),h=o||u;(this._supportsNamedGraphs=!(n||c))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||i||o||c),this._supportsRDFStar=r===""||/star|\*$/.test(r),h&&(this._resolveRelativeIRI=f=>null),this._blankNodePrefix=typeof t.blankNodePrefix!="string"?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new pE({lineMode:h,n3:c}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){Dh=0}_setBase(t){if(!t)this._base="",this._basePath="";else{const r=t.indexOf("#");r>=0&&(t=t.substr(0,r)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}}_saveContext(t,r,n,i,o){const u=this._n3Mode;this._contextStack.push({type:t,subject:n,predicate:i,object:o,graph:r,inverse:u?this._inversePredicate:!1,blankPrefix:u?this._prefixes._:"",quantified:u?this._quantified:null}),u&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,r){const n=this._contextStack.pop();if(!n||n.type!==t)return this._error(`Unexpected ${r.type}`,r);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(t){switch(t.type){case"eof":return this._graph!==null?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,r){let n;switch(t.type){case"IRI":case"typeIRI":const i=this._resolveIRI(t.value);if(i===null)return this._error("Invalid IRI",t);n=this._namedNode(i);break;case"type":case"prefixed":const o=this._prefixes[t.prefix];if(o===void 0)return this._error(`Undefined prefix "${t.prefix}:"`,t);n=this._namedNode(o+t.value);break;case"blank":n=this._blankNode(this._prefixes[t.prefix]+t.value);break;case"var":n=this._variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!r&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(t.prefix.length===0)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._literal(t.value,this._namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._subject=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const r=t.type;switch(r){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${r}`,t):(this._subject=null,r==="]"?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if((this._predicate=this._readEntity(t))===void 0)return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(t.prefix.length===0)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._literal(t.value,this._namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if((this._object=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return t.type==="{"?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return t.type!=="{"?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return t.type==="]"?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if(t.type!=="]")return this._readBlankNodePunctuation(t);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const r=this._predicate===null;return this._restoreContext("blank",t),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:r?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let r=null,n=null,i=this._readListItem;const o=this._subject,u=this._contextStack,c=u[u.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=r=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),u.length!==0&&u[u.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;n=this.RDF_NIL;break;case"literal":t.prefix.length===0?(this._literalValue=t.value,i=this._readListItemDataTypeOrLang):(r=this._literal(t.value,this._namedNode(t.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if((r=this._readEntity(t))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),o===null?c.predicate===null?c.subject=n:c.object=n:this._emit(o,this.RDF_REST,n,this._graph),r!==null){if(this._n3Mode&&(t.type==="IRI"||t.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,r),this._subject=r,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,r,this._graph)}return i}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let r=this._literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const n=this._readEntity(t);if(n===void 0)return;r=this._literal(this._literalValue,n),t=null;break;case"langcode":r=this._literal(this._literalValue,t.value),t=null;break}return{token:t,literal:r}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,r){const n=this._completeLiteral(t);if(n)return this._object=n.literal,r&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(t){return t.type!=="}"?this._readPunctuation(t):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let r,n=this._graph;const i=this._subject,o=this._inversePredicate;switch(t.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,r=this._contextStack.length?this._readSubject:this._readInTopContext,o&&(this._inversePredicate=!1);break;case";":r=this._readPredicate;break;case",":r=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",t);const u=this._predicate,c=this._object;this._subject=this._quad(i,u,c,this.DEFAULTGRAPH),r=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",t);this._subject=null,r=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(t))!==void 0){r=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(i!==null){const u=this._predicate,c=this._object;o?this._emit(c,u,i,n):this._emit(i,u,c,n)}return r}_readBlankNodePunctuation(t){let r;switch(t.type){case";":r=this._readPredicate;break;case",":r=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),r}_readQuadPunctuation(t){return t.type!=="."?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return t.type!=="prefix"?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if(t.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const r=this._readEntity(t);return this._prefixes[this._prefix]=r.value,this._prefixCallback(this._prefix,r),this._readDeclarationPunctuation}_readBaseIRI(t){const r=t.type==="IRI"&&this._resolveIRI(t.value);return r?(this._setBase(r),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return t.type!=="]"?this._error("Invalid graph label",t):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):t.type!=="."?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let r;switch(t.type){case"IRI":case"prefixed":if((r=this._readEntity(t,!0))!==void 0)break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,r,this.QUANTIFIERS_GRAPH)):this._quantified[r.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return t.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const r=this._contextStack,n=r.length&&r[r.length-1];if(n&&n.type==="item"){const i=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let r,n;const i=this._blankNode();if((n=this._readEntity(t))!==void 0)return this._predicate===null?(r=this._subject,this._subject=i):(r=this._object,this._object=i),this._emit(r,n,i,this._graph),this._readPath}_readBackwardPath(t){const r=this._blankNode();let n,i;if((n=this._readEntity(t))!==void 0)return this._predicate===null?(i=this._subject,this._subject=r):(i=this._object,this._object=r),this._emit(r,n,i,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return t.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(t))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(t.type!==">>")return this._error(`Expected >> but got ${t.type}`,t);const r=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),this._subject===null?(this._subject=r,this._readPredicate):(this._object=r,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,r,n,i){this._callback(null,this._quad(t,r,n,i||this.DEFAULTGRAPH))}_error(t,r){const n=new Error(`${t} on line ${r.line}.`);n.context={token:r,line:r.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=cl}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return(t[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const r=t.length;let n="",i=-1,o=-1,u=0,c="/";for(;i<r;){switch(c){case":":if(o<0&&t[++i]==="/"&&t[++i]==="/")for(;(o=i+1)<r&&t[o]!=="/";)i=o;break;case"?":case"#":i=r;break;case"/":if(t[i+1]===".")switch(c=t[++i+1],c){case"/":n+=t.substring(u,i-1),u=i+1;break;case void 0:case"?":case"#":return n+t.substring(u,i)+t.substr(i+1);case".":if(c=t[++i+1],c===void 0||c==="/"||c==="?"||c==="#"){if(n+=t.substring(u,i-2),(u=n.lastIndexOf("/"))>=o&&(n=n.substr(0,u)),c!=="/")return`${n}/${t.substr(i+1)}`;u=i+1}}}c=t[++i]}return n+t.substring(u)}parse(t,r,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Dh++}_`,this._prefixCallback=n||cl,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const i=[];let o;if(this._callback=(u,c)=>{u?o=u:c&&i.push(c)},this._lexer.tokenize(t).every(u=>this._readCallback=this._readCallback(u)),o)throw o;return i}this._callback=r,this._lexer.tokenize(t,(i,o)=>{i!==null?(this._callback(i),this._callback=cl):this._readCallback&&(this._readCallback=this._readCallback(o))})}}function cl(){}function Fm(e,t){const r=t.namedNode;e._namedNode=r,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=r(Ar.rdf.first),e.RDF_REST=r(Ar.rdf.rest),e.RDF_NIL=r(Ar.rdf.nil),e.N3_FORALL=r(Ar.r.forAll),e.N3_FORSOME=r(Ar.r.forSome),e.ABBREVIATIONS={a:r(Ar.rdf.type),"=":r(Ar.owl.sameAs),">":r(Ar.log.implies)},e.QUANTIFIERS_GRAPH=r("urn:n3:quantifiers")}Fm(xm.prototype,Dt);function kE(e){return!!e&&e.termType==="DefaultGraph"}const Eo=Dt.defaultGraph(),{rdf:TE,xsd:pi}=Ar,Oh=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,jh=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,CE={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class bo extends mn{equals(t){return t===this}}class PE{constructor(t,r){if(this._prefixRegex=/$0^/,t&&typeof t.write!="function"&&(r=t,t=null),r=r||{},this._lists=r.lists,t)this._outputStream=t,this._endStream=r.end===void 0?!0:!!r.end;else{let n="";this._outputStream={write(i,o,u){n+=i,u&&u()},end:i=>{i&&i(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Eo,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp(`^${Mh(r.baseIRI)}${r.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=r.baseIRI.length))}get _inDefaultGraph(){return Eo.equals(this._graph)}_write(t,r){this._outputStream.write(t,"utf8",r)}_writeQuad(t,r,n,i,o){try{i.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Eo.equals(i)?"":`${this._encodeIriOrBlank(i)} {
`)),this._graph=i,this._subject=null),t.equals(this._subject)?r.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,o):this._write(`;
    ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,o):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=r)} ${this._encodeObject(n)}`,o)}catch(u){o&&o(u)}}_writeQuadLine(t,r,n,i,o){delete this._prefixMatch,this._write(this.quadToString(t,r,n,i),o)}quadToString(t,r,n,i){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(r)} ${this._encodeObject(n)}${i&&i.value?` ${this._encodeIriOrBlank(i)} .
`:` .
`}`}quadsToString(t){return t.map(r=>this.quadToString(r.subject,r.predicate,r.object,r.graph)).join("")}_encodeSubject(t){return t.termType==="Quad"?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if(t.termType!=="NamedNode")return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let r=t.value;this._baseMatcher&&this._baseMatcher.test(r)&&(r=r.substr(this._baseLength)),Oh.test(r)&&(r=r.replace(jh,Uh));const n=this._prefixRegex.exec(r);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:r:`<${r}>`}_encodeLiteral(t){let r=t.value;if(Oh.test(r)&&(r=r.replace(jh,Uh)),t.language)return`"${r}"@${t.language}`;if(this._lineMode){if(t.datatype.value===pi.string)return`"${r}"`}else switch(t.datatype.value){case pi.string:return`"${r}"`;case pi.boolean:if(r==="true"||r==="false")return r;break;case pi.integer:if(/^[+-]?\d+$/.test(r))return r;break;case pi.decimal:if(/^[+-]?\d*\.\d+$/.test(r))return r;break;case pi.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(r))return r;break}return`"${r}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===TE.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:r,object:n,graph:i}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(r)} ${this._encodeObject(n)}${kE(i)?"":` ${this._encodeIriOrBlank(i)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,r,n,i,o){n===void 0?this._writeQuad(t.subject,t.predicate,t.object,t.graph,r):typeof i=="function"?this._writeQuad(t,r,n,Eo,i):this._writeQuad(t,r,n,i||Eo,o)}addQuads(t){for(let r=0;r<t.length;r++)this.addQuad(t[r])}addPrefix(t,r,n){const i={};i[t]=r,this.addPrefixes(i,n)}addPrefixes(t,r){if(!this._prefixIRIs)return r&&r();let n=!1;for(let i in t){let o=t[i];typeof o!="string"&&(o=o.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[o]=i+=":",this._write(`@prefix ${i} <${o}>.
`)}if(n){let i="",o="";for(const u in this._prefixIRIs)i+=i?`|${u}`:u,o+=(o?"|":"")+this._prefixIRIs[u];i=Mh(i),this._prefixRegex=new RegExp(`^(?:${o})[^/]*$|^(${i})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",r)}blank(t,r){let n=t,i,o;switch(t===void 0?n=[]:t.termType?n=[{predicate:t,object:r}]:"length"in t||(n=[t]),o=n.length){case 0:return new bo("[]");case 1:if(i=n[0],!(i.object instanceof bo))return new bo(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let u="[";for(let c=0;c<o;c++)i=n[c],i.predicate.equals(t)?u+=`, ${this._encodeObject(i.object)}`:(u+=`${(c?`;
  `:`
  `)+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,t=i.predicate);return new bo(`${u}
]`)}}list(t){const r=t&&t.length||0,n=new Array(r);for(let i=0;i<r;i++)n[i]=this._encodeObject(t[i]);return new bo(`(${n.join(" ")})`)}end(t){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let r=t&&((n,i)=>{r=null,t(n,i)});if(this._endStream)try{return this._outputStream.end(r)}catch{}r&&r()}}function Uh(e){let t=CE[e];return t===void 0&&(e.length===1?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function Mh(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const AE=()=>{const e=[],t=[],r=[];return{onQuad:n=>{e.push(n)},onError:n=>{r.push(n)},onComplete:n=>{t.push(n)},parse:(n,i)=>{RE(lr(i)).parse(n,(o,u)=>{o?r.forEach(c=>c(o)):u?e.forEach(c=>c(u)):t.forEach(c=>c())})}}};function RE(e){return new xm({format:"text/turtle",baseIRI:e})}async function vc(e,t){const r="text/turtle",n=new PE({format:r,prefixes:t==null?void 0:t.prefixes}),i=e.map(c=>Dt.quad(c.subject,c.predicate,c.object,void 0));return n.addQuads(i),await new Promise((c,h)=>{n.end((f,g)=>{f?h(f):c(g)})})}const $a="https://inrupt.com/.well-known/sdk-local-node/",{freeze:we}=Object;function ln(e){return e.substring(0,$a.length)===$a}function pn(e){return e.substring($a.length)}function IE(e){return`${$a}${e}`}function wu(e){return typeof e=="string"&&e.substring(0,2)==="_:"}function Cd(e){return e.substring(2)}function NE(e){return`_:${e.value}`}const on={boolean:"http://www.w3.org/2001/XMLSchema#boolean",dateTime:"http://www.w3.org/2001/XMLSchema#dateTime",date:"http://www.w3.org/2001/XMLSchema#date",time:"http://www.w3.org/2001/XMLSchema#time",decimal:"http://www.w3.org/2001/XMLSchema#decimal",integer:"http://www.w3.org/2001/XMLSchema#integer",string:"http://www.w3.org/2001/XMLSchema#string",langString:"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"};function LE(e){return e==="true"||e==="1"?!0:e==="false"||e==="0"?!1:null}function DE(e){if(!/-?\d{4,}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(Z|(\+|-)\d\d:\d\d)?/.test(e))return null;const[r,n]=e.split("T"),[i,o]=r.charAt(0)==="-"?[-1,r.substring(1)]:[1,r],[u,c,h]=o.split("-"),f=Number.parseInt(u,10)*i,g=Number.parseInt(c,10)-1,p=Number.parseInt(h,10),[y,F]=OE(n),[E,C]=typeof F=="string"?jE(F):[0,0],[I,_,v]=y.split(":"),b=Number.parseInt(I,10)+E,P=Number.parseInt(_,10)+C,[B,L]=v.split("."),A=Number.parseInt(B,10),Q=L?Number.parseInt(L,10):0,ie=new Date(Date.UTC(f,g,p,b,P,A,Q));return f>=0&&f<100&&ie.setUTCFullYear(ie.getUTCFullYear()-1900),ie}function OE(e){if(e.endsWith("Z"))return[e.substring(0,e.length-1),"Z"];const t=e.split("+"),r=e.split("-");return t.length===1&&r.length===1?[t[0],void 0]:t.length>r.length?[t[0],`+${t[1]}`]:[r[0],`-${r[1]}`]}function jE(e){if(e==="Z")return[0,0];const t=e.charAt(0)==="+"?1:-1,[r,n]=e.substring(1).split(":"),i=Number.parseInt(r,10),o=Number.parseInt(n,10);return[i*t,o*t]}function UE(e){const t=Number.parseFloat(e);return Number.isNaN(t)?null:t}function ME(e){const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t}function Dr(e){return km(e)&&e.termType==="NamedNode"}function BE(e){return km(e)&&e.termType==="Literal"}function km(e){return e!==null&&typeof e=="object"&&typeof e.termType=="string"&&typeof e.value=="string"&&typeof e.equals=="function"}function Bh(e){return Dr(e)&&ln(e.value)}function ui(e){const t=Ht(e);if(typeof URL!="function")return!0;try{return new URL(t),!0}catch{return!1}}function Hh(e,t){return Dt.namedNode(Pd(pn(e.value),t))}function Pd(e,t){if(typeof URL!="function")throw new Error("The URL interface is not available, so an IRI cannot be determined.");const r=new URL(t);return r.hash=e,r.href}function $h(e,t,r={}){var n;if(!["NamedNode","DefaultGraph"].includes(t.graph.termType))throw new Error(`Cannot parse Quads with nodes of type [${t.graph.termType}] as their Graph node.`);const o=t.graph.termType==="DefaultGraph"?"default":t.graph.value,u=(n=e.graphs[o])!==null&&n!==void 0?n:{};return we({...e,graphs:we({...e.graphs,[o]:HE(u,t,r)})})}function HE(e,t,r){var n;if(!["NamedNode","BlankNode"].includes(t.subject.termType))throw new Error(`Cannot parse Quads with nodes of type [${t.subject.termType}] as their Subject node.`);const o=t.subject.termType==="BlankNode"?`_:${t.subject.value}`:t.subject.value,u=(n=e[o])!==null&&n!==void 0?n:{type:"Subject",url:o,predicates:{}};return we({...e,[o]:$E(u,t,r)})}function $E(e,t,r){return we({...e,predicates:KE(e.predicates,t,r)})}function KE(e,t,r){var n;if(!["NamedNode"].includes(t.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${t.predicate.termType}] as their Predicate node.`);const o=t.predicate.value,u=(n=e[o])!==null&&n!==void 0?n:{};return we({...e,[o]:Tm(u,t,r)})}function Tm(e,t,r){var n,i,o,u,c,h,f,g;if(t.object.termType==="NamedNode"){const p=we([...(n=e.namedNodes)!==null&&n!==void 0?n:[],t.object.value]);return we({...e,namedNodes:p})}if(t.object.termType==="Literal"){if(t.object.datatype.value===on.langString){const F=t.object.language.toLowerCase(),E=we([...(o=(i=e.langStrings)===null||i===void 0?void 0:i[F])!==null&&o!==void 0?o:[],t.object.value]),C=we({...(u=e.langStrings)!==null&&u!==void 0?u:{},[F]:E});return we({...e,langStrings:C})}const p=we([...(h=(c=e.literals)===null||c===void 0?void 0:c[t.object.datatype.value])!==null&&h!==void 0?h:[],t.object.value]),y=we({...(f=e.literals)!==null&&f!==void 0?f:{},[t.object.datatype.value]:p});return we({...e,literals:y})}if(t.object.termType==="BlankNode"){const p=Cm(t.object,r),y=we([...(g=e.blankNodes)!==null&&g!==void 0?g:[],p]);return we({...e,blankNodes:y})}throw new Error(`Objects of type [${t.object.termType}] are not supported.`)}function Cm(e,t){var r,n;if(((r=t.chainBlankNodes)!==null&&r!==void 0?r:[]).find(f=>f.equals(e))===void 0)return NE(e);const u=((n=t.otherQuads)!==null&&n!==void 0?n:[]).filter(f=>f.subject.equals(e)),c=u.filter(f=>!us(f.object)).reduce((f,g)=>{var p;if(!["NamedNode"].includes(g.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.predicate.termType}] as their Predicate node.`);const F=(p=f[g.predicate.value])!==null&&p!==void 0?p:{};return we({...f,[g.predicate.value]:Tm(F,g,t)})},{});return u.filter(f=>us(f.object)).reduce((f,g)=>{var p,y;if(!["NamedNode"].includes(g.predicate.termType))throw new Error(`Cannot parse Quads with nodes of type [${g.predicate.termType}] as their Predicate node.`);const E=(p=f[g.predicate.value])!==null&&p!==void 0?p:{},C=(y=E.blankNodes)!==null&&y!==void 0?y:[];return we({...f,[g.predicate.value]:{...E,blankNodes:[...C,Cm(g.object,t)]}})},c)}function VE(e){const t=e.map(u=>u.subject).filter(us),r=e.map(u=>u.object).filter(us);function n(u){return u.every(c=>u.every(h=>c.equals(h)))}const i=[];return r.forEach(u=>{i.push(...Pm(u,e))}),t.concat(r).filter(u=>{if(i.some(h=>h.equals(u)))return!1;const c=e.filter(h=>h.object.equals(u)).map(h=>h.subject);return c.length>0&&n(c)})}function zE(e,t={}){var r;const n=[],i=(r=t.dataFactory)!==null&&r!==void 0?r:Dt;return Object.keys(e.graphs).forEach(o=>{const u=e.graphs[o],c=o==="default"?i.defaultGraph():i.namedNode(o);Object.keys(u).forEach(h=>{const{predicates:f}=u[h],g=wu(h)?i.blankNode(Cd(h)):i.namedNode(h);n.push(...Ka(f,g,c,t))})}),n}function Ka(e,t,r,n={}){var i;const o=[],u=(i=n.dataFactory)!==null&&i!==void 0?i:Dt;return Object.keys(e).forEach(c=>{var h,f,g,p;const y=u.namedNode(c),F=(h=e[c].langStrings)!==null&&h!==void 0?h:{},E=(f=e[c].namedNodes)!==null&&f!==void 0?f:[],C=(g=e[c].literals)!==null&&g!==void 0?g:{},I=(p=e[c].blankNodes)!==null&&p!==void 0?p:[];Object.keys(C).forEach(b=>{const P=u.namedNode(b);C[b].forEach(L=>{const A=u.literal(L,P);o.push(u.quad(t,y,A,r))})}),Object.keys(F).forEach(b=>{F[b].forEach(B=>{const L=u.literal(B,b);o.push(u.quad(t,y,L,r))})}),E.forEach(b=>{const P=u.namedNode(b);o.push(u.quad(t,y,P,r))}),I.forEach(b=>{if(wu(b)){const P=u.blankNode(Cd(b));o.push(u.quad(t,y,P,r))}else{const P=u.blankNode(),B=u.quad(t,y,P,r),L=Ka(b,P,r);o.push(B),o.push(...L)}})}),o}function Pm(e,t,r=[]){if(r.find(c=>c.equals(e))!==void 0)return r;const n=t.filter(c=>c.subject.equals(e)&&us(c.object)).map(c=>c.object);if(n.length===0)return[];const i=[...r,e],o=n.map(c=>Pm(c,t,i)),u=[];for(const c of o)u.push(...c);return u}function us(e){return e.termType==="BlankNode"}function _c(e){var t,r,n,i,o,u,c,h;if(Dr(e))return`<${e.value}> (URL)`;if(BE(e)){if(!Dr(e.datatype))return`[${e.value}] (RDF/JS Literal of unknown type)`;let f;switch(e.datatype.value){case on.boolean:return f=(r=(t=LE(e.value))===null||t===void 0?void 0:t.valueOf())!==null&&r!==void 0?r:`Invalid data: \`${e.value}\``,`${f} (boolean)`;case on.dateTime:return f=(i=(n=DE(e.value))===null||n===void 0?void 0:n.toUTCString())!==null&&i!==void 0?i:`Invalid data: \`${e.value}\``,`${f} (datetime)`;case on.decimal:return f=(u=(o=UE(e.value))===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:`Invalid data: \`${e.value}\``,`${f} (decimal)`;case on.integer:return f=(h=(c=ME(e.value))===null||c===void 0?void 0:c.toString())!==null&&h!==void 0?h:`Invalid data: \`${e.value}\``,`${f} (integer)`;case on.langString:return`"${e.value}" (${e.language} string)`;case on.string:return`"${e.value}" (string)`;default:return`[${e.value}] (RDF/JS Literal of type: \`${e.datatype.value}\`)`}}return e.termType==="BlankNode"?`[${e.value}] (RDF/JS BlankNode)`:e.termType==="Quad"?"??? (nested RDF* Quad)":e.termType==="Variable"?`?${e.value} (RDF/JS Variable)`:e}function Bn(e){if(!nb(e))throw new ob(e)}function WE(e,t){const r=ro(e)?e.internal_changeLog:{additions:[],deletions:[]},[n,i]=t.filter(o=>!Am(o)).reduce(([o,u],c)=>typeof u.find(f=>f.equals(c))<"u"?[o,u.filter(f=>!f.equals(c))]:[o.concat(c),u],[r.additions,r.deletions]);return we({...e,internal_changeLog:{additions:n,deletions:i}})}function qE(e,t){const r=ro(e)?e.internal_changeLog:{additions:[],deletions:[]},[n,i]=t.filter(o=>!Am(o)).reduce(([o,u],c)=>typeof o.find(f=>f.equals(c))<"u"?[o.filter(f=>!f.equals(c)),u]:[o,u.concat(c)],[r.additions,r.deletions]);return we({...e,internal_changeLog:{additions:n,deletions:i}})}function JE(e){return ro(e)?e:we({...e,internal_changeLog:{additions:[],deletions:[]}})}function Am(e){return e.subject.termType==="BlankNode"||e.object.termType==="BlankNode"}function GE(e,t){var r,n,i;if(Bn(e),!ui(t))throw new gs(t);const o=Ht(t);return(i=(n=(r=e.predicates[o])===null||r===void 0?void 0:r.namedNodes)===null||n===void 0?void 0:n.map(u=>ln(u)?`#${pn(u)}`:u))!==null&&i!==void 0?i:[]}const Rm=GE;function Im(e,t){return Bn(e),ZE(e,t,on.string)}function QE(e,t){return Rm(e,t).map(n=>Dt.namedNode(n))}function YE(e,t){var r,n,i,o;if(Bn(e),!ui(t))throw new gs(t);const u=Ht(t);let c=[];const h=(n=(r=e.predicates[u])===null||r===void 0?void 0:r.langStrings)!==null&&n!==void 0?n:{},f=Object.keys(h);for(const y of f){const E=h[y].map(C=>Dt.literal(C,y));c=c.concat(E)}const g=(o=(i=e.predicates[u])===null||i===void 0?void 0:i.literals)!==null&&o!==void 0?o:{},p=Object.keys(g);for(const y of p){const F=g[y],E=Dt.namedNode(y),C=F.map(I=>Dt.literal(I,E));c=c.concat(C)}return c}function XE(e,t){var r,n;Bn(e);const i=QE(e,t),o=YE(e,t),u=Ht(t),h=((n=(r=e.predicates[u])===null||r===void 0?void 0:r.blankNodes)!==null&&n!==void 0?n:[]).map(g=>{const p=wu(g)?Cd(g):void 0;return Dt.blankNode(p)});return i.concat(o).concat(h)}function ZE(e,t,r){var n,i,o,u;if(!ui(t))throw new gs(t);const c=Ht(t);return(u=(o=(i=(n=e.predicates[c])===null||n===void 0?void 0:n.literals)===null||i===void 0?void 0:i[r])===null||o===void 0?void 0:o[0])!==null&&u!==void 0?u:null}function eb(e,t,r={}){var n;if(!ui(t))throw new Dm(t);const i=typeof r.scope<"u"?Ht(r.scope):"default",o=(n=e.graphs[i])!==null&&n!==void 0?n:{},u=Ht(t),c=ln(u)&&wm(e)?Pd(pn(u),lr(e)):u,h=o[c];return typeof h>"u"?null:h}function Nm(e,t={acceptBlankNodes:!1}){var r;const n=typeof t.scope<"u"?Ht(t.scope):"default",i=(r=e.graphs[n])!==null&&r!==void 0?r:{};return Object.values(i).filter(o=>!wu(o.url)||t.acceptBlankNodes)}function tb(e,t){var r;const n=Lm(t)&&wm(e)?Pd(pn(t.url),lr(e)):t.url,i=e.graphs.default,o=we({...i,[n]:we({...t,url:n})}),u=we({...e.graphs,default:o}),c=Dt.namedNode(n),h=(r=e.graphs.default[n])===null||r===void 0?void 0:r.predicates,f=typeof h<"u"?Ka(h,c,Dt.defaultGraph()):[],g=Ka(t.predicates,c,Dt.defaultGraph());return WE(qE(we({...e,graphs:u}),f),g)}function rb(e={}){var t;if(typeof e.url<"u"){const{url:o}=e;if(!ui(o))throw new Dm(o);return we({type:"Subject",predicates:we({}),url:o})}const r=(t=e.name)!==null&&t!==void 0?t:sb(),n=IE(r);return we({type:"Subject",predicates:we({}),url:n})}function nb(e){return typeof e=="object"&&e!==null&&typeof e.type=="string"&&e.type==="Subject"}function ib(e){let t="";Lm(e)?t+=`## Thing (no URL yet  identifier: \`#${pn(e.url)}\`)
`:t+=`## Thing: ${e.url}
`;const r=Object.keys(e.predicates);if(r.length===0)t+=`
<empty>
`;else for(const n of r){t+=`
Property: ${n}
`;const i=XE(e,n);t+=i.reduce((o,u)=>`${o}- ${_c(u)}
`,"")}return t}function Lm(e){return ln(e.url)}class ob extends mu{constructor(t){const r=`Expected a Thing, but received: [${t}].`;super(r),this.receivedValue=t}}class gs extends mu{constructor(t){const r=Dr(t)?t.value:t,n=`Expected a valid URL to identify a property, but received: [${r}].`;super(n),this.receivedProperty=r}}class Dm extends mu{constructor(t){const r=Dr(t)?t.value:t,n=`Expected a valid URL to identify a Thing, but received: [${r}].`;super(n),this.receivedValue=r}}const sb=()=>hu();function Kh(e){const t=new URL(e);return t.hash="",t.href}function ab(){return we({type:"Dataset",graphs:{default:{}}})}async function ub(e,t={}){if(yu(e))throw new vu(`Fetching the SolidDataset at [${e.url}] failed: [${e.status}] [${e.statusText}] ${await e.text()}.`,e);const r=sE(e),n={"text/turtle":AE(),...t.parsers},i=aE(r);if(i===null)throw new Error(`Could not determine the content type of the Resource at [${lr(r)}].`);const o=i.split(";")[0],u=n[o];if(typeof u>"u")throw new Error(`The Resource at [${lr(r)}] has a MIME type of [${o}], but the only parsers available are for the following MIME types: [${Object.keys(n).join(", ")}].`);const c=await e.text();return new Promise((f,g)=>{let p=we({graphs:we({default:we({})}),type:"Dataset"});const y=[],F=[];u.onError(E=>{g(new Error(`Encountered an error parsing the Resource at [${lr(r)}] with content type [${i}]: ${E}`))}),u.onQuad(E=>{F.push(E),E.subject.termType==="BlankNode"||E.object.termType==="BlankNode"?y.push(E):p=$h(p,E)}),u.onComplete(async()=>{const C=y.length<=20?VE(y):[];p=y.filter(v=>C.every(b=>!b.equals(v.subject))).reduce((v,b)=>$h(v,b,{otherQuads:F,chainBlankNodes:C}),p);const _=we({...p,...r});f(_)}),u.parse(c,r)})}async function Om(e,t){var r,n;const i=Sm(Ht(e)),o=Object.keys((r=t==null?void 0:t.parsers)!==null&&r!==void 0?r:{}),u=o.length>0?o.join(", "):"text/turtle",c=await((n=t==null?void 0:t.fetch)!==null&&n!==void 0?n:fetch)(i,{headers:{Accept:u}});if(yu(c))throw new vu(`Fetching the Resource at [${i}] failed: [${c.status}] [${c.statusText}] ${await c.text()}.`,c);return await ub(c,t)}async function lb(e){const t=e.internal_changeLog.deletions.length>0?`DELETE DATA {${(await vc(e.internal_changeLog.deletions.map(wc))).trim()}};`:"",r=e.internal_changeLog.additions.length>0?`INSERT DATA {${(await vc(e.internal_changeLog.additions.map(wc))).trim()}};`:"";return{method:"PATCH",body:`${t} ${r}`,headers:{"Content-Type":"application/sparql-update"}}}async function cb(e,t){return{method:"PUT",body:await vc(zE(e).map(wc),t),headers:{"Content-Type":"text/turtle","If-None-Match":"*",Link:`<${iE.Resource}>; rel="type"`}}}async function jm(e,t,r){var n;const i=Sm(Ht(e)),o=JE(t),u=Vh(o,i)?await lb(o):await cb(o,r),c=await((n=r==null?void 0:r.fetch)!==null&&n!==void 0?n:fetch)(i,u);if(yu(c)){const p=Vh(o,i)?`The changes that were sent to the Pod are listed below.

${hb(o)}`:`The SolidDataset that was sent to the Pod is listed below.

${fb(o)}`;throw new vu(`Storing the Resource at [${i}] failed: [${c.status}] [${c.statusText}] ${await c.text()}.

${p}`,c)}const h={...Em(c),isRawData:!1},f=we({...t,internal_changeLog:{additions:[],deletions:[]},internal_resourceInfo:h});return mb(f)}function db(e,t){return Kh(e.internal_resourceInfo.sourceIri)===Kh(t)}function Vh(e,t){return ro(e)&&gu(e)&&typeof e.internal_resourceInfo.sourceIri=="string"&&db(e,t)}function fb(e){let t="";gu(e)?t+=`# SolidDataset: ${lr(e)}
`:t+=`# SolidDataset (no URL yet)
`;const r=Nm(e);return r.length===0?t+=`
<empty>
`:r.forEach(n=>{t+=`
${ib(n)}`,ro(e)&&(t+=`
${gb(e,n)}
`)}),t}function hb(e){if(!gu(e))return"This is a newly initialized SolidDataset, so there is no source to compare it to.";if(!ro(e)||e.internal_changeLog.additions.length===0&&e.internal_changeLog.deletions.length===0)return`## Changes compared to ${lr(e)}

This SolidDataset has not been modified since it was fetched from ${lr(e)}.
`;let t=`## Changes compared to ${lr(e)}
`;const r=pb(e);return Object.keys(r).forEach(n=>{t+=`
### Thing: ${n}
`;const i=r[n];Object.keys(i).forEach(o=>{t+=`
Property: ${o}
`;const{deleted:u}=i[o],{added:c}=i[o];u.length>0&&(t+=`- Removed:
`,t+=u.reduce((h,f)=>`${h}  - ${_c(f)}
`,"")),c.length>0&&(t+=`- Added:
`,t+=c.reduce((h,f)=>`${h}  - ${_c(f)}
`,""))})}),t}function pb(e){const t=Object.create(null);return e.internal_changeLog.deletions.forEach(r=>{var n,i,o;const u=Bh(r.subject)?Hh(r.subject,lr(e)):r.subject;if(!Dr(u)||!Dr(r.predicate))return;const c=Ht(u),h=Ht(r.predicate);(n=t[c])!==null&&n!==void 0||(t[c]=Object.create(null)),(i=(o=t[c])[h])!==null&&i!==void 0||(o[h]={added:[],deleted:[]}),t[c][h].deleted.push(r.object)}),e.internal_changeLog.additions.forEach(r=>{var n,i,o;const u=Bh(r.subject)?Hh(r.subject,lr(e)):r.subject;if(!Dr(u)||!Dr(r.predicate))return;const c=Ht(u),h=Ht(r.predicate);(n=t[c])!==null&&n!==void 0||(t[c]=Object.create(null)),(i=(o=t[c])[h])!==null&&i!==void 0||(o[h]={added:[],deleted:[]}),t[c][h].added.push(r.object)}),t}function gb(e,t){const r=Dt.namedNode(t.url),n=e.internal_changeLog.additions.reduce((c,h)=>h.subject.equals(r)?c+1:c,0),i=e.internal_changeLog.deletions.reduce((c,h)=>h.subject.equals(r)?c+1:c,0),o=n===1?"1 new value added":`${n} new values added`,u=i===1?"1 value removed":`${i} values removed`;return`(${o} / ${u})`}function wc(e){const t=Dr(e.subject)?zh(e.subject):e.subject,r=Dr(e.object)?zh(e.object):e.object;return Dt.quad(t,e.predicate,r,e.graph)}function zh(e){return ln(e.value)?Dt.namedNode(`#${pn(e.value)}`):e}function mb(e){const t=lr(e),r=e.graphs.default,i=Object.keys(r).reduce((u,c)=>{const h=yb(u[c],t),f=ln(c)?`${t}#${pn(c)}`:c,g={...u};return delete g[c],g[f]=h,we(g)},r),o=we({...e.graphs,default:i});return we({...e,graphs:o})}function yb(e,t){const n=Object.keys(e.predicates).reduce((i,o)=>{var u;const c=(u=i[o].namedNodes)!==null&&u!==void 0?u:[];if(c.every(g=>!ln(g)))return i;const h=we(c.map(g=>ln(g)?`${t}#${pn(g)}`:g)),f=we({...i[o],namedNodes:h});return we({...i,[o]:f})},e.predicates);return we({...e,predicates:n,url:ln(e.url)?`${t}#${pn(e.url)}`:e.url})}const vb=(e,t,r)=>(Bn(e),_b(e,t,r,on.string));function _b(e,t,r,n){var i,o,u;if(Bn(e),!ui(t))throw new gs(t);const c=Ht(t),h=(i=e.predicates[c])!==null&&i!==void 0?i:{},f=(o=h.literals)!==null&&o!==void 0?o:{},g=(u=f[n])!==null&&u!==void 0?u:[],p=we(g.concat(r)),y=we({...f,[n]:p}),F=we({...h,literals:y}),E=we({...e.predicates,[c]:F});return we({...e,predicates:E})}function wb(e,t){if(Bn(e),!ui(t))throw new gs(t);const r=Ht(t),n={...e.predicates};return delete n[r],we({...e,predicates:we(n)})}const Um=(e,t,r)=>(Bn(e),vb(wb(e,t),t,r));function Sb(e,t){const r=new Set;return[e.webIdProfile,...e.altProfileAll].forEach(n=>{const i=eb(n,t);i!==null&&Rm(i,oE.storage).forEach(o=>r.add(o))}),Array.from(r)}function Eb(){return KS({oidcIssuer:"https://login.inrupt.com",redirectUrl:new URL("/",window.location.href).toString(),clientName:"Lore"})}async function bb(e){let t;try{let r=await Om(e.info.webId,{fetch:e.fetch}),n=Sb({webIdProfile:r,altProfileAll:[]},e.info.webId);t={username:e.info.webId.split("/").at(-1),storageURL:n[0]}}catch(r){console.error(r)}return t}async function xb(e,t){let r;try{r=await Om(t,{fetch:e})}catch(n){debugger;n.response&&n.response.status===404&&(console.info(`No movie data found. Creating a new data set at ${t}`),r=ab(),r=await jm(t,r,{fetch:session.fetch}))}return r}async function Fb(e,t,r){let n=rb({id:r.id});n=Mm(n,{...e,shape:t});let{dataset:i,thing:o}=await Bm(n,r.dataset,r);return{dataset:i,thing:o}}function Mm(e,t){const{shape:r}=t;for(let n in t){if(!r[n]){console.info(`Skipping assignment. No shape attribute found for ${n}.`);continue}e=r[n].set(e,r[n].predicate,t[n])}return e}async function Bm(e,t,r={}){let n=tb(t,e);return n=await jm(n.internal_resourceInfo.sourceIri,n,{fetch:r.fetch}),{dataset:n,thing:e}}async function kb(e,t){return Nm(e).map(n=>Tb(n,t.shape))}function Tb(e,t){let r={};for(let n in t){let i=t[n];r[n]=i.parse(e,i.predicate)}return{...r,thing:e,shape:t}}function Wh(e,t){let r=Im(e,t);return JSON.parse(r)}function qh(e,t,r){let n=JSON.stringify(r);return Um(e,t,n)}const Cb="/assets/logo_sm-BqJ0opQZ.png";var Hm="http://xmlns.com/foaf/0.1/";function de(e){return Hm+e}var Pb={PREFIX:"foaf",NAMESPACE:Hm,PREFIX_AND_NAMESPACE:{foaf:"http://xmlns.com/foaf/0.1/"},NS:de,Agent:de("Agent"),Document:de("Document"),Organization:de("Organization"),Project:de("Project"),Person:de("Person"),Group:de("Group"),Image:de("Image"),LabelProperty:de("LabelProperty"),OnlineAccount:de("OnlineAccount"),OnlineChatAccount:de("OnlineChatAccount"),OnlineEcommerceAccount:de("OnlineEcommerceAccount"),OnlineGamingAccount:de("OnlineGamingAccount"),PersonalProfileDocument:de("PersonalProfileDocument"),account:de("account"),accountName:de("accountName"),accountServiceHomepage:de("accountServiceHomepage"),age:de("age"),aimChatID:de("aimChatID"),nick:de("nick"),based_near:de("based_near"),birthday:de("birthday"),currentProject:de("currentProject"),depiction:de("depiction"),depicts:de("depicts"),dnaChecksum:de("dnaChecksum"),familyName:de("familyName"),family_name:de("family_name"),firstName:de("firstName"),focus:de("focus"),fundedBy:de("fundedBy"),geekcode:de("geekcode"),gender:de("gender"),givenName:de("givenName"),givenname:de("givenname"),holdsAccount:de("holdsAccount"),homepage:de("homepage"),page:de("page"),isPrimaryTopicOf:de("isPrimaryTopicOf"),topic:de("topic"),primaryTopic:de("primaryTopic"),icqChatID:de("icqChatID"),img:de("img"),interest:de("interest"),jabberID:de("jabberID"),knows:de("knows"),lastName:de("lastName"),logo:de("logo"),made:de("made"),maker:de("maker"),mbox:de("mbox"),mbox_sha1sum:de("mbox_sha1sum"),member:de("member"),membershipClass:de("membershipClass"),msnChatID:de("msnChatID"),myersBriggs:de("myersBriggs"),name:de("name"),openid:de("openid"),pastProject:de("pastProject"),phone:de("phone"),plan:de("plan"),publications:de("publications"),schoolHomepage:de("schoolHomepage"),sha1:de("sha1"),skypeID:de("skypeID"),status:de("status"),surname:de("surname"),theme:de("theme"),thumbnail:de("thumbnail"),tipjar:de("tipjar"),title:de("title"),topic_interest:de("topic_interest"),weblog:de("weblog"),workInfoHomepage:de("workInfoHomepage"),workplaceHomepage:de("workplaceHomepage"),yahooChatID:de("yahooChatID")},$m="http://www.w3.org/2006/vcard/ns#";function ee(e){return $m+e}var Jh={PREFIX:"vcard",NAMESPACE:$m,PREFIX_AND_NAMESPACE:{vcard:"http://www.w3.org/2006/vcard/ns#"},NS:ee,Acquaintance:ee("Acquaintance"),RelatedType:ee("RelatedType"),Agent:ee("Agent"),BBS:ee("BBS"),TelephoneType:ee("TelephoneType"),Car:ee("Car"),Cell:ee("Cell"),Child:ee("Child"),Colleague:ee("Colleague"),Contact:ee("Contact"),Coresident:ee("Coresident"),Coworker:ee("Coworker"),Crush:ee("Crush"),Date:ee("Date"),Dom:ee("Dom"),Type:ee("Type"),Emergency:ee("Emergency"),Fax:ee("Fax"),Female:ee("Female"),Gender:ee("Gender"),Friend:ee("Friend"),Home:ee("Home"),ISDN:ee("ISDN"),Internet:ee("Internet"),Intl:ee("Intl"),Kin:ee("Kin"),Label:ee("Label"),Male:ee("Male"),Me:ee("Me"),Met:ee("Met"),Modem:ee("Modem"),Msg:ee("Msg"),Muse:ee("Muse"),Neighbor:ee("Neighbor"),None:ee("None"),Other:ee("Other"),PCS:ee("PCS"),Pager:ee("Pager"),Parcel:ee("Parcel"),Parent:ee("Parent"),Postal:ee("Postal"),Pref:ee("Pref"),Sibling:ee("Sibling"),Spouse:ee("Spouse"),Sweetheart:ee("Sweetheart"),Tel:ee("Tel"),Text:ee("Text"),TextPhone:ee("TextPhone"),Unknown:ee("Unknown"),Video:ee("Video"),Voice:ee("Voice"),Work:ee("Work"),X400:ee("X400"),Address:ee("Address"),Email:ee("Email"),Group:ee("Group"),Kind:ee("Kind"),Individual:ee("Individual"),Location:ee("Location"),Organization:ee("Organization"),VCard:ee("VCard"),Name:ee("Name"),adr:ee("adr"),hasAddress:ee("hasAddress"),agent:ee("agent"),anniversary:ee("anniversary"),bday:ee("bday"),category:ee("category"),class:ee("class"),email:ee("email"),hasEmail:ee("hasEmail"),extended_address:ee("extended-address"),geo:ee("geo"),hasGeo:ee("hasGeo"),hasAdditionalName:ee("hasAdditionalName"),hasCalendarBusy:ee("hasCalendarBusy"),hasCalendarLink:ee("hasCalendarLink"),hasCalendarRequest:ee("hasCalendarRequest"),hasCategory:ee("hasCategory"),hasCountryName:ee("hasCountryName"),hasFN:ee("hasFN"),hasFamilyName:ee("hasFamilyName"),hasGender:ee("hasGender"),hasGivenName:ee("hasGivenName"),hasHonorificPrefix:ee("hasHonorificPrefix"),hasHonorificSuffix:ee("hasHonorificSuffix"),hasInstantMessage:ee("hasInstantMessage"),hasLanguage:ee("hasLanguage"),hasLocality:ee("hasLocality"),hasNickname:ee("hasNickname"),nickname:ee("nickname"),hasNote:ee("hasNote"),hasOrganizationName:ee("hasOrganizationName"),hasOrganizationUnit:ee("hasOrganizationUnit"),hasPostalCode:ee("hasPostalCode"),hasRegion:ee("hasRegion"),hasRelated:ee("hasRelated"),hasRole:ee("hasRole"),hasSource:ee("hasSource"),hasStreetAddress:ee("hasStreetAddress"),hasTitle:ee("hasTitle"),hasUID:ee("hasUID"),hasValue:ee("hasValue"),label:ee("label"),language:ee("language"),latitude:ee("latitude"),longitude:ee("longitude"),mailer:ee("mailer"),note:ee("note"),org:ee("org"),organization_name:ee("organization-name"),organization_unit:ee("organization-unit"),post_office_box:ee("post-office-box"),prodid:ee("prodid"),rev:ee("rev"),role:ee("role"),sort_string:ee("sort-string"),title:ee("title"),tz:ee("tz"),value:ee("value"),country_name:ee("country-name"),locality:ee("locality"),postal_code:ee("postal-code"),region:ee("region"),street_address:ee("street-address"),fn:ee("fn"),hasMember:ee("hasMember"),additional_name:ee("additional-name"),family_name:ee("family-name"),given_name:ee("given-name"),honorific_prefix:ee("honorific-prefix"),honorific_suffix:ee("honorific-suffix"),hasKey:ee("hasKey"),key:ee("key"),hasLogo:ee("hasLogo"),logo:ee("logo"),hasName:ee("hasName"),n:ee("n"),hasPhoto:ee("hasPhoto"),photo:ee("photo"),hasSound:ee("hasSound"),sound:ee("sound"),hasTelephone:ee("hasTelephone"),tel:ee("tel"),hasURL:ee("hasURL"),url:ee("url")};const Gh={id:{predicate:Pb.openid,parse:Im,set:Um},rating:{predicate:Jh.value,parse:Wh,set:qh},tags:{predicate:Jh.Other,parse:Wh,set:qh}},Km="9c3bca4",Ab=2;function Ro(e,t=Ab){if(!e||!e.story||!e.character||!e.performance||!e.visuals||!e.soundtrack)return null;let r=(e.story+(e.character+e.performance)/2+(e.visuals+e.soundtrack)/2)/3;return Math.round(r*Math.pow(10,t))/Math.pow(10,t)}const Lr={custom:"CUSTOM",imdb:"Internet Movie Database",meta:"Metacritic"},Rb=(e,t)=>{switch(t){case Lr.imdb:return(r,n)=>{const i=+r.info.Ratings.find(u=>u.Source===t).Value.split("/")[0];return(+n.info.Ratings.find(u=>u.Source===t).Value.split("/")[0]-i)*e};case Lr.meta:return(r,n)=>{const i=+r.info.Ratings.find(u=>u.Source===t).Value.split("/")[0];return(+n.info.Ratings.find(u=>u.Source===t).Value.split("/")[0]-i)*e};default:return(r,n)=>Ro(r.rating)?Ro(n.rating)?(Ro(n.rating)-Ro(r.rating))*e:-1:1}},Ib={story:["I'm staring at a blank screen","The story is nonsense","The story is not very relatable or meaningful","The story is confusing and I'm not sure what the point is","The story isn't important","The story is basic and serves as a setting for the characters","The story is interesting and challenges my expectations","The story is interesting and challenges the norm in meaningful ways","The story is interesting and full of meaningful exploration","The perfect story. Meaningful. Powerful, Timeless."],character:["I saw a dead bird in the parking lot and went home","The characters make no sense and served no purpose","The characters are not very relatable","The characters are inconsistent and their motives are confusing","The characters are somewhat predictable and bland","The characters are interesting and relatable","The characters are relatable and experience meaningful growth","The characters are well-realized, nuanced, and experience meaningful growth","The characters are enthralling. I want to know more about them.","I would watch a movie of these characters just talking to one another"],performance:["They just cast that dead bird from the parking lot","The performers clearly don't want to be in this movie","The performers don't portray the characters well","The performers are distracting","The performers are fine, I don't notice them much","Some/most of the performances are good","The performers have good chemistry and really bring the characters to life","Excellent performance, I have a hard time imagining a different cast","Perfectly cast with stand-out performances","Perfectly cast, delivering the performance of a lifetime"],visuals:["I think it's a radio drama actually...","The visuals make it hard to watch/follow","The visuals are constantly distracting","The visuals are fine, but some of the choices are distracting","There is nothing notable about the visuals","There are a couple scenes with striking visuals","The visuals are good and really enhance the story-telling","There are a lot of effective visuals with a lot of imagery","There are constantly powerful visuals with striking imagery","The visuals tell a story on their own"],soundtrack:["Oh, this is a talkie?","The soundtrack is apparently just the director's garbage playlist","The soundtrack is distracting and doesn't fit the scenes well","The soundtrack is mostly fine, but a little distracting","There is nothing notable about the soundtrack","The music/sounds in a couple scenes really enhance the impact","The soundtrack is good and enhance the story-telling","A lot of the songs are clearly intentionally chose to fit the scenes","Every song and sound is intentional and impactful","The soundtrack is used to tell a story of its own"]};async function Nb(e){let r=await(await fetch(`https://www.omdbapi.com/?apikey=${Km}&s=${e}`)).json();return r.Search?r.Search:[]}async function Lb(e){let t=localStorage.getItem(e);return t?t=JSON.parse(t):(t=await fetch(`https://www.omdbapi.com/?apikey=${Km}&i=${e}`),t=await t.json(),localStorage.setItem(e,JSON.stringify(t))),t}async function Db(e){let t=e.map(async r=>{let n=await Lb(r.id);return{...r,info:n}});return Promise.all(t)}const xo=({movie:e,category:t,updateRating:r})=>he.jsxs(O0,{style:{alignItems:"center"},children:[he.jsx(Ob,{children:e.rating&&e.rating[t]?e.rating[t]:"-"}),he.jsxs(Di,{children:[he.jsx(jb,{children:t}),he.jsx("input",{style:{width:150},defaultValue:e.rating&&e.rating[t]?e.rating[t]:5,onChange:n=>r(+n.target.value),type:"range",min:"1",max:"10"}),he.jsx(Ub,{children:e.rating&&e.rating[t]?Ib[t][e.rating[t]-1]:"-"})]})]}),Ob=Ue.h3`
    margin: 0em .5em;
    font-size: 1.5em;
`,jb=Ue.p`
    margin: 0px;
    position: relative;
    top: 2px;
    font-size: small;
    font-weight: bold;
`,Ub=Ue.p`
    margin: 0px;
    position: relative;
    bottom: 5px;
    left: 5px;
    font-size: .7em;
`,Mb=({movie:e,rank:t,updateRating:r,saveMovie:n,sort:i})=>{const[o,u]=dt.useState(!1);return he.jsxs(Di,{children:[he.jsxs(Bb,{onClick:()=>u(!o),children:[he.jsx(dl,{children:t}),he.jsxs(Qh,{style:{flex:1},children:[e.info.Title," (",e.info.Year,")"]}),he.jsx(Hb,{children:he.jsx(Qh,{className:i===Lr.custom?"glow":"",children:Ro(e.rating)||"-"})}),window.innerWidth>700&&he.jsxs(he.Fragment,{children:[he.jsx(dl,{children:he.jsx(Yh,{className:i===Lr.imdb?"glow":"",children:e.info.Ratings.find(c=>c.Source===Lr.imdb).Value})}),he.jsx(dl,{children:he.jsx(Yh,{className:i===Lr.meta?"glow":"",children:e.info.Ratings.find(c=>c.Source===Lr.meta).Value})})]})]}),e.info&&he.jsx($b,{className:o?"open":"",children:he.jsxs(Di,{style:{width:540},children:[he.jsxs(O0,{style:{alignItems:"center"},children:[window.innerWidth>700&&he.jsx("img",{src:e.info.Poster,height:300}),he.jsxs(Di,{children:[he.jsx(xo,{movie:e,updateRating:r("story"),category:"story"}),he.jsx(xo,{movie:e,updateRating:r("character"),category:"character"}),he.jsx(xo,{movie:e,updateRating:r("performance"),category:"performance"}),he.jsx(xo,{movie:e,updateRating:r("visuals"),category:"visuals"}),he.jsx(xo,{movie:e,updateRating:r("soundtrack"),category:"soundtrack"})]})]}),he.jsx(Kb,{onClick:()=>n(e),children:"Save"})]})})]})},Bb=Ue.div`
    display: flex;
    border-bottom: gray solid;
    padding: 0em .3em;
    cursor: pointer;
    > * {
        border-left: gray solid;
        padding: .2em;
        &:nth-child(1) {
            border: none;
        }
    }
`,dl=Ue.div`
    width: 3.5em;
    text-align: center;
`,Hb=Ue.div`
    width: 5em;
    text-align: center;
`,Qh=Ue.h3`
    margin: 0em;
    &.glow {
        text-shadow: white 0px 0px 10px;
    }
`,Yh=Ue.p`
    margin: .1em;
    &.glow {
        text-shadow: white 0px 0px 10px;
    }
`,$b=Ue.div`
    display: flex;
    align-items: center;
    justify-content: center;
    transition: max-height .5s ease-in-out;
    max-height: 0px;
    overflow: hidden;
    &.open{
        border-bottom: gray solid;
        max-height: 500px;
    }
`,Kb=Ue.button`
    align-self: end
`,Vb=({value:e,update:t,clear:r})=>he.jsxs(Wb,{children:[he.jsx("input",{placeholder:"search titles...",style:{width:"100%",padding:"0.6em",fontSize:"1em"},value:e,onChange:n=>t(n.target.value)}),e&&he.jsx(zb,{onClick:r,children:"x"})]}),zb=Ue.p`
    position: relative;
    right: 15px;
    margin: 0px;
    cursor: pointer;
    z-index: 1;
`,Wb=Ue.div`
    display: flex;
    width: 100%;
`,qb=({movie:e,select:t})=>he.jsxs(Jb,{children:[he.jsx("img",{src:e.Poster,width:"50px"}),he.jsxs("p",{style:{margin:"0px 5px",flex:1},children:[he.jsx("b",{children:e.Title})," (",e.Year,")"]}),he.jsx(Di,{children:he.jsx(I_,{onClick:()=>t({id:e.imdbID}),children:"+"})})]}),Jb=Ue.div`
    display: flex;
    align-items: center;
    margin: .2em 0em;
    background: black;
    border-radius: 5px;
    padding-right: 5px;
    &:hover {
        background: blue;
    }
`,Gb=({select:e})=>{const[r,n]=dt.useState(!1),[i,o]=dt.useState(""),[u,c]=dt.useState([]),[h,f]=dt.useState(null);dt.useEffect(()=>{h&&clearTimeout(h),f(setTimeout(p,1e3))},[i]);const g=()=>{c([]),o("")},p=()=>{if(f(null),!i){c([]);return}Nb(i).then(c)};return r?he.jsxs(Qb,{children:[he.jsx(Vb,{value:i,update:o,clear:g}),he.jsx(Yb,{children:u.map(y=>he.jsx(qb,{select:e,movie:y},y.imdbID))})]}):he.jsx("button",{onClick:()=>n(!0),children:"add movies"})},Qb=Ue.div`
    display: flex;
    flex-direction: column;
    width: 300px;
`,Yb=Ue.div`
    position: absolute;
    top: 136px;
`,Xb=({movies:e,addMovie:t,saveMovie:r})=>{const[n,i]=dt.useState(e),[o,u]=dt.useState({factor:1,source:Lr.custom});dt.useEffect(()=>{let f=[...e].sort(Rb(o.factor,o.source));i(f)},[e,o]);function c(f){return g=>p=>{let y=e[f];y.rating||(y.rating={}),y.rating[g]=+p,i([...n.slice(0,f),y,...n.slice(f+1)])}}function h(f){f===o.source?u({factor:o.factor*-1,source:f}):u({...o,source:f})}return he.jsxs(Zb,{children:[he.jsxs(e2,{children:[he.jsx(j0,{}),he.jsx(Gb,{select:t})]}),he.jsxs(t2,{children:[he.jsx(fl,{}),he.jsx(zs,{style:{flex:1},children:"Title"}),he.jsx(r2,{onClick:()=>h(Lr.custom),children:he.jsx(zs,{children:"Rating"})}),window.innerWidth>700&&he.jsxs(he.Fragment,{children:[he.jsx(fl,{onClick:()=>h(Lr.imdb),children:he.jsx(zs,{children:"IMDB"})}),he.jsx(fl,{onClick:()=>h(Lr.meta),children:he.jsx(zs,{children:"Meta"})})]})]}),n.map((f,g)=>he.jsx(Mb,{movie:f,rank:g+1,updateRating:c(g),saveMovie:r,sort:o.source},f.id))]})},Zb=Ue.div`
    display: flex;
    flex-direction: column;
    width: 90vw;
    max-width: 1080px;
`,e2=Ue.div`
    display: flex;
    border-bottom: gray solid;
    padding: .3em;
`,t2=Ue.div`
    display: flex;
    border-bottom: gray solid;
    padding: 0em .3em;
    > * {
        border-left: gray solid;
        padding: .2em;
        &:nth-child(1) {
            border: none;
        }
    }
`,fl=Ue.div`
    width: 3.5em;
    text-align: center;
    cursor: pointer;
`,r2=Ue.div`
    width: 5em;
    text-align: center;
    cursor: pointer;
`,zs=Ue.p`
    margin: .0em;
    font-size: .8em;
`,n2=({appData:e})=>{const[t,r]=dt.useState(),[n,i]=dt.useState([]);dt.useEffect(()=>{e.storageURL&&xb(e.fetch,`${e.storageURL}/lore/movies`).then(r)},[e]),dt.useEffect(()=>{t&&kb(t,{shape:Gh}).then(Db).then(i)},[t]);async function o(c){let{dataset:h}=await Fb(c,Gh,{id:c.id,dataset:t,fetch:e.fetch});r(h)}async function u(c){let h=Mm(c.thing,c),{dataset:f}=await Bm(h,t,{fetch:e.fetch});r(f)}return he.jsx(Di,{children:he.jsx(Xb,{movies:n,addMovie:o,saveMovie:u})})};function i2(){const[e,t]=dt.useState(),[r,n]=dt.useState();return dt.useEffect(()=>{VS().then(()=>{console.log("After redirect");let i=Td();i.info&&i.info.isLoggedIn&&(console.info("Started session:",i.info.webId),t(i))})},[]),dt.useEffect(()=>{e&&e.info.isLoggedIn&&bb(e).then(n)},[e]),he.jsxs(he.Fragment,{children:[he.jsxs(A_,{children:[he.jsx("img",{src:Cb}),he.jsx(j0,{}),r?he.jsx("p",{children:r.username}):he.jsx("button",{onClick:Eb,children:"login"})]}),he.jsx(R_,{children:r&&he.jsx(n2,{appData:{fetch:e.fetch,storageURL:r.storageURL}})})]})}hl.createRoot(document.getElementById("root")).render(he.jsx(ji.StrictMode,{children:he.jsx(i2,{})}));
